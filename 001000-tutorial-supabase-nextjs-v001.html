<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>10&nbsp; 10.  Tutorial - intro ‚Äì AI Assisted Software Development</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./001007-tutorial-supabase-projectArchitecture-v001.html" rel="next">
<link href="./000950-internetArchitecture-webFrameworks-v001.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-dcbfc57d77cecfb36a223989b6e6cd2b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
<script src="yrstuff-v001.js"></script>


<link rel="stylesheet" href="yrStyles-main-v001.css">
</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./001000-tutorial-supabase-nextjs-v001.html">Building with Next and Supabase</a></li><li class="breadcrumb-item"><a href="./001000-tutorial-supabase-nextjs-v001.html"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title"><yrchapternumber>10. </yrchapternumber> Tutorial - intro</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">AI Assisted Software Development</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About This Website</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Intro</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000020-introToAi-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title"><yrchapternumber>1. </yrchapternumber> Overview of AI today</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000030-introToAiasd-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title"><yrchapternumber>2. </yrchapternumber> Intro to Coding with an LLM</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000100-howToInstallCursor-v002.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title"><yrchapternumber>3. </yrchapternumber> How to install Cursor on your computer</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Intro to the command line (Bash)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000210-introToBashAndCli-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title"><yrchapternumber>4. </yrchapternumber> Intro to Bash (and CLIs)</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Intro to git and github</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000240-v2-introToGit-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title"><yrchapternumber>5. </yrchapternumber> Intro to Git &amp; GitHub</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000230-v1-introToGit-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title"><yrchapternumber>6. </yrchapternumber> alternate chapter - Intro to Git &amp; GitHub (hands-on, Bash-first)</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Basic Internet Architecture</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000900-internetArchitecture-browsersAndWebservers-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title"><yrchapternumber>7. </yrchapternumber> Browsers (HTML,CSS,Javascript) and Web Servers</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000940-internetArchitecture-domainNamesEtc-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title"><yrchapternumber>8. </yrchapternumber> Domain Names, IP Addresses, ping, etc</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000950-internetArchitecture-webFrameworks-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title"><yrchapternumber>9. </yrchapternumber> Client side web frameworks</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Building with Next and Supabase</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./001000-tutorial-supabase-nextjs-v001.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title"><yrchapternumber>10. </yrchapternumber> Tutorial - intro</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./001007-tutorial-supabase-projectArchitecture-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title"><yrchapternumber>11. </yrchapternumber> Project Architecture</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./001100-tutorial-installNodeNpm-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title"><yrchapternumber>12. </yrchapternumber> Step 0: Install Node.js and npm</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./001110-tutorial-cloneRepo-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title"><yrchapternumber>13. </yrchapternumber> Step 1: Fork the repo and clone it</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./001120-tutorial-installThePackages-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title"><yrchapternumber>14. </yrchapternumber> Step 3: install the packages (with npm)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./009999-tutorial-restOfTheSteps-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title"><yrchapternumber>15. </yrchapternumber> rest of the steps ...</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Practice Questions</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./someFile.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">This is a placeholder</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./someFile.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">This is a placeholder</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./someFile.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">This is a placeholder</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Ignore this - in progress work</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000010-topics-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title"><yrchapternumber>16. </yrchapternumber> TOPICS (ignore this section - it is just for me to develop the book)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000500-htmlCssJavascript-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title"><yrchapternumber>17. </yrchapternumber> Overview of HTML, CSS, JavaScript</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./099999-llmsForDataAnalytics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title"><yrchapternumber>18. </yrchapternumber> Using LLMs to Help With Data Analytics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./900010-codeMetrics-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title"><yrchapternumber>19. </yrchapternumber> Measures of well designed programs</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./someFile.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">This is a placeholder</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./someFile.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">This is a placeholder</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#app-features-and-technologies" id="toc-app-features-and-technologies" class="nav-link active" data-scroll-target="#app-features-and-technologies"><span class="header-section-number">10.1</span> App Features and Technologies</a></li>
  <li><a href="#what-youll-build" id="toc-what-youll-build" class="nav-link" data-scroll-target="#what-youll-build"><span class="header-section-number">10.2</span> What You‚Äôll Build</a></li>
  <li><a href="#code-is-provided---setup-and-integration-is-the-hard-part" id="toc-code-is-provided---setup-and-integration-is-the-hard-part" class="nav-link" data-scroll-target="#code-is-provided---setup-and-integration-is-the-hard-part"><span class="header-section-number">10.3</span> Code is provided - setup and integration is the hard part</a></li>
  <li><a href="#links-from-the-youtube-video" id="toc-links-from-the-youtube-video" class="nav-link" data-scroll-target="#links-from-the-youtube-video"><span class="header-section-number">10.4</span> üîó Links from the youtube video</a></li>
  <li><a href="#chapters-in-the-video" id="toc-chapters-in-the-video" class="nav-link" data-scroll-target="#chapters-in-the-video"><span class="header-section-number">10.5</span> üìö Chapters in the video</a></li>
  <li><a href="#video-transcript-with-clickable-timestamps" id="toc-video-transcript-with-clickable-timestamps" class="nav-link" data-scroll-target="#video-transcript-with-clickable-timestamps"><span class="header-section-number">10.6</span> Video Transcript (with clickable timestamps)</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./001000-tutorial-supabase-nextjs-v001.html">Building with Next and Supabase</a></li><li class="breadcrumb-item"><a href="./001000-tutorial-supabase-nextjs-v001.html"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title"><yrchapternumber>10. </yrchapternumber> Tutorial - intro</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title"><yrchapternumber>10. </yrchapternumber> Tutorial - intro</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Material for this section is based on the following video:</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=576s">YouTube - Supabase Full Product Tutorial (Jan 27, 2025)</a></li>
</ul>
<p>The tutorial walks you through building a complete ‚Äútodo app‚Äù that demonstrates all the core technologies needed for modern web development. The app allows users to create and manage todo items (referred to as ‚Äútasks‚Äù in the video). See the <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=19s">Demo</a> in the video at timestamp <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=19s">00:19</a> to see an overview of the finished application.</p>
<section id="app-features-and-technologies" class="level2" data-number="10.1">
<h2 data-number="10.1" class="anchored" data-anchor-id="app-features-and-technologies"><span class="header-section-number">10.1</span> App Features and Technologies</h2>
<p>The app incorporates the following features and technologies:</p>
<ul>
<li>website ‚Äúfrontend‚Äù built using NodeJS, npm, NextJS</li>
<li>storing data in a database (using Supabase‚Äôs ‚ÄúPostgreSQL‚Äù database hosting)</li>
<li>storing files on the server (using Supabase‚Äôs ‚Äúbuckets‚Äù)</li>
<li>users can login (i.e.&nbsp;authentication - using Google OAuth)</li>
<li>AI features (using an API connection to ChatGPT from OpenAI)</li>
<li>credit card charges (using Stripe payments)</li>
<li>edge functions to make the website faster and more secure (using Supabase‚Äôs edge functions)</li>
<li>automated ‚Äúintegration‚Äù tests - to make sure that everything works and that<br>
you don‚Äôt break the code when making changes</li>
</ul>
<p>The video mentions a lot that you might not be familiar with. Don‚Äôt worry, this website will walk you through the harder parts and explain many concepts along the way that the video does not explain.</p>
</section>
<section id="what-youll-build" class="level2" data-number="10.2">
<h2 data-number="10.2" class="anchored" data-anchor-id="what-youll-build"><span class="header-section-number">10.2</span> What You‚Äôll Build</h2>
<p>A ‚Äútask management‚Äù application (i.e.&nbsp;a ‚Äútodo app‚Äù) with the following features:</p>
<ul>
<li>User authentication (including Google OAuth)</li>
<li>Task creation and editing</li>
<li>Automatic AI-powered task labeling</li>
<li>Image attachments for tasks</li>
<li>User profiles with task statistics</li>
<li>Monthly subscription plans with Stripe payments</li>
</ul>
<p>The video assumes knowledge of things that you might not be familiar with. Don‚Äôt worry, this website will walk you through the harder parts and explain many concepts along the way that the video does not explain.</p>
<!-- YRTODO:
Along the way you will become familiar with the following:

- JavaScript/TypeScript
- React and Next.js
- PostgreSQL (also known simply as Postgres) and Supabase
- REST APIs and HTTP requests
-->
</section>
<section id="code-is-provided---setup-and-integration-is-the-hard-part" class="level2" data-number="10.3">
<h2 data-number="10.3" class="anchored" data-anchor-id="code-is-provided---setup-and-integration-is-the-hard-part"><span class="header-section-number">10.3</span> Code is provided - setup and integration is the hard part</h2>
<p>The code is free for you to download and clone from GitHub here: <a href="https://github.com/pixegami/task-app" class="uri">https://github.com/pixegami/task-app</a> (see the next section for how to do that).</p>
<p>The harder parts here are to understand</p>
<ul>
<li><p>The architecture of the whole project and what different parts of the code are used for.</p></li>
<li><p>How to get this type of project running online. This includes creating accounts with Vercel (for web hosting), Supabase (for database server and other features - see above)</p></li>
</ul>
<p>The goal is that once you understand the architecture of this project and setup the project online, you can use AI to create your own projects. You can use the AI to generate code, but it is important to udnerstand how the whole project is architected so that you know how to speak with the AI.</p>
</section>
<section id="links-from-the-youtube-video" class="level2" data-number="10.4">
<h2 data-number="10.4" class="anchored" data-anchor-id="links-from-the-youtube-video"><span class="header-section-number">10.4</span> üîó Links from the youtube video</h2>
<ul>
<li>Project Code: <a href="https://github.com/pixegami/task-app" class="uri">https://github.com/pixegami/task-app</a></li>
<li>Supabase: <a href="https://supabase.com" class="uri">https://supabase.com</a></li>
<li>Google Cloud: <a href="https://console.cloud.google.com" class="uri">https://console.cloud.google.com</a></li>
<li>OpenAI: <a href="https://platform.openai.com" class="uri">https://platform.openai.com</a></li>
<li>Stripe: <a href="https://stripe.com" class="uri">https://stripe.com</a></li>
</ul>
</section>
<section id="chapters-in-the-video" class="level2" data-number="10.5">
<h2 data-number="10.5" class="anchored" data-anchor-id="chapters-in-the-video"><span class="header-section-number">10.5</span> üìö Chapters in the video</h2>
<ul>
<li><p><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=0s">00:00 Introduction</a></p>
<ul>
<li><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=19s">00:19 Demo</a></li>
</ul></li>
<li><p><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=139s">02:19 Supabase Project Overview</a></p></li>
<li><p><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=311s">05:11 Setting Up</a> - five things we need to setup</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=338s">05:38 Project Checklist</a></li>
</ul></li>
<li><p><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=483s">08:03 Create Supabase Project</a> - project checklist</p></li>
<li><p><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=610s">10:10 Supabase CLI</a></p></li>
<li><p><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=714s">11:54 Google OAuth</a></p></li>
<li><p><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=878s">14:38 OpenAI API Key</a></p></li>
<li><p><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=932s">15:32 Stripe Integration</a></p></li>
<li><p><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1332s">22:12 Add Database</a></p></li>
<li><p><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1648s">27:28 Add Storage</a></p></li>
<li><p><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1729s">28:49 Deploy Edge Functions</a></p></li>
<li><p><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1935s">32:15 Run the Project</a></p></li>
<li><p><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=2043s">34:03 Run Integration Tests</a></p></li>
<li><p><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=2102s">35:02 Wrapping Up</a></p></li>
</ul>
</section>
<section id="video-transcript-with-clickable-timestamps" class="level2" data-number="10.6">
<h2 data-number="10.6" class="anchored" data-anchor-id="video-transcript-with-clickable-timestamps"><span class="header-section-number">10.6</span> Video Transcript (with clickable timestamps)</h2>
<p>Click the following link to a see a transcript of the youtube video with links that take you to the exact locations in the video. I recommend that if you‚Äôre trying to find a location in the video you should click on the link below to show the transcript. Then use your browser‚Äôs search tool (usually ctrl-f or cmd-f) to ‚Äúfind‚Äù text that you are interested in. Then click the link to go to that location in the video.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
click here to see the transcript
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div data-tbl-colwidths="[15,85]">
<table class="caption-top table">
<colgroup>
<col style="width: 15%">
<col style="width: 85%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Timestamp</th>
<th style="text-align: left;">Quote</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=0s">0:00</a></td>
<td style="text-align: left;">In this video, I‚Äôm going to walk you through how to set up a full stack SaaS application using NextJS and Supabase.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=7s">0:07</a></td>
<td style="text-align: left;">I designed this project to be a complete overview of Supabase and an ideal starting point</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=13s">0:13</a></td>
<td style="text-align: left;">for anyone who wants to build and launch a SaaS application as quickly as possible.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=19s">0:19</a></td>
<td style="text-align: left;">Here‚Äôs a quick demo of the finished product. It‚Äôs going to be a task management application. First, you‚Äôll have to log in.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=27s">0:27</a></td>
<td style="text-align: left;">And then on the dashboard, you can see all the tasks you‚Äôve</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=32s">0:32</a></td>
<td style="text-align: left;">created. And you can click here to create a new task. It also has a special AI feature to assign a label</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=40s">0:40</a></td>
<td style="text-align: left;">automatically, depending on the task description. Once you‚Äôve created a task, you can also click to go in</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=48s">0:48</a></td>
<td style="text-align: left;">and edit it. You can change the label, change any of the fields, and you can also upload an image to it.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=57s">0:57</a></td>
<td style="text-align: left;">The app also has authentication, so when you log in, you can only see your own task. And you can go to your profile</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=64s">1:04</a></td>
<td style="text-align: left;">and you can see how many tasks you‚Äôve created. There‚Äôs also a monthly subscription that you</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=69s">1:09</a></td>
<td style="text-align: left;">can use to upgrade your account. And the payments are implemented with Stripe, so if a user</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=75s">1:15</a></td>
<td style="text-align: left;">is signed up, they can click on this page to update or to cancel their subscription. As you can see, it‚Äôs quite a simple project, but it</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=83s">1:23</a></td>
<td style="text-align: left;">uses all the fundamental building blocks that nearly every single SaaS application will need to have.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=89s">1:29</a></td>
<td style="text-align: left;">Things like authentication, compute, and data storage. We will need to use a tech stack that will let us do all of those things.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=96s">1:36</a></td>
<td style="text-align: left;">There‚Äôs actually quite a few viable options here. I ended up going with NextJS and Supabase. I like the feature</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=102s">1:42</a></td>
<td style="text-align: left;">set that it offers, and I think that it strikes a good balance between simplicity and capability.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=109s">1:49</a></td>
<td style="text-align: left;">The GitHub link for this entire project will be available in the video description. You can go there</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=114s">1:54</a></td>
<td style="text-align: left;">to browse the code or to clone the entire project. Now, this video isn‚Äôt exactly a coding tutorial, because each</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=120s">2:00</a></td>
<td style="text-align: left;">of the features here could probably be its own video. Instead, I‚Äôm going to focus on helping you understand</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=126s">2:06</a></td>
<td style="text-align: left;">how all of the pieces fit together, and I‚Äôm going to show you how to set up this project on your own machine, so that you can</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=133s">2:13</a></td>
<td style="text-align: left;">start building things with it right away. By the end of this video, you‚Äôll have a good understanding</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=139s">2:19</a></td>
<td style="text-align: left;">of how Supabase works, you‚Äôll learn four of its core features, and you‚Äôll also have the</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=145s">2:25</a></td>
<td style="text-align: left;">actual project up and running on your machine. I‚Äôve prepared this video assuming that you‚Äôre at</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=151s">2:31</a></td>
<td style="text-align: left;">least a mid-level developer, and here are some of the technologies we‚Äôll be working with. If you aren‚Äôt familiar with them, then I‚Äôll still</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=158s">2:38</a></td>
<td style="text-align: left;">try to make it as accessible as I can, but it just might be a little bit hard to follow. First, let‚Äôs start with a high-level overview of the whole project.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=166s">2:46</a></td>
<td style="text-align: left;">These are the features that we want our app to have. They include task management, image attachments, automatic</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=173s">2:53</a></td>
<td style="text-align: left;">AI labeling for our tasks, and the ability to sell premium subscription plans to our users.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=179s">2:59</a></td>
<td style="text-align: left;">It‚Äôs a pretty standard set of features for an app, but the reason I chose these is that behind</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=184s">3:04</a></td>
<td style="text-align: left;">each of these features, there‚Äôs a really important concept that I want to show you. So, having them all in one project is a great way</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=192s">3:12</a></td>
<td style="text-align: left;">to learn how to apply all of them at once. Now, let‚Äôs take a quick look at the architecture</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=198s">3:18</a></td>
<td style="text-align: left;">for this project. Here is a simplified diagram. For the backend, we‚Äôll be using Supabase. Supabase describes itself as an open-source Firebase alternative,</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=207s">3:27</a></td>
<td style="text-align: left;">and if you don‚Äôt know what that is, you can sort of think of it as a lightweight cloud platform.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=213s">3:33</a></td>
<td style="text-align: left;">It gives us almost everything we need for this app right out of the box and in one place. The database is going to be a PostgreSQL database,</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=221s">3:41</a></td>
<td style="text-align: left;">and the storage system is pretty similar to something like Amazon S3 or Firestore.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=227s">3:47</a></td>
<td style="text-align: left;">For our backend compute, we can also create edge functions using TypeScript. And there‚Äôs also an inbuilt authentication system that</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=234s">3:54</a></td>
<td style="text-align: left;">integrates really well with all of these features, but also with third-party providers like Google, OAuth.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=240s">4:00</a></td>
<td style="text-align: left;">The front end is going to be a fully static NextJS app. You‚Äôll have a client library that will talk to Supabase directly.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=247s">4:07</a></td>
<td style="text-align: left;">On top of that, we will also need a couple of third-party services to round out our feature set.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=253s">4:13</a></td>
<td style="text-align: left;">We will need a Google Cloud account if we want users to be able to sign in with Google. For our backend feature, we can actually use any LLM here.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=261s">4:21</a></td>
<td style="text-align: left;">And I‚Äôm just going to use OpenAI. And finally, we‚Äôll use Stripe for our payments system. Now, how does this all get hosted, and how much will it cost?</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=270s">4:30</a></td>
<td style="text-align: left;">Well, you basically have a few different options with Supabase. The easiest option is to use their cloud service.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=277s">4:37</a></td>
<td style="text-align: left;">This is really simple to set up, and it‚Äôs probably the best option if you want to get started as soon as possible. It comes with a free tier, which works perfectly fine for this project.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=286s">4:46</a></td>
<td style="text-align: left;">And in fact, that is what we‚Äôll be using. The next tier up is $25 a month, and it gives you a lot more of everything.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=293s">4:53</a></td>
<td style="text-align: left;">That being said, Supabase is also completely open source. So another option is that you can host it yourself</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=300s">5:00</a></td>
<td style="text-align: left;">or deploy it to a cloud provider like AWS or GCP. But I think that‚Äôs going to be quite complex to manage,</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=306s">5:06</a></td>
<td style="text-align: left;">and I don‚Äôt really recommend doing that. It‚Äôs just good to know that it is an option. Okay, so now that we‚Äôve gone over all the high-level stuff, let‚Äôs</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=314s">5:14</a></td>
<td style="text-align: left;">look at our plan for how we‚Äôre going to set up the project. We will need to set up five separate things to get this all working.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=320s">5:20</a></td>
<td style="text-align: left;">We‚Äôll start by just downloading the code from GitHub and then creating a project on the Supabase cloud.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=326s">5:26</a></td>
<td style="text-align: left;">Then we‚Äôll go and set up the rest of the dependencies first. Google OAuth, OpenAI, and Stripe.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=332s">5:32</a></td>
<td style="text-align: left;">And then we‚Äôll have all the API keys we need to go back to our project and actually finish setting it up.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=338s">5:38</a></td>
<td style="text-align: left;">Here‚Äôs a checklist of the steps that we are going to take. And throughout this video, we‚Äôll go down the</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=343s">5:43</a></td>
<td style="text-align: left;">list and we‚Äôll tick them off one by one. Let‚Äôs start off by cloning the project. By the way, all the links you need for this video</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=349s">5:49</a></td>
<td style="text-align: left;">are going to be in the video description. Once you‚Äôve cloned the project, open the project in your terminal and run npm install.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=356s">5:56</a></td>
<td style="text-align: left;">This should finish successfully, but there might be a few</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=361s">6:01</a></td>
<td style="text-align: left;">warnings because things are always getting deprecated. We will also need to create two local .env</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=369s">6:09</a></td>
<td style="text-align: left;">files to store our environment variables. I‚Äôve actually created an example.env file for you here.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=376s">6:16</a></td>
<td style="text-align: left;">So if you‚Äôre on a Unix system, you can just run this command to create copies from that. And if you open the project in VSCode, you‚Äôll be able to see them here.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=389s">6:29</a></td>
<td style="text-align: left;">So here is the example file, and here are the two files I‚Äôve just created. And they have to be named exactly this way because that‚Äôs</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=397s">6:37</a></td>
<td style="text-align: left;">where our project is going to be looking for them. Now here are some of the environment variables that we‚Äôll need to fill in.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=403s">6:43</a></td>
<td style="text-align: left;">We‚Äôll come back to this later once we actually have them. That‚Äôs all the setup we have to do for our project code at the moment.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=410s">6:50</a></td>
<td style="text-align: left;">But if you try to run it now, it won‚Äôt work because we haven‚Äôt set up any of the backend yet. But if you do want to see the front end of the project</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=418s">6:58</a></td>
<td style="text-align: left;">on its own and play around with it, then I actually have an earlier commit where it‚Äôs just</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=424s">7:04</a></td>
<td style="text-align: left;">using placeholders for all of the backend logic. So if you go to the GitHub repo and click on the commits</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=430s">7:10</a></td>
<td style="text-align: left;">tab, you can scroll down all the way to the bottom. And there‚Äôs this commit here that says front end boilerplate.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=438s">7:18</a></td>
<td style="text-align: left;">So you can copy this commit hash, and then you can run this command in your project folder to check out that specific commit.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=447s">7:27</a></td>
<td style="text-align: left;">So if you use that command to roll it back to that commit, you should be able to run npm run dev,</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=453s">7:33</a></td>
<td style="text-align: left;">and it‚Äôll start a local version of the site. And this will run a version of the site where you just have the</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=459s">7:39</a></td>
<td style="text-align: left;">front end and all of the backend integration is stripped out. You can still click around and play around with the UI, but it won‚Äôt do anything.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=467s">7:47</a></td>
<td style="text-align: left;">And you‚Äôll find that any of the buttons or the interactions will basically just console log a to-do statement for it to be implemented.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=474s">7:54</a></td>
<td style="text-align: left;">But now, back to this project, we will want to use the latest commit. So if you did check out the older commit, then</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=480s">8:00</a></td>
<td style="text-align: left;">please use this command to revert it back. Let‚Äôs move on to the next step, which is to create an actual Supabase project.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=486s">8:06</a></td>
<td style="text-align: left;">Go to Supabase.com and create or log in with your account. In your dashboard, click create new project.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=495s">8:15</a></td>
<td style="text-align: left;">You might also have to create an organization first, but I already have one here.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=501s">8:21</a></td>
<td style="text-align: left;">Fill in your project name and generate a secure password for your database. You‚Äôll also want to copy the database password</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=508s">8:28</a></td>
<td style="text-align: left;">as well, because you‚Äôre going to need it later when we set up the Supabase CLI.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=514s">8:34</a></td>
<td style="text-align: left;">And finally, choose a region that‚Äôs close to you or your customers. Then go ahead and create the project.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=522s">8:42</a></td>
<td style="text-align: left;">This will take a few minutes to set up, but while you wait, it does show you your API keys and some important</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=528s">8:48</a></td>
<td style="text-align: left;">information that we will need in the next step. Or if your project already finished setting</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=533s">8:53</a></td>
<td style="text-align: left;">up, then it will look something like this. On the toolbar on the left, go over to project settings.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=540s">9:00</a></td>
<td style="text-align: left;">You‚Äôll find some really useful things on this page. For example, you can look at what compute your project is configured to use.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=547s">9:07</a></td>
<td style="text-align: left;">You can also check out how much storage disk you‚Äôre using up already. And also extra options like adding custom domain names.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=556s">9:16</a></td>
<td style="text-align: left;">But for now, what we need is under this API configuration tab. Here you‚Äôll find the project URL and two API keys.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=566s">9:26</a></td>
<td style="text-align: left;">One is a public key, so this is for the Supabase client. This one is okay to be revealed, because this is the one that‚Äôs</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=573s">9:33</a></td>
<td style="text-align: left;">usually embedded with the front end client anyways. It‚Äôs going to be what your website uses to call the Supabase backend.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=581s">9:41</a></td>
<td style="text-align: left;">The other one is a secret key. This is useful for doing backend server-side operations. This one you definitely do not want to reveal.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=589s">9:49</a></td>
<td style="text-align: left;">So now we‚Äôre going to copy the URL and the public key back to our project. And then back in your project, go to your .env.local</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=597s">9:57</a></td>
<td style="text-align: left;">file, or create one if you didn‚Äôt do it already. And we‚Äôll only need these two things, we actually don‚Äôt</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=602s">10:02</a></td>
<td style="text-align: left;">need these other keys, so we can delete those. And go ahead and paste your project URL and your public key.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=610s">10:10</a></td>
<td style="text-align: left;">Now to work with Supabase from our local environment, we‚Äôre going to want to use the Supabase CLI.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=616s">10:16</a></td>
<td style="text-align: left;">So just search for Supabase CLI on Google, and you should see the official documentation pop up.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=622s">10:22</a></td>
<td style="text-align: left;">Then scroll down and follow the instructions for your specific platform to install the CLI.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=629s">10:29</a></td>
<td style="text-align: left;">Then you can verify the installation using this command. For this video I‚Äôm using Supabase version 2, so if you‚Äôre</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=635s">10:35</a></td>
<td style="text-align: left;">using a different major version, then keep in mind that some of the CLI commands may be different.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=641s">10:41</a></td>
<td style="text-align: left;">Now back in our development environment, you‚Äôd normally have to run this command to initialize Supabase</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=646s">10:46</a></td>
<td style="text-align: left;">to add it to a project that doesn‚Äôt have it yet. But for our project, I actually initialized Supabase</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=651s">10:51</a></td>
<td style="text-align: left;">earlier, and you can tell because there‚Äôs a Supabase folder with a config file. So we don‚Äôt have to run the command again for this one.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=659s">10:59</a></td>
<td style="text-align: left;">We will need to run this command to link your local project with the remote Supabase project.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=665s">11:05</a></td>
<td style="text-align: left;">Don‚Äôt forget to replace the PROJECT REF variable with your own one. Your project reference is basically the random ID part of your URL.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=674s">11:14</a></td>
<td style="text-align: left;">When you run this command, it‚Äôs going to ask you to enter</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=679s">11:19</a></td>
<td style="text-align: left;">your database password from when you created the project. So go ahead and do that as well.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=687s">11:27</a></td>
<td style="text-align: left;">Now that should work successfully, but it might throw a warning about the local config being different from the linked project.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=694s">11:34</a></td>
<td style="text-align: left;">But I wouldn‚Äôt worry about that for now. Then to test if everything is set up correctly, you can run this command.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=700s">11:40</a></td>
<td style="text-align: left;">You should see a list of projects, and you should also see a dot next to the one that is linked.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=707s">11:47</a></td>
<td style="text-align: left;">Alright, so at this point we‚Äôve downloaded the project code, and we‚Äôve set up the Supabase project itself. Let‚Äôs move on to the next step.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=714s">11:54</a></td>
<td style="text-align: left;">Next, we‚Äôre going to set up Google Cloud so that we can let our users log in with a Google account. Supabase actually has a lot of different options</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=721s">12:01</a></td>
<td style="text-align: left;">for signing in, but I prefer to just use a third party integration like Google, because it‚Äôs</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=727s">12:07</a></td>
<td style="text-align: left;">both easier for us to maintain, and it‚Äôs also easier for our customers as well, because they</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=732s">12:12</a></td>
<td style="text-align: left;">don‚Äôt have to sign up for a separate account. First, head over to the Google Cloud console, and then either</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=738s">12:18</a></td>
<td style="text-align: left;">log in or create an account if you don‚Äôt already have one. And if this is your first time using Google Cloud,</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=745s">12:25</a></td>
<td style="text-align: left;">you will also have to create a new project. So I‚Äôve created a project here for this SaaS application.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=752s">12:32</a></td>
<td style="text-align: left;">Now you might also need to attach a credit card to this account, but the OAuth pricing</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=757s">12:37</a></td>
<td style="text-align: left;">is free for up to 50,000 monthly active users, so you probably won‚Äôt get charged.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=763s">12:43</a></td>
<td style="text-align: left;">So once you‚Äôre on this page, go to the search bar at the top and type in ‚ÄúCredentials‚Äù, and</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=768s">12:48</a></td>
<td style="text-align: left;">select ‚ÄúCredentials‚Äù from ‚ÄúAPI and Services‚Äù. Now on this page, click here to create credentials, and select ‚ÄúOAuth client ID‚Äù.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=778s">12:58</a></td>
<td style="text-align: left;">For the application type, choose ‚Äúweb application‚Äù, and then type in a name for it here.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=785s">13:05</a></td>
<td style="text-align: left;">Now we also have to add the authorized JavaScript origins and the authorized redirect URIs.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=793s">13:13</a></td>
<td style="text-align: left;">For the authorized origin, put your Supabase project URL, and you can also put localhost so that</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=798s">13:18</a></td>
<td style="text-align: left;">we can test it from our development environment. And for the redirect, put in this URL.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=804s">13:24</a></td>
<td style="text-align: left;">This is actually provided to us by Supabase. If you go to authentication, then to providers,</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=810s">13:30</a></td>
<td style="text-align: left;">and then expand the Google tab, you will see the callback URL here for us to copy.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=816s">13:36</a></td>
<td style="text-align: left;">So let‚Äôs go back to the project and put that in. So now your settings should look something like this,</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=822s">13:42</a></td>
<td style="text-align: left;">and then you can go ahead and click ‚Äúcreate‚Äù. And when that‚Äôs done, you should see this little pop-up</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=828s">13:48</a></td>
<td style="text-align: left;">with your client ID and your client secret. So go back to your Supabase dashboard, go to authentication,</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=836s">13:56</a></td>
<td style="text-align: left;">and then providers, and then open the Google tab, and enable ‚Äúsign in for Google‚Äù.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=843s">14:03</a></td>
<td style="text-align: left;">And then just paste the client ID and the secret from the previous step, and click ‚Äúsave‚Äù.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=849s">14:09</a></td>
<td style="text-align: left;">While we‚Äôre here, you can also check out all the other authentication providers available, in case you want to use them.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=856s">14:16</a></td>
<td style="text-align: left;">And just an interesting note, I‚Äôve also enabled email as a provider, and I think that‚Äôs the default for a new Supabase project anyways.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=863s">14:23</a></td>
<td style="text-align: left;">But for testing purposes, I actually disabled this ‚Äúconfirm email‚Äù feature, because it</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=868s">14:28</a></td>
<td style="text-align: left;">makes it easier for me to create test users. Okay, so now you‚Äôre done with auth, and your Supabase project</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=874s">14:34</a></td>
<td style="text-align: left;">should be wired up to let users log in with Google. Next, we‚Äôre also going to need an OpenAI API key.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=881s">14:41</a></td>
<td style="text-align: left;">We‚Äôre going to be using this for our back-end feature, where we automatically assign</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=886s">14:46</a></td>
<td style="text-align: left;">labels to a task, based on its description. Now, this API is pay-per-use, but the pricing is quite</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=893s">14:53</a></td>
<td style="text-align: left;">cheap, and our usage is going to be very low. If you don‚Äôt have an OpenAI account, then go to platform.OpenAI.com to create it.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=902s">15:02</a></td>
<td style="text-align: left;">Log into your account, and then open the search bar, and search for ‚ÄúAPI keys‚Äù.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=908s">15:08</a></td>
<td style="text-align: left;">And then you can click up here to create a new API key for your project. So go ahead and create that, and then copy the secret key.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=915s">15:15</a></td>
<td style="text-align: left;">Then, back in your project terminal, run the Supabase-cli command to set the OpenAI key as a back-end secret.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=923s">15:23</a></td>
<td style="text-align: left;">The project will be using this later on in our server-side edge functions. The final dependency we need for this project is Stripe, and we‚Äôre</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=933s">15:33</a></td>
<td style="text-align: left;">going to use this to process payments for our customers. So, back in our app, we limit users to only creating 100 tasks per month.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=943s">15:43</a></td>
<td style="text-align: left;">And when they upgrade to Premium, the limit gets raised to 10,000. Now, this is probably not the best business model</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=950s">15:50</a></td>
<td style="text-align: left;">for this app, but the point is just to show you how to implement this at a technical level. Compared to our other dependencies, Stripe is a little bit more complex to set up.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=960s">16:00</a></td>
<td style="text-align: left;">But I‚Äôm going to try to keep this as simple as possible. There are three main steps we need to go through.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=966s">16:06</a></td>
<td style="text-align: left;">First, we want to create an account and set up the Stripe CLI. And then we‚Äôll have to create a product, which</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=971s">16:11</a></td>
<td style="text-align: left;">is basically the subscription for our app. And finally, we‚Äôll need to set up webhooks so that</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=977s">16:17</a></td>
<td style="text-align: left;">Stripe can tell our Supabase server whenever there‚Äôs an update with our customers‚Äô payments.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=983s">16:23</a></td>
<td style="text-align: left;">If you don‚Äôt have a Stripe account yet, then go to stripe.com and create one. Once you‚Äôre signed in, you should be on this dashboard.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=991s">16:31</a></td>
<td style="text-align: left;">Just go to the top and make sure that you enable test mode. This will basically let us test the whole integration</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=998s">16:38</a></td>
<td style="text-align: left;">without using real money or credit cards. Our Stripe account will also have a secret API key.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1005s">16:45</a></td>
<td style="text-align: left;">So to find it, just go into the search box and type in ‚ÄúAPI key‚Äù and then go to ‚Äúdevelopers</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1010s">16:50</a></td>
<td style="text-align: left;">API key.‚Äù And take note of the secret key here, because we‚Äôre going to need this for later.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1016s">16:56</a></td>
<td style="text-align: left;">Next, we‚Äôll need to install the Stripe CLI. So just search for Stripe CLI on Google and it</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1021s">17:01</a></td>
<td style="text-align: left;">should link you to the official documentation. And if you scroll down, you‚Äôll see different tabs depending</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1027s">17:07</a></td>
<td style="text-align: left;">on which platform you want to see the command for. Once you‚Äôve installed it, then run this command in</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1032s">17:12</a></td>
<td style="text-align: left;">your terminal to log in with your Stripe account. Next, let‚Äôs use the Stripe CLI to create a new product and a price.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1040s">17:20</a></td>
<td style="text-align: left;">In Stripe, products and prices are two distinct object types. And a product can have multiple different prices, but</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1048s">17:28</a></td>
<td style="text-align: left;">every price must be associated with a product. Now, to create the products and the prices, we can go to our Stripe</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1055s">17:35</a></td>
<td style="text-align: left;">dashboard and then click to create them through there. But we can also do it with a command in the CLI, which is a little bit faster.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1065s">17:45</a></td>
<td style="text-align: left;">So that‚Äôs what I‚Äôm going to do for this project. So if you go back to the project and then you open the README file, scroll all the way down until</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1071s">17:51</a></td>
<td style="text-align: left;">you see the part that says Stripe setup. And there‚Äôs a couple of commands that you can just copy and paste into your terminal</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1079s">17:59</a></td>
<td style="text-align: left;">to create the product via the CLI directly. This command will create both a price and a product for us together.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1086s">18:06</a></td>
<td style="text-align: left;">It creates a $10 monthly subscription for a new product called Taskmaster Premium with a 14-day trial.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1094s">18:14</a></td>
<td style="text-align: left;">So go ahead and run that in your project terminal. And when it‚Äôs done, you should see an output object like this.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1102s">18:22</a></td>
<td style="text-align: left;">And we‚Äôre going to want to take note of the price ID because we will need that for later. Next, we‚Äôll also need to run another command to set up the customer portal.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1112s">18:32</a></td>
<td style="text-align: left;">This is going to set up a page that customers can go to to either update or cancel their subscriptions.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1119s">18:39</a></td>
<td style="text-align: left;">Just make sure that before you run this command to replace the URLs with your own Supabase URLs.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1125s">18:45</a></td>
<td style="text-align: left;">And in this project, I actually haven‚Äôt created the privacy or the terms of service pages. So these links will probably just bounce back to the homepage.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1134s">18:54</a></td>
<td style="text-align: left;">So that‚Äôs something you can add if you want. And to finish our Stripe setup, we will need to add a webhook.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1143s">19:03</a></td>
<td style="text-align: left;">A webhook is a URL endpoint that we provide that Stripe can send events and notifications to.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1149s">19:09</a></td>
<td style="text-align: left;">And it will use this to tell us about things like successful checkouts and subscription cancellations.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1155s">19:15</a></td>
<td style="text-align: left;">And then we‚Äôll use that information to update our database. So go back to your Stripe dashboard and then search for webhooks.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1163s">19:23</a></td>
<td style="text-align: left;">And then go to Developers / Webhooks. And here, click add endpoint.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1169s">19:29</a></td>
<td style="text-align: left;">Our webhook endpoint is going to look something like this. We will implement this later as an edge function.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1175s">19:35</a></td>
<td style="text-align: left;">Just make sure to update the project ID to your actual Supabase project URL.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1181s">19:41</a></td>
<td style="text-align: left;">And then enter it here as your endpoint.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1187s">19:47</a></td>
<td style="text-align: left;">Next, you have to select which events for it to listen to.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1193s">19:53</a></td>
<td style="text-align: left;">These are the four events that you need to select. These events will give us everything we need to build the</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1204s">20:04</a></td>
<td style="text-align: left;">subscription functionality that we want for our app.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1212s">20:12</a></td>
<td style="text-align: left;">Once you‚Äôve filled in the endpoint and the events, then click add endpoint. And now your webhook will be set up and you can</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1220s">20:20</a></td>
<td style="text-align: left;">click here to get your webhook secret key. So now we should have all the keys we need to integrate Stripe with our project.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1228s">20:28</a></td>
<td style="text-align: left;">If you missed one of them, then just rewind this chapter. And again, here‚Äôs the Supabase CLI command you need to</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1234s">20:34</a></td>
<td style="text-align: left;">run to set up the secrets in the Supabase project. So go ahead and run these for each of the keys.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1241s">20:41</a></td>
<td style="text-align: left;">We‚Äôre going to need the Stripe API secret key, the price ID and the webhook secret.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1247s">20:47</a></td>
<td style="text-align: left;">So back in my terminal, I‚Äôve set up all three keys. And to confirm that I can run Supabase secrets list.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1256s">20:56</a></td>
<td style="text-align: left;">And that will show me all the different secrets that I‚Äôve registered with my Supabase project. So at this point, you should see four of them.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1264s">21:04</a></td>
<td style="text-align: left;">Now there‚Äôs actually one more place where we need to set up our Stripe secret key. And that‚Äôs going to be in our vault table in the database.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1272s">21:12</a></td>
<td style="text-align: left;">And this is an inbuilt Supabase table where we can store secret keys that our database can use as part of automatic triggers.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1280s">21:20</a></td>
<td style="text-align: left;">In this project specifically, I‚Äôm using it so that I can make Stripe create a user for</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1286s">21:26</a></td>
<td style="text-align: left;">us whenever we create a user in Supabase. Because there are different user systems, but we want them to be associated.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1293s">21:33</a></td>
<td style="text-align: left;">We‚Äôre going to implement that using a database trigger. But to do that, it will need to have the stripe secret</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1298s">21:38</a></td>
<td style="text-align: left;">key so that it has the authority to create new users. To add this, go back to your Supabase dashboard and then go to SQL editor.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1306s">21:46</a></td>
<td style="text-align: left;">And that in this window, we‚Äôre going to run this command.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1312s">21:52</a></td>
<td style="text-align: left;">Just remember to replace this with your actual secret key from Stripe. And then click run and then you should see that it should</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1320s">22:00</a></td>
<td style="text-align: left;">create this key for you and return a key ID. And if you‚Äôve accidentally added the wrong</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1326s">22:06</a></td>
<td style="text-align: left;">secret or you just want to update it, then you‚Äôll need to use this command instead. So now that we‚Äôre done setting up our dependencies, let‚Äôs go</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1334s">22:14</a></td>
<td style="text-align: left;">back to our Supabase project and set up our database next. Our database is going to be a Postgres SQL database</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1341s">22:21</a></td>
<td style="text-align: left;">and we‚Äôre going to create three tables. We‚Äôll have a profile table for each user.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1348s">22:28</a></td>
<td style="text-align: left;">There we will store information about their account status. Now this is going to be read only for the user.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1355s">22:35</a></td>
<td style="text-align: left;">It‚Äôs also going to be linked to an auth table, which comes out of the box with Supabase. This means that our user ID primary key in</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1363s">22:43</a></td>
<td style="text-align: left;">this profile table is going to map directly to a user ID in the auth table as well.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1370s">22:50</a></td>
<td style="text-align: left;">And you‚Äôre going to see this pattern where we use a primary key for the user as a foreign key in each of our tables.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1378s">22:58</a></td>
<td style="text-align: left;">Now our most important table is going to be this task table here. We will store each task as a row and it will have a user ID as part of its key.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1389s">23:09</a></td>
<td style="text-align: left;">And finally, we‚Äôll also have a separate table to track the usage of each user per month.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1395s">23:15</a></td>
<td style="text-align: left;">And the reason I decided to use a separate table to track the usage is that I think it will</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1401s">23:21</a></td>
<td style="text-align: left;">be easier to scale that way, rather than tracking it in the user profile table directly.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1407s">23:27</a></td>
<td style="text-align: left;">So this is going to be the schema for the database. But on top of this, we will also have security policies and triggers.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1415s">23:35</a></td>
<td style="text-align: left;">We‚Äôre going to use something called row level security. That basically means that to be able to read or update a</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1422s">23:42</a></td>
<td style="text-align: left;">row of a database, certain conditions have to be met. For example, we can check if the user ID of a request matches</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1430s">23:50</a></td>
<td style="text-align: left;">the user ID value of the row that we want to access. And then we use row level security to enforce these roles for our app.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1440s">24:00</a></td>
<td style="text-align: left;">And we‚Äôre also going to have something called triggers. Triggers are functions that we can execute when</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1445s">24:05</a></td>
<td style="text-align: left;">something happens inside our database. And these functions are run by our dedicated PostgreSQL server.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1452s">24:12</a></td>
<td style="text-align: left;">In this project, we will use them quite a lot. We‚Äôll use triggers to update task limits for each user whenever they create a task.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1460s">24:20</a></td>
<td style="text-align: left;">We can also stop them from creating new tasks once they‚Äôve reached their limit. We‚Äôll also use it to automatically create a Stripe</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1468s">24:28</a></td>
<td style="text-align: left;">user whenever a new user is created in our system. That‚Äôs because, as I mentioned before, Stripe has its own user system.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1476s">24:36</a></td>
<td style="text-align: left;">So we need some automation to link them together. And finally, we can also use it to automatically clean up our</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1482s">24:42</a></td>
<td style="text-align: left;">users and our storage when things are deleted as well. Now, that‚Äôs a lot of stuff I just went through.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1488s">24:48</a></td>
<td style="text-align: left;">So how are we going to implement all of that very quickly? Well, with Supabase, we can write instructions</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1494s">24:54</a></td>
<td style="text-align: left;">for all of those things using SQL files. And if we go back to our project and then we</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1499s">24:59</a></td>
<td style="text-align: left;">go to the Supabase migrations folder, you‚Äôll see that we have a bunch of SQL files for each of these things that we want to add.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1506s">25:06</a></td>
<td style="text-align: left;">And if you click through them, you could see the statements used to create the tables. So here‚Äôs the table schema.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1513s">25:13</a></td>
<td style="text-align: left;">And you can also see triggers being created and security policies being created. And the reason I‚Äôve separated each of these statements</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1521s">25:21</a></td>
<td style="text-align: left;">into separate files is just to make it easier for you to understand each new thing that we‚Äôre setting up.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1528s">25:28</a></td>
<td style="text-align: left;">It‚Äôs exactly the same as if I had all of these statements in one giant file, but that‚Äôs just going</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1533s">25:33</a></td>
<td style="text-align: left;">to be a little bit more difficult to read. To apply these files to a project, you can run this command.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1540s">25:40</a></td>
<td style="text-align: left;">This is called apply a migration. It will execute all of the SQL statements in each file in lexical order.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1548s">25:48</a></td>
<td style="text-align: left;">And so if you go back to our project, you‚Äôll see that each of our SQL files has a number in front of it. And so basically that‚Äôs the order that I want to run the files in.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1556s">25:56</a></td>
<td style="text-align: left;">But in a real world situation, I think that people would typically use a timestamp for this number.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1562s">26:02</a></td>
<td style="text-align: left;">So I‚Äôm going to go ahead and run this now in my terminal. And once the command is done, Supabase will have</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1568s">26:08</a></td>
<td style="text-align: left;">created all the databases, triggers, and security policies that we told it to in those SQL files.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1576s">26:16</a></td>
<td style="text-align: left;">Now notice if I try to run the command again, it doesn‚Äôt actually</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1581s">26:21</a></td>
<td style="text-align: left;">do anything, even if I change the contents of these files. That‚Äôs because these commands, once they apply a migration file,</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1590s">26:30</a></td>
<td style="text-align: left;">it kind of remembers that it‚Äôs already done that file. So if you want to create new migrations, you actually</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1597s">26:37</a></td>
<td style="text-align: left;">have to create a new file and just make that number in front of it keep increasing.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1603s">26:43</a></td>
<td style="text-align: left;">But if the project is still in development like this one here, and you wanted to do a full reset, you can run this command instead.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1610s">26:50</a></td>
<td style="text-align: left;">This will clear your entire database and then run every SQL file from the beginning. And once you finish running your migration, you can</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1616s">26:56</a></td>
<td style="text-align: left;">go to your Supabase project to check it out. So go to database and then go to schema visualizer, and you should</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1622s">27:02</a></td>
<td style="text-align: left;">see the schema for the database that you just created. And something very cool that I want to mention about Supabase</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1629s">27:09</a></td>
<td style="text-align: left;">is that it automatically creates an API for your database. So you can do CRUD operations from your front end really</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1636s">27:16</a></td>
<td style="text-align: left;">easily without having to implement the API yourself. You can read more about that feature inside the REST API</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1643s">27:23</a></td>
<td style="text-align: left;">or the Data API documentation on the Supabase website. Now back to the app, one of my favorite features here</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1650s">27:30</a></td>
<td style="text-align: left;">is that users can upload images to their tasks. To implement this, we‚Äôre going to use Supabase‚Äôs storage feature.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1657s">27:37</a></td>
<td style="text-align: left;">And I have some good news for you. If you ran the previous command, then you‚Äôve already set this up.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1663s">27:43</a></td>
<td style="text-align: left;">One of our SQL files from the previous step actually creates something called a storage bucket. It did that by creating an entry in this built-in storage buckets table.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1673s">27:53</a></td>
<td style="text-align: left;">And behind the scenes, that actually causes Supabase to set up a storage bucket for us.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1679s">27:59</a></td>
<td style="text-align: left;">So if you go back to your Supabase dashboard and then you go down and click storage, you‚Äôll see that it‚Äôs created a bucket for us here.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1686s">28:06</a></td>
<td style="text-align: left;">And the bucket doesn‚Äôt have anything in it right now. But if you go here and click edit bucket and click on</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1692s">28:12</a></td>
<td style="text-align: left;">additional configuration, you‚Äôll see that we‚Äôve actually configured the bucket already from our SQL schema.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1698s">28:18</a></td>
<td style="text-align: left;">We‚Äôve configured it to restrict the upload size to one megabyte, and we‚Äôve also configured it to only accept images.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1705s">28:25</a></td>
<td style="text-align: left;">Now I do want to mention that I did make this bucket public, which means that if people have the URL to an</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1711s">28:31</a></td>
<td style="text-align: left;">image, they can actually just go ahead and see it. And I did that because it‚Äôs more simple to set it up with the front end.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1719s">28:39</a></td>
<td style="text-align: left;">But if you were doing this for real, then I probably recommend making this private. It‚Äôs just that it‚Äôs a little bit more complex to set up.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1726s">28:46</a></td>
<td style="text-align: left;">So it‚Äôs a little bit out of scope for this video. So now we‚Äôve set up the database and the storage,</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1731s">28:51</a></td>
<td style="text-align: left;">and we‚Äôre moving on to the final setup step, which is deploying our edge functions.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1737s">28:57</a></td>
<td style="text-align: left;">Edge functions are custom functions that run on demand in response to HTTP requests.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1743s">29:03</a></td>
<td style="text-align: left;">Think of them as a way to run any code that you‚Äôd normally need a server for. In our project, you‚Äôll find them in the Supabase/functions folder.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1751s">29:11</a></td>
<td style="text-align: left;">Each subfolder is an edge function. The code is implemented as a TypeScript function,</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1756s">29:16</a></td>
<td style="text-align: left;">and it will be run in a Deno environment. So here, I‚Äôm just going to go back to the project to show you where they are.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1763s">29:23</a></td>
<td style="text-align: left;">Go to your Supabase folder, and then go to your functions folder. And then each of the functions is going to be its own separate subfolder.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1770s">29:30</a></td>
<td style="text-align: left;">If you open that up, you‚Äôll see this index.ts file, and that is the code for one of our functions.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1777s">29:37</a></td>
<td style="text-align: left;">Now, we will be able to build and deploy these functions directly from our project using the Supabase CLI.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1785s">29:45</a></td>
<td style="text-align: left;">They also support environment variables, which is where we can go and fetch those secrets that we</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1791s">29:51</a></td>
<td style="text-align: left;">stored earlier when we set up our dependencies. Here‚Äôs a short snippet from one of our functions,</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1797s">29:57</a></td>
<td style="text-align: left;">and it‚Äôs the function called createTaskWithAI. This function will create the task and then put it into the table.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1804s">30:04</a></td>
<td style="text-align: left;">And after that, it will use AI to determine automatic tag or a label for the task based on the task title,</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1811s">30:11</a></td>
<td style="text-align: left;">and then it will update the task with that tag. The second function is called createStripeSession,</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1818s">30:18</a></td>
<td style="text-align: left;">and we‚Äôll be using this in the profile page. So this is here, and when users click this to</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1824s">30:24</a></td>
<td style="text-align: left;">manage their subscription, this function will generate a URL for them, and this URL will</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1830s">30:30</a></td>
<td style="text-align: left;">either be a checkout session or customer portal depending on the user‚Äôs account status.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1836s">30:36</a></td>
<td style="text-align: left;">Finally, the third and the last function is our webhook endpoint for Stripe. So if you recall from the Stripe chapter, this</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1843s">30:43</a></td>
<td style="text-align: left;">is an endpoint that Stripe will use to send us event notifications when something happens.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1849s">30:49</a></td>
<td style="text-align: left;">We will use this to detect when the user should be upgraded to premium or when the subscription ends and</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1854s">30:54</a></td>
<td style="text-align: left;">they should be downgraded back to the free tier. And as I mentioned before, these functions will all have</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1860s">31:00</a></td>
<td style="text-align: left;">access to the Supabase secrets that we stored earlier. So that‚Äôs how they can access services like Stripe and OpenAI on our behalf.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1869s">31:09</a></td>
<td style="text-align: left;">From our project root, you can use these commands to deploy each of the functions to our Supabase project.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1876s">31:16</a></td>
<td style="text-align: left;">Once that‚Äôs finished, you can go back to your Supabase dashboard</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1883s">31:23</a></td>
<td style="text-align: left;">and then check them out by clicking edge functions.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1889s">31:29</a></td>
<td style="text-align: left;">And if everything worked correctly, you should see three separate edge functions being created for us.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1895s">31:35</a></td>
<td style="text-align: left;">If you click on one of them, you‚Äôll also be able to see links to metrics and logs. So this is where you can go to debug them.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1903s">31:43</a></td>
<td style="text-align: left;">Now there‚Äôs one more thing we need to do. Click on your Stripe webhook function and then</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1908s">31:48</a></td>
<td style="text-align: left;">go to details and then scroll all the way down to function configuration and then click to disable</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1915s">31:55</a></td>
<td style="text-align: left;">enforce JWT verification and click save. This verification is there to check that whoever calls</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1921s">32:01</a></td>
<td style="text-align: left;">this function is one of our authenticated users. And that‚Äôs what we want in most cases.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1928s">32:08</a></td>
<td style="text-align: left;">But in this particular case, we‚Äôre expecting Stripe to call this function. And with that, we finally finished all of our setup</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1936s">32:16</a></td>
<td style="text-align: left;">process and we‚Äôre ready to run the project. Go back to your project terminal and run this command</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1941s">32:21</a></td>
<td style="text-align: left;">to start the local development server. Once you‚Äôve run it, you should see this local URL pop</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1949s">32:29</a></td>
<td style="text-align: left;">up and you can click that to open your project. And if it doesn‚Äôt load right away, you might need</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1955s">32:35</a></td>
<td style="text-align: left;">to refresh it, but you can probably now test that each of the features work as intended.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1961s">32:41</a></td>
<td style="text-align: left;">So we can log in with Google. We can create a new task.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1972s">32:52</a></td>
<td style="text-align: left;">And when we create a task, we should see that it automatically assigns a label for us that is appropriate for the task.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1979s">32:59</a></td>
<td style="text-align: left;">We should also be able to edit a task and add images to it. And then if you go to your profile page, you should</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1988s">33:08</a></td>
<td style="text-align: left;">see that your task created is tracked properly here and that if you click manage subscription,</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=1996s">33:16</a></td>
<td style="text-align: left;">you get taken to a Stripe checkout page. And then finally go back to our project and just make sure that you can sign out.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=2004s">33:24</a></td>
<td style="text-align: left;">Now if you wanted to deploy something like this, then the easiest way to do this is probably with Vercel,</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=2010s">33:30</a></td>
<td style="text-align: left;">but this is basically just a static NextJS website. So you can use any other process that works for static websites in general.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=2017s">33:37</a></td>
<td style="text-align: left;">If you wanted to add new functionality or extend the project to do something specific, then here‚Äôs</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=2023s">33:43</a></td>
<td style="text-align: left;">a rough overview of the project structure. The UI elements are in the apps and the components folder.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=2029s">33:49</a></td>
<td style="text-align: left;">The front-end logic is in the hooks folder, so that‚Äôs the client that will connect to Supabase.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=2035s">33:55</a></td>
<td style="text-align: left;">And the backend logic is in the Supabase functions folder. And the database and configurations are in the migrations folder.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=2043s">34:03</a></td>
<td style="text-align: left;">As I was working on this project, I also actually created an integration test suite so that I can quickly</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=2049s">34:09</a></td>
<td style="text-align: left;">and more easily test the project‚Äôs functionality. You‚Äôll find all the test code in the project under</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=2055s">34:15</a></td>
<td style="text-align: left;">the test/integration directory, and these tests will actually connect to your real project.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=2061s">34:21</a></td>
<td style="text-align: left;">If you want to run them, then create a file like this to store all of your environment variables</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=2066s">34:26</a></td>
<td style="text-align: left;">that are going to be used in the task, and then update them with your version of these API keys.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=2072s">34:32</a></td>
<td style="text-align: left;">Then go to your terminal and run this command in your project root to run the entire test suite.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=2078s">34:38</a></td>
<td style="text-align: left;">You can also use this command if you want to run just a specific file.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=2085s">34:45</a></td>
<td style="text-align: left;">Now all the tests should pass, but they might fail the first time due to timeouts because I think</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=2090s">34:50</a></td>
<td style="text-align: left;">that some of these code paths have a cold start. So if you just run them for the first time, they might take a little bit slower than usual.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=2097s">34:57</a></td>
<td style="text-align: left;">So if they fail, then I recommend to try running it again and seeing if it works. So we‚Äôre now at the end of the video.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=2104s">35:04</a></td>
<td style="text-align: left;">That was quite a large project, and I hope you managed to get everything to work. But if you got stuck or if you have any questions,</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=2110s">35:10</a></td>
<td style="text-align: left;">then feel free to leave a comment either here or on my GitHub page for the project.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=2116s">35:16</a></td>
<td style="text-align: left;">Now as I said at the start, this was a very high-level overview of using Supabase.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=2122s">35:22</a></td>
<td style="text-align: left;">We went through a lot of stuff very quickly, and there‚Äôs a lot of details that I simplified along the way.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=2128s">35:28</a></td>
<td style="text-align: left;">Now if you are interested in diving a little bit deeper, then go to the project repository and check</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=2134s">35:34</a></td>
<td style="text-align: left;">out this tutorials folder where I‚Äôve actually created a bunch of different documents for each major</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=2140s">35:40</a></td>
<td style="text-align: left;">functionality that we introduced to the project. If you did enjoy this and would like to see a tutorial</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=2145s">35:45</a></td>
<td style="text-align: left;">series covering each of these features in more detail, or you want to see an end-to-end tutorial for a different type of project entirely,</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&amp;t=2152s">35:52</a></td>
<td style="text-align: left;">then please let me know in the comments. Otherwise, I hope this was useful, and I‚Äôll see you in the next one.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<!-- YR: ATTEMPT TO GET LINKS TO OPEN IN **THE SAME** NEW TAB FOR EACH LINK

I tried to get the youtube links to all open in the same new tab. This didn't
work. See the following conversation I had with claude.ai. I googled for this
issue and it seems like it might really be an issue - I didn't have time to 
look into this more. For example see this:

https://stackoverflow.com/questions/31730879/html-a-tags-with-identically-named-target-keeps-opening-new-windows


-->
<!-- YR: The following are 3 different failed attempts:

## Video Transcript (with clickable timestamps)

::: {tbl-colwidths="[15,85]"}

| Timestamp | Quote |
|:--------:|:------|
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=0s" target="youtube">0:00</a> | In this video, I'm going to walk you through how to set up a full stack SaaS application using NextJS and Supabase. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=7s" target="youtube">0:07</a> | I designed this project to be a complete overview of Supabase and an ideal starting point |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=13s" target="youtube">0:13</a> | for anyone who wants to build and launch a SaaS application as quickly as possible. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=19s" target="youtube">0:19</a> | Here's a quick demo of the finished product. It's going to be a task management application. First, you'll have to log in. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=27s" target="youtube">0:27</a> | And then on the dashboard, you can see all the tasks you've |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=32s" target="youtube">0:32</a> | created. And you can click here to create a new task. It also has a special AI feature to assign a label |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=40s" target="youtube">0:40</a> | automatically, depending on the task description. Once you've created a task, you can also click to go in |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=48s" target="youtube">0:48</a> | and edit it. You can change the label, change any of the fields, and you can also upload an image to it. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=57s" target="youtube">0:57</a> | The app also has authentication, so when you log in, you can only see your own task. And you can go to your profile |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=64s" target="youtube">1:04</a> | and you can see how many tasks you've created. There's also a monthly subscription that you |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=69s" target="youtube">1:09</a> | can use to upgrade your account. And the payments are implemented with Stripe, so if a user |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=75s" target="youtube">1:15</a> | is signed up, they can click on this page to update or to cancel their subscription. As you can see, it's quite a simple project, but it |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=83s" target="youtube">1:23</a> | uses all the fundamental building blocks that nearly every single SaaS application will need to have. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=89s" target="youtube">1:29</a> | Things like authentication, compute, and data storage. We will need to use a tech stack that will let us do all of those things. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=96s" target="youtube">1:36</a> | There's actually quite a few viable options here. I ended up going with NextJS and Supabase. I like the feature |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=102s" target="youtube">1:42</a> | set that it offers, and I think that it strikes a good balance between simplicity and capability. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=109s" target="youtube">1:49</a> | The GitHub link for this entire project will be available in the video description. You can go there |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=114s" target="youtube">1:54</a> | to browse the code or to clone the entire project. Now, this video isn't exactly a coding tutorial, because each |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=120s" target="youtube">2:00</a> | of the features here could probably be its own video. Instead, I'm going to focus on helping you understand |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=126s" target="youtube">2:06</a> | how all of the pieces fit together, and I'm going to show you how to set up this project on your own machine, so that you can |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=133s" target="youtube">2:13</a> | start building things with it right away. By the end of this video, you'll have a good understanding |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=139s" target="youtube">2:19</a> | of how Supabase works, you'll learn four of its core features, and you'll also have the |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=145s" target="youtube">2:25</a> | actual project up and running on your machine. I've prepared this video assuming that you're at |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=151s" target="youtube">2:31</a> | least a mid-level developer, and here are some of the technologies we'll be working with. If you aren't familiar with them, then I'll still |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=158s" target="youtube">2:38</a> | try to make it as accessible as I can, but it just might be a little bit hard to follow. First, let's start with a high-level overview of the whole project. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=166s" target="youtube">2:46</a> | These are the features that we want our app to have. They include task management, image attachments, automatic |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=173s" target="youtube">2:53</a> | AI labeling for our tasks, and the ability to sell premium subscription plans to our users. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=179s" target="youtube">2:59</a> | It's a pretty standard set of features for an app, but the reason I chose these is that behind |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=184s" target="youtube">3:04</a> | each of these features, there's a really important concept that I want to show you. So, having them all in one project is a great way |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=192s" target="youtube">3:12</a> | to learn how to apply all of them at once. Now, let's take a quick look at the architecture |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=198s" target="youtube">3:18</a> | for this project. Here is a simplified diagram. For the backend, we'll be using Supabase. Supabase describes itself as an open-source Firebase alternative, |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=207s" target="youtube">3:27</a> | and if you don't know what that is, you can sort of think of it as a lightweight cloud platform. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=213s" target="youtube">3:33</a> | It gives us almost everything we need for this app right out of the box and in one place. The database is going to be a PostgreSQL database, |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=221s" target="youtube">3:41</a> | and the storage system is pretty similar to something like Amazon S3 or Firestore. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=227s" target="youtube">3:47</a> | For our backend compute, we can also create edge functions using TypeScript. And there's also an inbuilt authentication system that |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=234s" target="youtube">3:54</a> | integrates really well with all of these features, but also with third-party providers like Google, OAuth. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=240s" target="youtube">4:00</a> | The front end is going to be a fully static NextJS app. You'll have a client library that will talk to Supabase directly. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=247s" target="youtube">4:07</a> | On top of that, we will also need a couple of third-party services to round out our feature set. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=253s" target="youtube">4:13</a> | We will need a Google Cloud account if we want users to be able to sign in with Google. For our backend feature, we can actually use any LLM here. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=261s" target="youtube">4:21</a> | And I'm just going to use OpenAI. And finally, we'll use Stripe for our payments system. Now, how does this all get hosted, and how much will it cost? |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=270s" target="youtube">4:30</a> | Well, you basically have a few different options with Supabase. The easiest option is to use their cloud service. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=277s" target="youtube">4:37</a> | This is really simple to set up, and it's probably the best option if you want to get started as soon as possible. It comes with a free tier, which works perfectly fine for this project. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=286s" target="youtube">4:46</a> | And in fact, that is what we'll be using. The next tier up is $25 a month, and it gives you a lot more of everything. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=293s" target="youtube">4:53</a> | That being said, Supabase is also completely open source. So another option is that you can host it yourself |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=300s" target="youtube">5:00</a> | or deploy it to a cloud provider like AWS or GCP. But I think that's going to be quite complex to manage, |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=306s" target="youtube">5:06</a> | and I don't really recommend doing that. It's just good to know that it is an option. Okay, so now that we've gone over all the high-level stuff, let's |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=314s" target="youtube">5:14</a> | look at our plan for how we're going to set up the project. We will need to set up five separate things to get this all working. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=320s" target="youtube">5:20</a> | We'll start by just downloading the code from GitHub and then creating a project on the Supabase cloud. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=326s" target="youtube">5:26</a> | Then we'll go and set up the rest of the dependencies first. Google OAuth, OpenAI, and Stripe. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=332s" target="youtube">5:32</a> | And then we'll have all the API keys we need to go back to our project and actually finish setting it up. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=338s" target="youtube">5:38</a> | Here's a checklist of the steps that we are going to take. And throughout this video, we'll go down the |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=343s" target="youtube">5:43</a> | list and we'll tick them off one by one. Let's start off by cloning the project. By the way, all the links you need for this video |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=349s" target="youtube">5:49</a> | are going to be in the video description. Once you've cloned the project, open the project in your terminal and run npm install. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=356s" target="youtube">5:56</a> | This should finish successfully, but there might be a few |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=361s" target="youtube">6:01</a> | warnings because things are always getting deprecated. We will also need to create two local .env |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=369s" target="youtube">6:09</a> | files to store our environment variables. I've actually created an example.env file for you here. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=376s" target="youtube">6:16</a> | So if you're on a Unix system, you can just run this command to create copies from that. And if you open the project in VSCode, you'll be able to see them here. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=389s" target="youtube">6:29</a> | So here is the example file, and here are the two files I've just created. And they have to be named exactly this way because that's |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=397s" target="youtube">6:37</a> | where our project is going to be looking for them. Now here are some of the environment variables that we'll need to fill in. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=403s" target="youtube">6:43</a> | We'll come back to this later once we actually have them. That's all the setup we have to do for our project code at the moment. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=410s" target="youtube">6:50</a> | But if you try to run it now, it won't work because we haven't set up any of the backend yet. But if you do want to see the front end of the project |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=418s" target="youtube">6:58</a> | on its own and play around with it, then I actually have an earlier commit where it's just |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=424s" target="youtube">7:04</a> | using placeholders for all of the backend logic. So if you go to the GitHub repo and click on the commits |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=430s" target="youtube">7:10</a> | tab, you can scroll down all the way to the bottom. And there's this commit here that says front end boilerplate. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=438s" target="youtube">7:18</a> | So you can copy this commit hash, and then you can run this command in your project folder to check out that specific commit. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=447s" target="youtube">7:27</a> | So if you use that command to roll it back to that commit, you should be able to run npm run dev, |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=453s" target="youtube">7:33</a> | and it'll start a local version of the site. And this will run a version of the site where you just have the |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=459s" target="youtube">7:39</a> | front end and all of the backend integration is stripped out. You can still click around and play around with the UI, but it won't do anything. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=467s" target="youtube">7:47</a> | And you'll find that any of the buttons or the interactions will basically just console log a to-do statement for it to be implemented. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=474s" target="youtube">7:54</a> | But now, back to this project, we will want to use the latest commit. So if you did check out the older commit, then |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=480s" target="youtube">8:00</a> | please use this command to revert it back. Let's move on to the next step, which is to create an actual Supabase project. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=486s" target="youtube">8:06</a> | Go to Supabase.com and create or log in with your account. In your dashboard, click create new project. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=495s" target="youtube">8:15</a> | You might also have to create an organization first, but I already have one here. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=501s" target="youtube">8:21</a> | Fill in your project name and generate a secure password for your database. You'll also want to copy the database password |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=508s" target="youtube">8:28</a> | as well, because you're going to need it later when we set up the Supabase CLI. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=514s" target="youtube">8:34</a> | And finally, choose a region that's close to you or your customers. Then go ahead and create the project. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=522s" target="youtube">8:42</a> | This will take a few minutes to set up, but while you wait, it does show you your API keys and some important |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=528s" target="youtube">8:48</a> | information that we will need in the next step. Or if your project already finished setting |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=533s" target="youtube">8:53</a> | up, then it will look something like this. On the toolbar on the left, go over to project settings. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=540s" target="youtube">9:00</a> | You'll find some really useful things on this page. For example, you can look at what compute your project is configured to use. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=547s" target="youtube">9:07</a> | You can also check out how much storage disk you're using up already. And also extra options like adding custom domain names. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=556s" target="youtube">9:16</a> | But for now, what we need is under this API configuration tab. Here you'll find the project URL and two API keys. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=566s" target="youtube">9:26</a> | One is a public key, so this is for the Supabase client. This one is okay to be revealed, because this is the one that's |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=573s" target="youtube">9:33</a> | usually embedded with the front end client anyways. It's going to be what your website uses to call the Supabase backend. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=581s" target="youtube">9:41</a> | The other one is a secret key. This is useful for doing backend server-side operations. This one you definitely do not want to reveal. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=589s" target="youtube">9:49</a> | So now we're going to copy the URL and the public key back to our project. And then back in your project, go to your .env.local |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=597s" target="youtube">9:57</a> | file, or create one if you didn't do it already. And we'll only need these two things, we actually don't |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=602s" target="youtube">10:02</a> | need these other keys, so we can delete those. And go ahead and paste your project URL and your public key. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=610s" target="youtube">10:10</a> | Now to work with Supabase from our local environment, we're going to want to use the Supabase CLI. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=616s" target="youtube">10:16</a> | So just search for Supabase CLI on Google, and you should see the official documentation pop up. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=622s" target="youtube">10:22</a> | Then scroll down and follow the instructions for your specific platform to install the CLI. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=629s" target="youtube">10:29</a> | Then you can verify the installation using this command. For this video I'm using Supabase version 2, so if you're |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=635s" target="youtube">10:35</a> | using a different major version, then keep in mind that some of the CLI commands may be different. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=641s" target="youtube">10:41</a> | Now back in our development environment, you'd normally have to run this command to initialize Supabase |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=646s" target="youtube">10:46</a> | to add it to a project that doesn't have it yet. But for our project, I actually initialized Supabase |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=651s" target="youtube">10:51</a> | earlier, and you can tell because there's a Supabase folder with a config file. So we don't have to run the command again for this one. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=659s" target="youtube">10:59</a> | We will need to run this command to link your local project with the remote Supabase project. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=665s" target="youtube">11:05</a> | Don't forget to replace the PROJECT REF variable with your own one. Your project reference is basically the random ID part of your URL. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=674s" target="youtube">11:14</a> | When you run this command, it's going to ask you to enter |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=679s" target="youtube">11:19</a> | your database password from when you created the project. So go ahead and do that as well. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=687s" target="youtube">11:27</a> | Now that should work successfully, but it might throw a warning about the local config being different from the linked project. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=694s" target="youtube">11:34</a> | But I wouldn't worry about that for now. Then to test if everything is set up correctly, you can run this command. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=700s" target="youtube">11:40</a> | You should see a list of projects, and you should also see a dot next to the one that is linked. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=707s" target="youtube">11:47</a> | Alright, so at this point we've downloaded the project code, and we've set up the Supabase project itself. Let's move on to the next step. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=714s" target="youtube">11:54</a> | Next, we're going to set up Google Cloud so that we can let our users log in with a Google account. Supabase actually has a lot of different options |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=721s" target="youtube">12:01</a> | for signing in, but I prefer to just use a third party integration like Google, because it's |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=727s" target="youtube">12:07</a> | both easier for us to maintain, and it's also easier for our customers as well, because they |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=732s" target="youtube">12:12</a> | don't have to sign up for a separate account. First, head over to the Google Cloud console, and then either |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=738s" target="youtube">12:18</a> | log in or create an account if you don't already have one. And if this is your first time using Google Cloud, |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=745s" target="youtube">12:25</a> | you will also have to create a new project. So I've created a project here for this SaaS application. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=752s" target="youtube">12:32</a> | Now you might also need to attach a credit card to this account, but the OAuth pricing |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=757s" target="youtube">12:37</a> | is free for up to 50,000 monthly active users, so you probably won't get charged. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=763s" target="youtube">12:43</a> | So once you're on this page, go to the search bar at the top and type in "Credentials", and |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=768s" target="youtube">12:48</a> | select "Credentials" from "API and Services". Now on this page, click here to create credentials, and select "OAuth client ID". |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=778s" target="youtube">12:58</a> | For the application type, choose "web application", and then type in a name for it here. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=785s" target="youtube">13:05</a> | Now we also have to add the authorized JavaScript origins and the authorized redirect URIs. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=793s" target="youtube">13:13</a> | For the authorized origin, put your Supabase project URL, and you can also put localhost so that |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=798s" target="youtube">13:18</a> | we can test it from our development environment. And for the redirect, put in this URL. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=804s" target="youtube">13:24</a> | This is actually provided to us by Supabase. If you go to authentication, then to providers, |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=810s" target="youtube">13:30</a> | and then expand the Google tab, you will see the callback URL here for us to copy. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=816s" target="youtube">13:36</a> | So let's go back to the project and put that in. So now your settings should look something like this, |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=822s" target="youtube">13:42</a> | and then you can go ahead and click "create". And when that's done, you should see this little pop-up |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=828s" target="youtube">13:48</a> | with your client ID and your client secret. So go back to your Supabase dashboard, go to authentication, |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=836s" target="youtube">13:56</a> | and then providers, and then open the Google tab, and enable "sign in for Google". |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=843s" target="youtube">14:03</a> | And then just paste the client ID and the secret from the previous step, and click "save". |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=849s" target="youtube">14:09</a> | While we're here, you can also check out all the other authentication providers available, in case you want to use them. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=856s" target="youtube">14:16</a> | And just an interesting note, I've also enabled email as a provider, and I think that's the default for a new Supabase project anyways. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=863s" target="youtube">14:23</a> | But for testing purposes, I actually disabled this "confirm email" feature, because it |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=868s" target="youtube">14:28</a> | makes it easier for me to create test users. Okay, so now you're done with auth, and your Supabase project |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=874s" target="youtube">14:34</a> | should be wired up to let users log in with Google. Next, we're also going to need an OpenAI API key. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=881s" target="youtube">14:41</a> | We're going to be using this for our back-end feature, where we automatically assign |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=886s" target="youtube">14:46</a> | labels to a task, based on its description. Now, this API is pay-per-use, but the pricing is quite |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=893s" target="youtube">14:53</a> | cheap, and our usage is going to be very low. If you don't have an OpenAI account, then go to platform.OpenAI.com to create it. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=902s" target="youtube">15:02</a> | Log into your account, and then open the search bar, and search for "API keys". |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=908s" target="youtube">15:08</a> | And then you can click up here to create a new API key for your project. So go ahead and create that, and then copy the secret key. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=915s" target="youtube">15:15</a> | Then, back in your project terminal, run the Supabase-cli command to set the OpenAI key as a back-end secret. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=923s" target="youtube">15:23</a> | The project will be using this later on in our server-side edge functions. The final dependency we need for this project is Stripe, and we're |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=933s" target="youtube">15:33</a> | going to use this to process payments for our customers. So, back in our app, we limit users to only creating 100 tasks per month. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=943s" target="youtube">15:43</a> | And when they upgrade to Premium, the limit gets raised to 10,000. Now, this is probably not the best business model |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=950s" target="youtube">15:50</a> | for this app, but the point is just to show you how to implement this at a technical level. Compared to our other dependencies, Stripe is a little bit more complex to set up. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=960s" target="youtube">16:00</a> | But I'm going to try to keep this as simple as possible. There are three main steps we need to go through. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=966s" target="youtube">16:06</a> | First, we want to create an account and set up the Stripe CLI. And then we'll have to create a product, which |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=971s" target="youtube">16:11</a> | is basically the subscription for our app. And finally, we'll need to set up webhooks so that |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=977s" target="youtube">16:17</a> | Stripe can tell our Supabase server whenever there's an update with our customers' payments. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=983s" target="youtube">16:23</a> | If you don't have a Stripe account yet, then go to stripe.com and create one. Once you're signed in, you should be on this dashboard. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=991s" target="youtube">16:31</a> | Just go to the top and make sure that you enable test mode. This will basically let us test the whole integration |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=998s" target="youtube">16:38</a> | without using real money or credit cards. Our Stripe account will also have a secret API key. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1005s" target="youtube">16:45</a> | So to find it, just go into the search box and type in "API key" and then go to "developers |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1010s" target="youtube">16:50</a> | API key." And take note of the secret key here, because we're going to need this for later. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1016s" target="youtube">16:56</a> | Next, we'll need to install the Stripe CLI. So just search for Stripe CLI on Google and it |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1021s" target="youtube">17:01</a> | should link you to the official documentation. And if you scroll down, you'll see different tabs depending |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1027s" target="youtube">17:07</a> | on which platform you want to see the command for. Once you've installed it, then run this command in |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1032s" target="youtube">17:12</a> | your terminal to log in with your Stripe account. Next, let's use the Stripe CLI to create a new product and a price. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1040s" target="youtube">17:20</a> | In Stripe, products and prices are two distinct object types. And a product can have multiple different prices, but |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1048s" target="youtube">17:28</a> | every price must be associated with a product. Now, to create the products and the prices, we can go to our Stripe |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1055s" target="youtube">17:35</a> | dashboard and then click to create them through there. But we can also do it with a command in the CLI, which is a little bit faster. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1065s" target="youtube">17:45</a> | So that's what I'm going to do for this project. So if you go back to the project and then you open the README file, scroll all the way down until |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1071s" target="youtube">17:51</a> | you see the part that says Stripe setup. And there's a couple of commands that you can just copy and paste into your terminal |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1079s" target="youtube">17:59</a> | to create the product via the CLI directly. This command will create both a price and a product for us together. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1086s" target="youtube">18:06</a> | It creates a $10 monthly subscription for a new product called Taskmaster Premium with a 14-day trial. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1094s" target="youtube">18:14</a> | So go ahead and run that in your project terminal. And when it's done, you should see an output object like this. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1102s" target="youtube">18:22</a> | And we're going to want to take note of the price ID because we will need that for later. Next, we'll also need to run another command to set up the customer portal. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1112s" target="youtube">18:32</a> | This is going to set up a page that customers can go to to either update or cancel their subscriptions. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1119s" target="youtube">18:39</a> | Just make sure that before you run this command to replace the URLs with your own Supabase URLs. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1125s" target="youtube">18:45</a> | And in this project, I actually haven't created the privacy or the terms of service pages. So these links will probably just bounce back to the homepage. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1134s" target="youtube">18:54</a> | So that's something you can add if you want. And to finish our Stripe setup, we will need to add a webhook. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1143s" target="youtube">19:03</a> | A webhook is a URL endpoint that we provide that Stripe can send events and notifications to. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1149s" target="youtube">19:09</a> | And it will use this to tell us about things like successful checkouts and subscription cancellations. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1155s" target="youtube">19:15</a> | And then we'll use that information to update our database. So go back to your Stripe dashboard and then search for webhooks. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1163s" target="youtube">19:23</a> | And then go to Developers / Webhooks. And here, click add endpoint. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1169s" target="youtube">19:29</a> | Our webhook endpoint is going to look something like this. We will implement this later as an edge function. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1175s" target="youtube">19:35</a> | Just make sure to update the project ID to your actual Supabase project URL. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1181s" target="youtube">19:41</a> | And then enter it here as your endpoint. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1187s" target="youtube">19:47</a> | Next, you have to select which events for it to listen to. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1193s" target="youtube">19:53</a> | These are the four events that you need to select. These events will give us everything we need to build the |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1204s" target="youtube">20:04</a> | subscription functionality that we want for our app. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1212s" target="youtube">20:12</a> | Once you've filled in the endpoint and the events, then click add endpoint. And now your webhook will be set up and you can |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1220s" target="youtube">20:20</a> | click here to get your webhook secret key. So now we should have all the keys we need to integrate Stripe with our project. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1228s" target="youtube">20:28</a> | If you missed one of them, then just rewind this chapter. And again, here's the Supabase CLI command you need to |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1234s" target="youtube">20:34</a> | run to set up the secrets in the Supabase project. So go ahead and run these for each of the keys. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1241s" target="youtube">20:41</a> | We're going to need the Stripe API secret key, the price ID and the webhook secret. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1247s" target="youtube">20:47</a> | So back in my terminal, I've set up all three keys. And to confirm that I can run Supabase secrets list. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1256s" target="youtube">20:56</a> | And that will show me all the different secrets that I've registered with my Supabase project. So at this point, you should see four of them. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1264s" target="youtube">21:04</a> | Now there's actually one more place where we need to set up our Stripe secret key. And that's going to be in our vault table in the database. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1272s" target="youtube">21:12</a> | And this is an inbuilt Supabase table where we can store secret keys that our database can use as part of automatic triggers. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1280s" target="youtube">21:20</a> | In this project specifically, I'm using it so that I can make Stripe create a user for |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1286s" target="youtube">21:26</a> | us whenever we create a user in Supabase. Because there are different user systems, but we want them to be associated. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1293s" target="youtube">21:33</a> | We're going to implement that using a database trigger. But to do that, it will need to have the stripe secret |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1298s" target="youtube">21:38</a> | key so that it has the authority to create new users. To add this, go back to your Supabase dashboard and then go to SQL editor. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1306s" target="youtube">21:46</a> | And that in this window, we're going to run this command. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1312s" target="youtube">21:52</a> | Just remember to replace this with your actual secret key from Stripe. And then click run and then you should see that it should |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1320s" target="youtube">22:00</a> | create this key for you and return a key ID. And if you've accidentally added the wrong |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1326s" target="youtube">22:06</a> | secret or you just want to update it, then you'll need to use this command instead. So now that we're done setting up our dependencies, let's go |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1334s" target="youtube">22:14</a> | back to our Supabase project and set up our database next. Our database is going to be a Postgres SQL database |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1341s" target="youtube">22:21</a> | and we're going to create three tables. We'll have a profile table for each user. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1348s" target="youtube">22:28</a> | There we will store information about their account status. Now this is going to be read only for the user. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1355s" target="youtube">22:35</a> | It's also going to be linked to an auth table, which comes out of the box with Supabase. This means that our user ID primary key in |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1363s" target="youtube">22:43</a> | this profile table is going to map directly to a user ID in the auth table as well. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1370s" target="youtube">22:50</a> | And you're going to see this pattern where we use a primary key for the user as a foreign key in each of our tables. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1378s" target="youtube">22:58</a> | Now our most important table is going to be this task table here. We will store each task as a row and it will have a user ID as part of its key. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1389s" target="youtube">23:09</a> | And finally, we'll also have a separate table to track the usage of each user per month. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1395s" target="youtube">23:15</a> | And the reason I decided to use a separate table to track the usage is that I think it will |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1401s" target="youtube">23:21</a> | be easier to scale that way, rather than tracking it in the user profile table directly. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1407s" target="youtube">23:27</a> | So this is going to be the schema for the database. But on top of this, we will also have security policies and triggers. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1415s" target="youtube">23:35</a> | We're going to use something called row level security. That basically means that to be able to read or update a |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1422s" target="youtube">23:42</a> | row of a database, certain conditions have to be met. For example, we can check if the user ID of a request matches |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1430s" target="youtube">23:50</a> | the user ID value of the row that we want to access. And then we use row level security to enforce these roles for our app. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1440s" target="youtube">24:00</a> | And we're also going to have something called triggers. Triggers are functions that we can execute when |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1445s" target="youtube">24:05</a> | something happens inside our database. And these functions are run by our dedicated PostgreSQL server. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1452s" target="youtube">24:12</a> | In this project, we will use them quite a lot. We'll use triggers to update task limits for each user whenever they create a task. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1460s" target="youtube">24:20</a> | We can also stop them from creating new tasks once they've reached their limit. We'll also use it to automatically create a Stripe |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1468s" target="youtube">24:28</a> | user whenever a new user is created in our system. That's because, as I mentioned before, Stripe has its own user system. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1476s" target="youtube">24:36</a> | So we need some automation to link them together. And finally, we can also use it to automatically clean up our |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1482s" target="youtube">24:42</a> | users and our storage when things are deleted as well. Now, that's a lot of stuff I just went through. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1488s" target="youtube">24:48</a> | So how are we going to implement all of that very quickly? Well, with Supabase, we can write instructions |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1494s" target="youtube">24:54</a> | for all of those things using SQL files. And if we go back to our project and then we |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1499s" target="youtube">24:59</a> | go to the Supabase migrations folder, you'll see that we have a bunch of SQL files for each of these things that we want to add. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1506s" target="youtube">25:06</a> | And if you click through them, you could see the statements used to create the tables. So here's the table schema. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1513s" target="youtube">25:13</a> | And you can also see triggers being created and security policies being created. And the reason I've separated each of these statements |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1521s" target="youtube">25:21</a> | into separate files is just to make it easier for you to understand each new thing that we're setting up. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1528s" target="youtube">25:28</a> | It's exactly the same as if I had all of these statements in one giant file, but that's just going |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1533s" target="youtube">25:33</a> | to be a little bit more difficult to read. To apply these files to a project, you can run this command. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1540s" target="youtube">25:40</a> | This is called apply a migration. It will execute all of the SQL statements in each file in lexical order. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1548s" target="youtube">25:48</a> | And so if you go back to our project, you'll see that each of our SQL files has a number in front of it. And so basically that's the order that I want to run the files in. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1556s" target="youtube">25:56</a> | But in a real world situation, I think that people would typically use a timestamp for this number. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1562s" target="youtube">26:02</a> | So I'm going to go ahead and run this now in my terminal. And once the command is done, Supabase will have |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1568s" target="youtube">26:08</a> | created all the databases, triggers, and security policies that we told it to in those SQL files. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1576s" target="youtube">26:16</a> | Now notice if I try to run the command again, it doesn't actually |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1581s" target="youtube">26:21</a> | do anything, even if I change the contents of these files. That's because these commands, once they apply a migration file, |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1590s" target="youtube">26:30</a> | it kind of remembers that it's already done that file. So if you want to create new migrations, you actually |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1597s" target="youtube">26:37</a> | have to create a new file and just make that number in front of it keep increasing. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1603s" target="youtube">26:43</a> | But if the project is still in development like this one here, and you wanted to do a full reset, you can run this command instead. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1610s" target="youtube">26:50</a> | This will clear your entire database and then run every SQL file from the beginning. And once you finish running your migration, you can |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1616s" target="youtube">26:56</a> | go to your Supabase project to check it out. So go to database and then go to schema visualizer, and you should |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1622s" target="youtube">27:02</a> | see the schema for the database that you just created. And something very cool that I want to mention about Supabase |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1629s" target="youtube">27:09</a> | is that it automatically creates an API for your database. So you can do CRUD operations from your front end really |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1636s" target="youtube">27:16</a> | easily without having to implement the API yourself. You can read more about that feature inside the REST API |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1643s" target="youtube">27:23</a> | or the Data API documentation on the Supabase website. Now back to the app, one of my favorite features here |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1650s" target="youtube">27:30</a> | is that users can upload images to their tasks. To implement this, we're going to use Supabase's storage feature. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1657s" target="youtube">27:37</a> | And I have some good news for you. If you ran the previous command, then you've already set this up. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1663s" target="youtube">27:43</a> | One of our SQL files from the previous step actually creates something called a storage bucket. It did that by creating an entry in this built-in storage buckets table. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1673s" target="youtube">27:53</a> | And behind the scenes, that actually causes Supabase to set up a storage bucket for us. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1679s" target="youtube">27:59</a> | So if you go back to your Supabase dashboard and then you go down and click storage, you'll see that it's created a bucket for us here. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1686s" target="youtube">28:06</a> | And the bucket doesn't have anything in it right now. But if you go here and click edit bucket and click on |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1692s" target="youtube">28:12</a> | additional configuration, you'll see that we've actually configured the bucket already from our SQL schema. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1698s" target="youtube">28:18</a> | We've configured it to restrict the upload size to one megabyte, and we've also configured it to only accept images. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1705s" target="youtube">28:25</a> | Now I do want to mention that I did make this bucket public, which means that if people have the URL to an |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1711s" target="youtube">28:31</a> | image, they can actually just go ahead and see it. And I did that because it's more simple to set it up with the front end. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1719s" target="youtube">28:39</a> | But if you were doing this for real, then I probably recommend making this private. It's just that it's a little bit more complex to set up. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1726s" target="youtube">28:46</a> | So it's a little bit out of scope for this video. So now we've set up the database and the storage, |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1731s" target="youtube">28:51</a> | and we're moving on to the final setup step, which is deploying our edge functions. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1737s" target="youtube">28:57</a> | Edge functions are custom functions that run on demand in response to HTTP requests. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1743s" target="youtube">29:03</a> | Think of them as a way to run any code that you'd normally need a server for. In our project, you'll find them in the Supabase/functions folder. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1751s" target="youtube">29:11</a> | Each subfolder is an edge function. The code is implemented as a TypeScript function, |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1756s" target="youtube">29:16</a> | and it will be run in a Deno environment. So here, I'm just going to go back to the project to show you where they are. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1763s" target="youtube">29:23</a> | Go to your Supabase folder, and then go to your functions folder. And then each of the functions is going to be its own separate subfolder. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1770s" target="youtube">29:30</a> | If you open that up, you'll see this index.ts file, and that is the code for one of our functions. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1777s" target="youtube">29:37</a> | Now, we will be able to build and deploy these functions directly from our project using the Supabase CLI. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1785s" target="youtube">29:45</a> | They also support environment variables, which is where we can go and fetch those secrets that we |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1791s" target="youtube">29:51</a> | stored earlier when we set up our dependencies. Here's a short snippet from one of our functions, |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1797s" target="youtube">29:57</a> | and it's the function called createTaskWithAI. This function will create the task and then put it into the table. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1804s" target="youtube">30:04</a> | And after that, it will use AI to determine automatic tag or a label for the task based on the task title, |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1811s" target="youtube">30:11</a> | and then it will update the task with that tag. The second function is called createStripeSession, |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1818s" target="youtube">30:18</a> | and we'll be using this in the profile page. So this is here, and when users click this to |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1824s" target="youtube">30:24</a> | manage their subscription, this function will generate a URL for them, and this URL will |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1830s" target="youtube">30:30</a> | either be a checkout session or customer portal depending on the user's account status. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1836s" target="youtube">30:36</a> | Finally, the third and the last function is our webhook endpoint for Stripe. So if you recall from the Stripe chapter, this |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1843s" target="youtube">30:43</a> | is an endpoint that Stripe will use to send us event notifications when something happens. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1849s" target="youtube">30:49</a> | We will use this to detect when the user should be upgraded to premium or when the subscription ends and |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1854s" target="youtube">30:54</a> | they should be downgraded back to the free tier. And as I mentioned before, these functions will all have |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1860s" target="youtube">31:00</a> | access to the Supabase secrets that we stored earlier. So that's how they can access services like Stripe and OpenAI on our behalf. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1869s" target="youtube">31:09</a> | From our project root, you can use these commands to deploy each of the functions to our Supabase project. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1876s" target="youtube">31:16</a> | Once that's finished, you can go back to your Supabase dashboard |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1883s" target="youtube">31:23</a> | and then check them out by clicking edge functions. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1889s" target="youtube">31:29</a> | And if everything worked correctly, you should see three separate edge functions being created for us. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1895s" target="youtube">31:35</a> | If you click on one of them, you'll also be able to see links to metrics and logs. So this is where you can go to debug them. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1903s" target="youtube">31:43</a> | Now there's one more thing we need to do. Click on your Stripe webhook function and then |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1908s" target="youtube">31:48</a> | go to details and then scroll all the way down to function configuration and then click to disable |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1915s" target="youtube">31:55</a> | enforce JWT verification and click save. This verification is there to check that whoever calls |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1921s" target="youtube">32:01</a> | this function is one of our authenticated users. And that's what we want in most cases. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1928s" target="youtube">32:08</a> | But in this particular case, we're expecting Stripe to call this function. And with that, we finally finished all of our setup |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1936s" target="youtube">32:16</a> | process and we're ready to run the project. Go back to your project terminal and run this command |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1941s" target="youtube">32:21</a> | to start the local development server. Once you've run it, you should see this local URL pop |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1949s" target="youtube">32:29</a> | up and you can click that to open your project. And if it doesn't load right away, you might need |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1955s" target="youtube">32:35</a> | to refresh it, but you can probably now test that each of the features work as intended. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1961s" target="youtube">32:41</a> | So we can log in with Google. We can create a new task. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1972s" target="youtube">32:52</a> | And when we create a task, we should see that it automatically assigns a label for us that is appropriate for the task. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1979s" target="youtube">32:59</a> | We should also be able to edit a task and add images to it. And then if you go to your profile page, you should |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1988s" target="youtube">33:08</a> | see that your task created is tracked properly here and that if you click manage subscription, |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1996s" target="youtube">33:16</a> | you get taken to a Stripe checkout page. And then finally go back to our project and just make sure that you can sign out. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2004s" target="youtube">33:24</a> | Now if you wanted to deploy something like this, then the easiest way to do this is probably with Vercel, |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2010s" target="youtube">33:30</a> | but this is basically just a static NextJS website. So you can use any other process that works for static websites in general. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2017s" target="youtube">33:37</a> | If you wanted to add new functionality or extend the project to do something specific, then here's |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2023s" target="youtube">33:43</a> | a rough overview of the project structure. The UI elements are in the apps and the components folder. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2029s" target="youtube">33:49</a> | The front-end logic is in the hooks folder, so that's the client that will connect to Supabase. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2035s" target="youtube">33:55</a> | And the backend logic is in the Supabase functions folder. And the database and configurations are in the migrations folder. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2043s" target="youtube">34:03</a> | As I was working on this project, I also actually created an integration test suite so that I can quickly |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2049s" target="youtube">34:09</a> | and more easily test the project's functionality. You'll find all the test code in the project under |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2055s" target="youtube">34:15</a> | the test/integration directory, and these tests will actually connect to your real project. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2061s" target="youtube">34:21</a> | If you want to run them, then create a file like this to store all of your environment variables |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2066s" target="youtube">34:26</a> | that are going to be used in the task, and then update them with your version of these API keys. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2072s" target="youtube">34:32</a> | Then go to your terminal and run this command in your project root to run the entire test suite. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2078s" target="youtube">34:38</a> | You can also use this command if you want to run just a specific file. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2085s" target="youtube">34:45</a> | Now all the tests should pass, but they might fail the first time due to timeouts because I think |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2090s" target="youtube">34:50</a> | that some of these code paths have a cold start. So if you just run them for the first time, they might take a little bit slower than usual. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2097s" target="youtube">34:57</a> | So if they fail, then I recommend to try running it again and seeing if it works. So we're now at the end of the video. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2104s" target="youtube">35:04</a> | That was quite a large project, and I hope you managed to get everything to work. But if you got stuck or if you have any questions, |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2110s" target="youtube">35:10</a> | then feel free to leave a comment either here or on my GitHub page for the project. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2116s" target="youtube">35:16</a> | Now as I said at the start, this was a very high-level overview of using Supabase. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2122s" target="youtube">35:22</a> | We went through a lot of stuff very quickly, and there's a lot of details that I simplified along the way. |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2128s" target="youtube">35:28</a> | Now if you are interested in diving a little bit deeper, then go to the project repository and check |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2134s" target="youtube">35:34</a> | out this tutorials folder where I've actually created a bunch of different documents for each major |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2140s" target="youtube">35:40</a> | functionality that we introduced to the project. If you did enjoy this and would like to see a tutorial |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2145s" target="youtube">35:45</a> | series covering each of these features in more detail, or you want to see an end-to-end tutorial for a different type of project entirely, |
| <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2152s" target="youtube">35:52</a> | then please let me know in the comments. Otherwise, I hope this was useful, and I'll see you in the next one. |
:::

## Video Transcript (with clickable timestamps)

::: {tbl-colwidths="[15,85]"}

| Timestamp | Quote |
|:--------:|:------|
| [0:00](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=0s){target="youtube"} | In this video, I'm going to walk you through how to set up a full stack SaaS application using NextJS and Supabase. |
| [0:07](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=7s){target="youtube"} | I designed this project to be a complete overview of Supabase and an ideal starting point |
| [0:13](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=13s){target="youtube"} | for anyone who wants to build and launch a SaaS application as quickly as possible. |
| [0:19](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=19s){target="youtube"} | Here's a quick demo of the finished product. It's going to be a task management application. First, you'll have to log in. |
| [0:27](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=27s){target="youtube"} | And then on the dashboard, you can see all the tasks you've |
| [0:32](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=32s){target="youtube"} | created. And you can click here to create a new task. It also has a special AI feature to assign a label |
| [0:40](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=40s){target="youtube"} | automatically, depending on the task description. Once you've created a task, you can also click to go in |
| [0:48](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=48s){target="youtube"} | and edit it. You can change the label, change any of the fields, and you can also upload an image to it. |
| [0:57](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=57s){target="youtube"} | The app also has authentication, so when you log in, you can only see your own task. And you can go to your profile |
| [1:04](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=64s){target="youtube"} | and you can see how many tasks you've created. There's also a monthly subscription that you |
| [1:09](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=69s){target="youtube"} | can use to upgrade your account. And the payments are implemented with Stripe, so if a user |
| [1:15](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=75s){target="youtube"} | is signed up, they can click on this page to update or to cancel their subscription. As you can see, it's quite a simple project, but it |
| [1:23](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=83s){target="youtube"} | uses all the fundamental building blocks that nearly every single SaaS application will need to have. |
| [1:29](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=89s){target="youtube"} | Things like authentication, compute, and data storage. We will need to use a tech stack that will let us do all of those things. |
| [1:36](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=96s){target="youtube"} | There's actually quite a few viable options here. I ended up going with NextJS and Supabase. I like the feature |
| [1:42](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=102s){target="youtube"} | set that it offers, and I think that it strikes a good balance between simplicity and capability. |
| [1:49](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=109s){target="youtube"} | The GitHub link for this entire project will be available in the video description. You can go there |
| [1:54](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=114s){target="youtube"} | to browse the code or to clone the entire project. Now, this video isn't exactly a coding tutorial, because each |
| [2:00](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=120s){target="youtube"} | of the features here could probably be its own video. Instead, I'm going to focus on helping you understand |
| [2:06](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=126s){target="youtube"} | how all of the pieces fit together, and I'm going to show you how to set up this project on your own machine, so that you can |
| [2:13](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=133s){target="youtube"} | start building things with it right away. By the end of this video, you'll have a good understanding |
| [2:19](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=139s){target="youtube"} | of how Supabase works, you'll learn four of its core features, and you'll also have the |
| [2:25](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=145s){target="youtube"} | actual project up and running on your machine. I've prepared this video assuming that you're at |
| [2:31](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=151s){target="youtube"} | least a mid-level developer, and here are some of the technologies we'll be working with. If you aren't familiar with them, then I'll still |
| [2:38](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=158s){target="youtube"} | try to make it as accessible as I can, but it just might be a little bit hard to follow. First, let's start with a high-level overview of the whole project. |
| [2:46](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=166s){target="youtube"} | These are the features that we want our app to have. They include task management, image attachments, automatic |
| [2:53](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=173s){target="youtube"} | AI labeling for our tasks, and the ability to sell premium subscription plans to our users. |
| [2:59](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=179s){target="youtube"} | It's a pretty standard set of features for an app, but the reason I chose these is that behind |
| [3:04](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=184s){target="youtube"} | each of these features, there's a really important concept that I want to show you. So, having them all in one project is a great way |
| [3:12](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=192s){target="youtube"} | to learn how to apply all of them at once. Now, let's take a quick look at the architecture |
| [3:18](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=198s){target="youtube"} | for this project. Here is a simplified diagram. For the backend, we'll be using Supabase. Supabase describes itself as an open-source Firebase alternative, |
| [3:27](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=207s){target="youtube"} | and if you don't know what that is, you can sort of think of it as a lightweight cloud platform. |
| [3:33](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=213s){target="youtube"} | It gives us almost everything we need for this app right out of the box and in one place. The database is going to be a PostgreSQL database, |
| [3:41](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=221s){target="youtube"} | and the storage system is pretty similar to something like Amazon S3 or Firestore. |
| [3:47](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=227s){target="youtube"} | For our backend compute, we can also create edge functions using TypeScript. And there's also an inbuilt authentication system that |
| [3:54](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=234s){target="youtube"} | integrates really well with all of these features, but also with third-party providers like Google, OAuth. |
| [4:00](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=240s){target="youtube"} | The front end is going to be a fully static NextJS app. You'll have a client library that will talk to Supabase directly. |
| [4:07](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=247s){target="youtube"} | On top of that, we will also need a couple of third-party services to round out our feature set. |
| [4:13](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=253s){target="youtube"} | We will need a Google Cloud account if we want users to be able to sign in with Google. For our backend feature, we can actually use any LLM here. |
| [4:21](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=261s){target="youtube"} | And I'm just going to use OpenAI. And finally, we'll use Stripe for our payments system. Now, how does this all get hosted, and how much will it cost? |
| [4:30](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=270s){target="youtube"} | Well, you basically have a few different options with Supabase. The easiest option is to use their cloud service. |
| [4:37](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=277s){target="youtube"} | This is really simple to set up, and it's probably the best option if you want to get started as soon as possible. It comes with a free tier, which works perfectly fine for this project. |
| [4:46](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=286s){target="youtube"} | And in fact, that is what we'll be using. The next tier up is $25 a month, and it gives you a lot more of everything. |
| [4:53](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=293s){target="youtube"} | That being said, Supabase is also completely open source. So another option is that you can host it yourself |
| [5:00](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=300s){target="youtube"} | or deploy it to a cloud provider like AWS or GCP. But I think that's going to be quite complex to manage, |
| [5:06](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=306s){target="youtube"} | and I don't really recommend doing that. It's just good to know that it is an option. Okay, so now that we've gone over all the high-level stuff, let's |
| [5:14](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=314s){target="youtube"} | look at our plan for how we're going to set up the project. We will need to set up five separate things to get this all working. |
| [5:20](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=320s){target="youtube"} | We'll start by just downloading the code from GitHub and then creating a project on the Supabase cloud. |
| [5:26](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=326s){target="youtube"} | Then we'll go and set up the rest of the dependencies first. Google OAuth, OpenAI, and Stripe. |
| [5:32](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=332s){target="youtube"} | And then we'll have all the API keys we need to go back to our project and actually finish setting it up. |
| [5:38](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=338s){target="youtube"} | Here's a checklist of the steps that we are going to take. And throughout this video, we'll go down the |
| [5:43](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=343s){target="youtube"} | list and we'll tick them off one by one. Let's start off by cloning the project. By the way, all the links you need for this video |
| [5:49](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=349s){target="youtube"} | are going to be in the video description. Once you've cloned the project, open the project in your terminal and run npm install. |
| [5:56](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=356s){target="youtube"} | This should finish successfully, but there might be a few |
| [6:01](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=361s){target="youtube"} | warnings because things are always getting deprecated. We will also need to create two local .env |
| [6:09](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=369s){target="youtube"} | files to store our environment variables. I've actually created an example.env file for you here. |
| [6:16](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=376s){target="youtube"} | So if you're on a Unix system, you can just run this command to create copies from that. And if you open the project in VSCode, you'll be able to see them here. |
| [6:29](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=389s){target="youtube"} | So here is the example file, and here are the two files I've just created. And they have to be named exactly this way because that's |
| [6:37](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=397s){target="youtube"} | where our project is going to be looking for them. Now here are some of the environment variables that we'll need to fill in. |
| [6:43](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=403s){target="youtube"} | We'll come back to this later once we actually have them. That's all the setup we have to do for our project code at the moment. |
| [6:50](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=410s){target="youtube"} | But if you try to run it now, it won't work because we haven't set up any of the backend yet. But if you do want to see the front end of the project |
| [6:58](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=418s){target="youtube"} | on its own and play around with it, then I actually have an earlier commit where it's just |
| [7:04](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=424s){target="youtube"} | using placeholders for all of the backend logic. So if you go to the GitHub repo and click on the commits |
| [7:10](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=430s){target="youtube"} | tab, you can scroll down all the way to the bottom. And there's this commit here that says front end boilerplate. |
| [7:18](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=438s){target="youtube"} | So you can copy this commit hash, and then you can run this command in your project folder to check out that specific commit. |
| [7:27](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=447s){target="youtube"} | So if you use that command to roll it back to that commit, you should be able to run npm run dev, |
| [7:33](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=453s){target="youtube"} | and it'll start a local version of the site. And this will run a version of the site where you just have the |
| [7:39](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=459s){target="youtube"} | front end and all of the backend integration is stripped out. You can still click around and play around with the UI, but it won't do anything. |
| [7:47](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=467s){target="youtube"} | And you'll find that any of the buttons or the interactions will basically just console log a to-do statement for it to be implemented. |
| [7:54](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=474s){target="youtube"} | But now, back to this project, we will want to use the latest commit. So if you did check out the older commit, then |
| [8:00](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=480s){target="youtube"} | please use this command to revert it back. Let's move on to the next step, which is to create an actual Supabase project. |
| [8:06](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=486s){target="youtube"} | Go to Supabase.com and create or log in with your account. In your dashboard, click create new project. |
| [8:15](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=495s){target="youtube"} | You might also have to create an organization first, but I already have one here. |
| [8:21](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=501s){target="youtube"} | Fill in your project name and generate a secure password for your database. You'll also want to copy the database password |
| [8:28](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=508s){target="youtube"} | as well, because you're going to need it later when we set up the Supabase CLI. |
| [8:34](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=514s){target="youtube"} | And finally, choose a region that's close to you or your customers. Then go ahead and create the project. |
| [8:42](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=522s){target="youtube"} | This will take a few minutes to set up, but while you wait, it does show you your API keys and some important |
| [8:48](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=528s){target="youtube"} | information that we will need in the next step. Or if your project already finished setting |
| [8:53](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=533s){target="youtube"} | up, then it will look something like this. On the toolbar on the left, go over to project settings. |
| [9:00](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=540s){target="youtube"} | You'll find some really useful things on this page. For example, you can look at what compute your project is configured to use. |
| [9:07](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=547s){target="youtube"} | You can also check out how much storage disk you're using up already. And also extra options like adding custom domain names. |
| [9:16](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=556s){target="youtube"} | But for now, what we need is under this API configuration tab. Here you'll find the project URL and two API keys. |
| [9:26](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=566s){target="youtube"} | One is a public key, so this is for the Supabase client. This one is okay to be revealed, because this is the one that's |
| [9:33](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=573s){target="youtube"} | usually embedded with the front end client anyways. It's going to be what your website uses to call the Supabase backend. |
| [9:41](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=581s){target="youtube"} | The other one is a secret key. This is useful for doing backend server-side operations. This one you definitely do not want to reveal. |
| [9:49](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=589s){target="youtube"} | So now we're going to copy the URL and the public key back to our project. And then back in your project, go to your .env.local |
| [9:57](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=597s){target="youtube"} | file, or create one if you didn't do it already. And we'll only need these two things, we actually don't |
| [10:02](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=602s){target="youtube"} | need these other keys, so we can delete those. And go ahead and paste your project URL and your public key. |
| [10:10](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=610s){target="youtube"} | Now to work with Supabase from our local environment, we're going to want to use the Supabase CLI. |
| [10:16](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=616s){target="youtube"} | So just search for Supabase CLI on Google, and you should see the official documentation pop up. |
| [10:22](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=622s){target="youtube"} | Then scroll down and follow the instructions for your specific platform to install the CLI. |
| [10:29](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=629s){target="youtube"} | Then you can verify the installation using this command. For this video I'm using Supabase version 2, so if you're |
| [10:35](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=635s){target="youtube"} | using a different major version, then keep in mind that some of the CLI commands may be different. |
| [10:41](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=641s){target="youtube"} | Now back in our development environment, you'd normally have to run this command to initialize Supabase |
| [10:46](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=646s){target="youtube"} | to add it to a project that doesn't have it yet. But for our project, I actually initialized Supabase |
| [10:51](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=651s){target="youtube"} | earlier, and you can tell because there's a Supabase folder with a config file. So we don't have to run the command again for this one. |
| [10:59](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=659s){target="youtube"} | We will need to run this command to link your local project with the remote Supabase project. |
| [11:05](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=665s){target="youtube"} | Don't forget to replace the PROJECT REF variable with your own one. Your project reference is basically the random ID part of your URL. |
| [11:14](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=674s){target="youtube"} | When you run this command, it's going to ask you to enter |
| [11:19](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=679s){target="youtube"} | your database password from when you created the project. So go ahead and do that as well. |
| [11:27](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=687s){target="youtube"} | Now that should work successfully, but it might throw a warning about the local config being different from the linked project. |
| [11:34](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=694s){target="youtube"} | But I wouldn't worry about that for now. Then to test if everything is set up correctly, you can run this command. |
| [11:40](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=700s){target="youtube"} | You should see a list of projects, and you should also see a dot next to the one that is linked. |
| [11:47](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=707s){target="youtube"} | Alright, so at this point we've downloaded the project code, and we've set up the Supabase project itself. Let's move on to the next step. |
| [11:54](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=714s){target="youtube"} | Next, we're going to set up Google Cloud so that we can let our users log in with a Google account. Supabase actually has a lot of different options |
| [12:01](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=721s){target="youtube"} | for signing in, but I prefer to just use a third party integration like Google, because it's |
| [12:07](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=727s){target="youtube"} | both easier for us to maintain, and it's also easier for our customers as well, because they |
| [12:12](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=732s){target="youtube"} | don't have to sign up for a separate account. First, head over to the Google Cloud console, and then either |
| [12:18](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=738s){target="youtube"} | log in or create an account if you don't already have one. And if this is your first time using Google Cloud, |
| [12:25](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=745s){target="youtube"} | you will also have to create a new project. So I've created a project here for this SaaS application. |
| [12:32](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=752s){target="youtube"} | Now you might also need to attach a credit card to this account, but the OAuth pricing |
| [12:37](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=757s){target="youtube"} | is free for up to 50,000 monthly active users, so you probably won't get charged. |
| [12:43](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=763s){target="youtube"} | So once you're on this page, go to the search bar at the top and type in "Credentials", and |
| [12:48](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=768s){target="youtube"} | select "Credentials" from "API and Services". Now on this page, click here to create credentials, and select "OAuth client ID". |
| [12:58](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=778s){target="youtube"} | For the application type, choose "web application", and then type in a name for it here. |
| [13:05](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=785s){target="youtube"} | Now we also have to add the authorized JavaScript origins and the authorized redirect URIs. |
| [13:13](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=793s){target="youtube"} | For the authorized origin, put your Supabase project URL, and you can also put localhost so that |
| [13:18](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=798s){target="youtube"} | we can test it from our development environment. And for the redirect, put in this URL. |
| [13:24](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=804s){target="youtube"} | This is actually provided to us by Supabase. If you go to authentication, then to providers, |
| [13:30](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=810s){target="youtube"} | and then expand the Google tab, you will see the callback URL here for us to copy. |
| [13:36](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=816s){target="youtube"} | So let's go back to the project and put that in. So now your settings should look something like this, |
| [13:42](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=822s){target="youtube"} | and then you can go ahead and click "create". And when that's done, you should see this little pop-up |
| [13:48](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=828s){target="youtube"} | with your client ID and your client secret. So go back to your Supabase dashboard, go to authentication, |
| [13:56](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=836s){target="youtube"} | and then providers, and then open the Google tab, and enable "sign in for Google". |
| [14:03](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=843s){target="youtube"} | And then just paste the client ID and the secret from the previous step, and click "save". |
| [14:09](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=849s){target="youtube"} | While we're here, you can also check out all the other authentication providers available, in case you want to use them. |
| [14:16](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=856s){target="youtube"} | And just an interesting note, I've also enabled email as a provider, and I think that's the default for a new Supabase project anyways. |
| [14:23](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=863s){target="youtube"} | But for testing purposes, I actually disabled this "confirm email" feature, because it |
| [14:28](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=868s){target="youtube"} | makes it easier for me to create test users. Okay, so now you're done with auth, and your Supabase project |
| [14:34](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=874s){target="youtube"} | should be wired up to let users log in with Google. Next, we're also going to need an OpenAI API key. |
| [14:41](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=881s){target="youtube"} | We're going to be using this for our back-end feature, where we automatically assign |
| [14:46](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=886s){target="youtube"} | labels to a task, based on its description. Now, this API is pay-per-use, but the pricing is quite |
| [14:53](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=893s){target="youtube"} | cheap, and our usage is going to be very low. If you don't have an OpenAI account, then go to platform.OpenAI.com to create it. |
| [15:02](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=902s){target="youtube"} | Log into your account, and then open the search bar, and search for "API keys". |
| [15:08](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=908s){target="youtube"} | And then you can click up here to create a new API key for your project. So go ahead and create that, and then copy the secret key. |
| [15:15](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=915s){target="youtube"} | Then, back in your project terminal, run the Supabase-cli command to set the OpenAI key as a back-end secret. |
| [15:23](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=923s){target="youtube"} | The project will be using this later on in our server-side edge functions. The final dependency we need for this project is Stripe, and we're |
| [15:33](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=933s){target="youtube"} | going to use this to process payments for our customers. So, back in our app, we limit users to only creating 100 tasks per month. |
| [15:43](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=943s){target="youtube"} | And when they upgrade to Premium, the limit gets raised to 10,000. Now, this is probably not the best business model |
| [15:50](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=950s){target="youtube"} | for this app, but the point is just to show you how to implement this at a technical level. Compared to our other dependencies, Stripe is a little bit more complex to set up. |
| [16:00](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=960s){target="youtube"} | But I'm going to try to keep this as simple as possible. There are three main steps we need to go through. |
| [16:06](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=966s){target="youtube"} | First, we want to create an account and set up the Stripe CLI. And then we'll have to create a product, which |
| [16:11](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=971s){target="youtube"} | is basically the subscription for our app. And finally, we'll need to set up webhooks so that |
| [16:17](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=977s){target="youtube"} | Stripe can tell our Supabase server whenever there's an update with our customers' payments. |
| [16:23](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=983s){target="youtube"} | If you don't have a Stripe account yet, then go to stripe.com and create one. Once you're signed in, you should be on this dashboard. |
| [16:31](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=991s){target="youtube"} | Just go to the top and make sure that you enable test mode. This will basically let us test the whole integration |
| [16:38](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=998s){target="youtube"} | without using real money or credit cards. Our Stripe account will also have a secret API key. |
| [16:45](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1005s){target="youtube"} | So to find it, just go into the search box and type in "API key" and then go to "developers |
| [16:50](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1010s){target="youtube"} | API key." And take note of the secret key here, because we're going to need this for later. |
| [16:56](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1016s){target="youtube"} | Next, we'll need to install the Stripe CLI. So just search for Stripe CLI on Google and it |
| [17:01](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1021s){target="youtube"} | should link you to the official documentation. And if you scroll down, you'll see different tabs depending |
| [17:07](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1027s){target="youtube"} | on which platform you want to see the command for. Once you've installed it, then run this command in |
| [17:12](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1032s){target="youtube"} | your terminal to log in with your Stripe account. Next, let's use the Stripe CLI to create a new product and a price. |
| [17:20](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1040s){target="youtube"} | In Stripe, products and prices are two distinct object types. And a product can have multiple different prices, but |
| [17:28](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1048s){target="youtube"} | every price must be associated with a product. Now, to create the products and the prices, we can go to our Stripe |
| [17:35](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1055s){target="youtube"} | dashboard and then click to create them through there. But we can also do it with a command in the CLI, which is a little bit faster. |
| [17:45](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1065s){target="youtube"} | So that's what I'm going to do for this project. So if you go back to the project and then you open the README file, scroll all the way down until |
| [17:51](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1071s){target="youtube"} | you see the part that says Stripe setup. And there's a couple of commands that you can just copy and paste into your terminal |
| [17:59](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1079s){target="youtube"} | to create the product via the CLI directly. This command will create both a price and a product for us together. |
| [18:06](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1086s){target="youtube"} | It creates a $10 monthly subscription for a new product called Taskmaster Premium with a 14-day trial. |
| [18:14](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1094s){target="youtube"} | So go ahead and run that in your project terminal. And when it's done, you should see an output object like this. |
| [18:22](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1102s){target="youtube"} | And we're going to want to take note of the price ID because we will need that for later. Next, we'll also need to run another command to set up the customer portal. |
| [18:32](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1112s){target="youtube"} | This is going to set up a page that customers can go to to either update or cancel their subscriptions. |
| [18:39](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1119s){target="youtube"} | Just make sure that before you run this command to replace the URLs with your own Supabase URLs. |
| [18:45](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1125s){target="youtube"} | And in this project, I actually haven't created the privacy or the terms of service pages. So these links will probably just bounce back to the homepage. |
| [18:54](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1134s){target="youtube"} | So that's something you can add if you want. And to finish our Stripe setup, we will need to add a webhook. |
| [19:03](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1143s){target="youtube"} | A webhook is a URL endpoint that we provide that Stripe can send events and notifications to. |
| [19:09](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1149s){target="youtube"} | And it will use this to tell us about things like successful checkouts and subscription cancellations. |
| [19:15](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1155s){target="youtube"} | And then we'll use that information to update our database. So go back to your Stripe dashboard and then search for webhooks. |
| [19:23](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1163s){target="youtube"} | And then go to Developers / Webhooks. And here, click add endpoint. |
| [19:29](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1169s){target="youtube"} | Our webhook endpoint is going to look something like this. We will implement this later as an edge function. |
| [19:35](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1175s){target="youtube"} | Just make sure to update the project ID to your actual Supabase project URL. |
| [19:41](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1181s){target="youtube"} | And then enter it here as your endpoint. |
| [19:47](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1187s){target="youtube"} | Next, you have to select which events for it to listen to. |
| [19:53](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1193s){target="youtube"} | These are the four events that you need to select. These events will give us everything we need to build the |
| [20:04](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1204s){target="youtube"} | subscription functionality that we want for our app. |
| [20:12](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1212s){target="youtube"} | Once you've filled in the endpoint and the events, then click add endpoint. And now your webhook will be set up and you can |
| [20:20](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1220s){target="youtube"} | click here to get your webhook secret key. So now we should have all the keys we need to integrate Stripe with our project. |
| [20:28](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1228s){target="youtube"} | If you missed one of them, then just rewind this chapter. And again, here's the Supabase CLI command you need to |
| [20:34](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1234s){target="youtube"} | run to set up the secrets in the Supabase project. So go ahead and run these for each of the keys. |
| [20:41](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1241s){target="youtube"} | We're going to need the Stripe API secret key, the price ID and the webhook secret. |
| [20:47](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1247s){target="youtube"} | So back in my terminal, I've set up all three keys. And to confirm that I can run Supabase secrets list. |
| [20:56](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1256s){target="youtube"} | And that will show me all the different secrets that I've registered with my Supabase project. So at this point, you should see four of them. |
| [21:04](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1264s){target="youtube"} | Now there's actually one more place where we need to set up our Stripe secret key. And that's going to be in our vault table in the database. |
| [21:12](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1272s){target="youtube"} | And this is an inbuilt Supabase table where we can store secret keys that our database can use as part of automatic triggers. |
| [21:20](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1280s){target="youtube"} | In this project specifically, I'm using it so that I can make Stripe create a user for |
| [21:26](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1286s){target="youtube"} | us whenever we create a user in Supabase. Because there are different user systems, but we want them to be associated. |
| [21:33](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1293s){target="youtube"} | We're going to implement that using a database trigger. But to do that, it will need to have the stripe secret |
| [21:38](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1298s){target="youtube"} | key so that it has the authority to create new users. To add this, go back to your Supabase dashboard and then go to SQL editor. |
| [21:46](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1306s){target="youtube"} | And that in this window, we're going to run this command. |
| [21:52](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1312s){target="youtube"} | Just remember to replace this with your actual secret key from Stripe. And then click run and then you should see that it should |
| [22:00](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1320s){target="youtube"} | create this key for you and return a key ID. And if you've accidentally added the wrong |
| [22:06](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1326s){target="youtube"} | secret or you just want to update it, then you'll need to use this command instead. So now that we're done setting up our dependencies, let's go |
| [22:14](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1334s){target="youtube"} | back to our Supabase project and set up our database next. Our database is going to be a Postgres SQL database |
| [22:21](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1341s){target="youtube"} | and we're going to create three tables. We'll have a profile table for each user. |
| [22:28](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1348s){target="youtube"} | There we will store information about their account status. Now this is going to be read only for the user. |
| [22:35](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1355s){target="youtube"} | It's also going to be linked to an auth table, which comes out of the box with Supabase. This means that our user ID primary key in |
| [22:43](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1363s){target="youtube"} | this profile table is going to map directly to a user ID in the auth table as well. |
| [22:50](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1370s){target="youtube"} | And you're going to see this pattern where we use a primary key for the user as a foreign key in each of our tables. |
| [22:58](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1378s){target="youtube"} | Now our most important table is going to be this task table here. We will store each task as a row and it will have a user ID as part of its key. |
| [23:09](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1389s){target="youtube"} | And finally, we'll also have a separate table to track the usage of each user per month. |
| [23:15](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1395s){target="youtube"} | And the reason I decided to use a separate table to track the usage is that I think it will |
| [23:21](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1401s){target="youtube"} | be easier to scale that way, rather than tracking it in the user profile table directly. |
| [23:27](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1407s){target="youtube"} | So this is going to be the schema for the database. But on top of this, we will also have security policies and triggers. |
| [23:35](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1415s){target="youtube"} | We're going to use something called row level security. That basically means that to be able to read or update a |
| [23:42](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1422s){target="youtube"} | row of a database, certain conditions have to be met. For example, we can check if the user ID of a request matches |
| [23:50](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1430s){target="youtube"} | the user ID value of the row that we want to access. And then we use row level security to enforce these roles for our app. |
| [24:00](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1440s){target="youtube"} | And we're also going to have something called triggers. Triggers are functions that we can execute when |
| [24:05](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1445s){target="youtube"} | something happens inside our database. And these functions are run by our dedicated PostgreSQL server. |
| [24:12](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1452s){target="youtube"} | In this project, we will use them quite a lot. We'll use triggers to update task limits for each user whenever they create a task. |
| [24:20](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1460s){target="youtube"} | We can also stop them from creating new tasks once they've reached their limit. We'll also use it to automatically create a Stripe |
| [24:28](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1468s){target="youtube"} | user whenever a new user is created in our system. That's because, as I mentioned before, Stripe has its own user system. |
| [24:36](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1476s){target="youtube"} | So we need some automation to link them together. And finally, we can also use it to automatically clean up our |
| [24:42](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1482s){target="youtube"} | users and our storage when things are deleted as well. Now, that's a lot of stuff I just went through. |
| [24:48](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1488s){target="youtube"} | So how are we going to implement all of that very quickly? Well, with Supabase, we can write instructions |
| [24:54](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1494s){target="youtube"} | for all of those things using SQL files. And if we go back to our project and then we |
| [24:59](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1499s){target="youtube"} | go to the Supabase migrations folder, you'll see that we have a bunch of SQL files for each of these things that we want to add. |
| [25:06](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1506s){target="youtube"} | And if you click through them, you could see the statements used to create the tables. So here's the table schema. |
| [25:13](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1513s){target="youtube"} | And you can also see triggers being created and security policies being created. And the reason I've separated each of these statements |
| [25:21](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1521s){target="youtube"} | into separate files is just to make it easier for you to understand each new thing that we're setting up. |
| [25:28](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1528s){target="youtube"} | It's exactly the same as if I had all of these statements in one giant file, but that's just going |
| [25:33](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1533s){target="youtube"} | to be a little bit more difficult to read. To apply these files to a project, you can run this command. |
| [25:40](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1540s){target="youtube"} | This is called apply a migration. It will execute all of the SQL statements in each file in lexical order. |
| [25:48](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1548s){target="youtube"} | And so if you go back to our project, you'll see that each of our SQL files has a number in front of it. And so basically that's the order that I want to run the files in. |
| [25:56](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1556s){target="youtube"} | But in a real world situation, I think that people would typically use a timestamp for this number. |
| [26:02](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1562s){target="youtube"} | So I'm going to go ahead and run this now in my terminal. And once the command is done, Supabase will have |
| [26:08](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1568s){target="youtube"} | created all the databases, triggers, and security policies that we told it to in those SQL files. |
| [26:16](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1576s){target="youtube"} | Now notice if I try to run the command again, it doesn't actually |
| [26:21](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1581s){target="youtube"} | do anything, even if I change the contents of these files. That's because these commands, once they apply a migration file, |
| [26:30](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1590s){target="youtube"} | it kind of remembers that it's already done that file. So if you want to create new migrations, you actually |
| [26:37](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1597s){target="youtube"} | have to create a new file and just make that number in front of it keep increasing. |
| [26:43](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1603s){target="youtube"} | But if the project is still in development like this one here, and you wanted to do a full reset, you can run this command instead. |
| [26:50](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1610s){target="youtube"} | This will clear your entire database and then run every SQL file from the beginning. And once you finish running your migration, you can |
| [26:56](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1616s){target="youtube"} | go to your Supabase project to check it out. So go to database and then go to schema visualizer, and you should |
| [27:02](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1622s){target="youtube"} | see the schema for the database that you just created. And something very cool that I want to mention about Supabase |
| [27:09](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1629s){target="youtube"} | is that it automatically creates an API for your database. So you can do CRUD operations from your front end really |
| [27:16](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1636s){target="youtube"} | easily without having to implement the API yourself. You can read more about that feature inside the REST API |
| [27:23](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1643s){target="youtube"} | or the Data API documentation on the Supabase website. Now back to the app, one of my favorite features here |
| [27:30](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1650s){target="youtube"} | is that users can upload images to their tasks. To implement this, we're going to use Supabase's storage feature. |
| [27:37](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1657s){target="youtube"} | And I have some good news for you. If you ran the previous command, then you've already set this up. |
| [27:43](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1663s){target="youtube"} | One of our SQL files from the previous step actually creates something called a storage bucket. It did that by creating an entry in this built-in storage buckets table. |
| [27:53](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1673s){target="youtube"} | And behind the scenes, that actually causes Supabase to set up a storage bucket for us. |
| [27:59](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1679s){target="youtube"} | So if you go back to your Supabase dashboard and then you go down and click storage, you'll see that it's created a bucket for us here. |
| [28:06](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1686s){target="youtube"} | And the bucket doesn't have anything in it right now. But if you go here and click edit bucket and click on |
| [28:12](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1692s){target="youtube"} | additional configuration, you'll see that we've actually configured the bucket already from our SQL schema. |
| [28:18](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1698s){target="youtube"} | We've configured it to restrict the upload size to one megabyte, and we've also configured it to only accept images. |
| [28:25](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1705s){target="youtube"} | Now I do want to mention that I did make this bucket public, which means that if people have the URL to an |
| [28:31](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1711s){target="youtube"} | image, they can actually just go ahead and see it. And I did that because it's more simple to set it up with the front end. |
| [28:39](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1719s){target="youtube"} | But if you were doing this for real, then I probably recommend making this private. It's just that it's a little bit more complex to set up. |
| [28:46](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1726s){target="youtube"} | So it's a little bit out of scope for this video. So now we've set up the database and the storage, |
| [28:51](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1731s){target="youtube"} | and we're moving on to the final setup step, which is deploying our edge functions. |
| [28:57](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1737s){target="youtube"} | Edge functions are custom functions that run on demand in response to HTTP requests. |
| [29:03](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1743s){target="youtube"} | Think of them as a way to run any code that you'd normally need a server for. In our project, you'll find them in the Supabase/functions folder. |
| [29:11](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1751s){target="youtube"} | Each subfolder is an edge function. The code is implemented as a TypeScript function, |
| [29:16](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1756s){target="youtube"} | and it will be run in a Deno environment. So here, I'm just going to go back to the project to show you where they are. |
| [29:23](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1763s){target="youtube"} | Go to your Supabase folder, and then go to your functions folder. And then each of the functions is going to be its own separate subfolder. |
| [29:30](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1770s){target="youtube"} | If you open that up, you'll see this index.ts file, and that is the code for one of our functions. |
| [29:37](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1777s){target="youtube"} | Now, we will be able to build and deploy these functions directly from our project using the Supabase CLI. |
| [29:45](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1785s){target="youtube"} | They also support environment variables, which is where we can go and fetch those secrets that we |
| [29:51](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1791s){target="youtube"} | stored earlier when we set up our dependencies. Here's a short snippet from one of our functions, |
| [29:57](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1797s){target="youtube"} | and it's the function called createTaskWithAI. This function will create the task and then put it into the table. |
| [30:04](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1804s){target="youtube"} | And after that, it will use AI to determine automatic tag or a label for the task based on the task title, |
| [30:11](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1811s){target="youtube"} | and then it will update the task with that tag. The second function is called createStripeSession, |
| [30:18](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1818s){target="youtube"} | and we'll be using this in the profile page. So this is here, and when users click this to |
| [30:24](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1824s){target="youtube"} | manage their subscription, this function will generate a URL for them, and this URL will |
| [30:30](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1830s){target="youtube"} | either be a checkout session or customer portal depending on the user's account status. |
| [30:36](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1836s){target="youtube"} | Finally, the third and the last function is our webhook endpoint for Stripe. So if you recall from the Stripe chapter, this |
| [30:43](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1843s){target="youtube"} | is an endpoint that Stripe will use to send us event notifications when something happens. |
| [30:49](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1849s){target="youtube"} | We will use this to detect when the user should be upgraded to premium or when the subscription ends and |
| [30:54](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1854s){target="youtube"} | they should be downgraded back to the free tier. And as I mentioned before, these functions will all have |
| [31:00](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1860s){target="youtube"} | access to the Supabase secrets that we stored earlier. So that's how they can access services like Stripe and OpenAI on our behalf. |
| [31:09](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1869s){target="youtube"} | From our project root, you can use these commands to deploy each of the functions to our Supabase project. |
| [31:16](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1876s){target="youtube"} | Once that's finished, you can go back to your Supabase dashboard |
| [31:23](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1883s){target="youtube"} | and then check them out by clicking edge functions. |
| [31:29](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1889s){target="youtube"} | And if everything worked correctly, you should see three separate edge functions being created for us. |
| [31:35](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1895s){target="youtube"} | If you click on one of them, you'll also be able to see links to metrics and logs. So this is where you can go to debug them. |
| [31:43](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1903s){target="youtube"} | Now there's one more thing we need to do. Click on your Stripe webhook function and then |
| [31:48](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1908s){target="youtube"} | go to details and then scroll all the way down to function configuration and then click to disable |
| [31:55](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1915s){target="youtube"} | enforce JWT verification and click save. This verification is there to check that whoever calls |
| [32:01](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1921s){target="youtube"} | this function is one of our authenticated users. And that's what we want in most cases. |
| [32:08](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1928s){target="youtube"} | But in this particular case, we're expecting Stripe to call this function. And with that, we finally finished all of our setup |
| [32:16](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1936s){target="youtube"} | process and we're ready to run the project. Go back to your project terminal and run this command |
| [32:21](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1941s){target="youtube"} | to start the local development server. Once you've run it, you should see this local URL pop |
| [32:29](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1949s){target="youtube"} | up and you can click that to open your project. And if it doesn't load right away, you might need |
| [32:35](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1955s){target="youtube"} | to refresh it, but you can probably now test that each of the features work as intended. |
| [32:41](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1961s){target="youtube"} | So we can log in with Google. We can create a new task. |
| [32:52](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1972s){target="youtube"} | And when we create a task, we should see that it automatically assigns a label for us that is appropriate for the task. |
| [32:59](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1979s){target="youtube"} | We should also be able to edit a task and add images to it. And then if you go to your profile page, you should |
| [33:08](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1988s){target="youtube"} | see that your task created is tracked properly here and that if you click manage subscription, |
| [33:16](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=1996s){target="youtube"} | you get taken to a Stripe checkout page. And then finally go back to our project and just make sure that you can sign out. |
| [33:24](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2004s){target="youtube"} | Now if you wanted to deploy something like this, then the easiest way to do this is probably with Vercel, |
| [33:30](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2010s){target="youtube"} | but this is basically just a static NextJS website. So you can use any other process that works for static websites in general. |
| [33:37](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2017s){target="youtube"} | If you wanted to add new functionality or extend the project to do something specific, then here's |
| [33:43](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2023s){target="youtube"} | a rough overview of the project structure. The UI elements are in the apps and the components folder. |
| [33:49](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2029s){target="youtube"} | The front-end logic is in the hooks folder, so that's the client that will connect to Supabase. |
| [33:55](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2035s){target="youtube"} | And the backend logic is in the Supabase functions folder. And the database and configurations are in the migrations folder. |
| [34:03](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2043s){target="youtube"} | As I was working on this project, I also actually created an integration test suite so that I can quickly |
| [34:09](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2049s){target="youtube"} | and more easily test the project's functionality. You'll find all the test code in the project under |
| [34:15](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2055s){target="youtube"} | the test/integration directory, and these tests will actually connect to your real project. |
| [34:21](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2061s){target="youtube"} | If you want to run them, then create a file like this to store all of your environment variables |
| [34:26](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2066s){target="youtube"} | that are going to be used in the task, and then update them with your version of these API keys. |
| [34:32](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2072s){target="youtube"} | Then go to your terminal and run this command in your project root to run the entire test suite. |
| [34:38](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2078s){target="youtube"} | You can also use this command if you want to run just a specific file. |
| [34:45](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2085s){target="youtube"} | Now all the tests should pass, but they might fail the first time due to timeouts because I think |
| [34:50](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2090s){target="youtube"} | that some of these code paths have a cold start. So if you just run them for the first time, they might take a little bit slower than usual. |
| [34:57](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2097s){target="youtube"} | So if they fail, then I recommend to try running it again and seeing if it works. So we're now at the end of the video. |
| [35:04](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2104s){target="youtube"} | That was quite a large project, and I hope you managed to get everything to work. But if you got stuck or if you have any questions, |
| [35:10](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2110s){target="youtube"} | then feel free to leave a comment either here or on my GitHub page for the project. |
| [35:16](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2116s){target="youtube"} | Now as I said at the start, this was a very high-level overview of using Supabase. |
| [35:22](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2122s){target="youtube"} | We went through a lot of stuff very quickly, and there's a lot of details that I simplified along the way. |
| [35:28](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2128s){target="youtube"} | Now if you are interested in diving a little bit deeper, then go to the project repository and check |
| [35:34](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2134s){target="youtube"} | out this tutorials folder where I've actually created a bunch of different documents for each major |
| [35:40](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2140s){target="youtube"} | functionality that we introduced to the project. If you did enjoy this and would like to see a tutorial |
| [35:45](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2145s){target="youtube"} | series covering each of these features in more detail, or you want to see an end-to-end tutorial for a different type of project entirely, |
| [35:52](https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=2152s){target="youtube"} | then please let me know in the comments. Otherwise, I hope this was useful, and I'll see you in the next one. |
:::

-->
<!-- YR: conversation with claude about this issue: https://claude.ai/chat/8d6936eb-d0e0-4f0a-a2aa-9af61b5d19ef
see quote below.

The links are still opening in different tabs.Investigated attribute syntax and browser behavior discrepancies.The user says the links are still opening in different tabs even though they all have {target="youtube"}. This is strange because the syntax looks correct.
Let me think about what could be happening:

The syntax {target="youtube"} should work in Quarto to add HTML attributes
All links have the same target name "youtube"
In theory, this should make them all open in the same tab

Possible issues:

Maybe Quarto isn't processing the attribute syntax correctly
Maybe there's a browser behavior where YouTube specifically prevents tab reuse
Maybe the syntax needs to be different

Actually, I should check if the user is viewing this in rendered HTML from Quarto or just in a markdown viewer. The {target="youtube"} syntax only works after Quarto processes it into HTML.
Another possibility: YouTube might be doing something that prevents the tab from being reused. Or maybe the browser is treating each YouTube URL as wanting its own tab.
Let me suggest checking:

First, verify they're viewing the Quarto-rendered HTML, not raw markdown
If that's correct, we might need to try using raw HTML instead of Quarto's attribute syntax
Or there might be a browser/YouTube specific issue

I should ask for clarification about how they're viewing it and suggest trying the raw HTML approach as an alternative.That's odd - the {target="youtube"} syntax should work. Let me check a few things:

Are you viewing the rendered Quarto HTML output? The {target="youtube"} syntax only works after Quarto processes the markdown into HTML. If you're viewing the raw .md file in a markdown viewer, it won't work.
Try using raw HTML instead - This will definitely work:
2 stepsVerifying quotes are still unchangedbashbash /mnt/user-data/outputs/compare_quotes.sh /home/claude/original.md /mnt/user-data/outputs/youtube-transcript.mdOutputExtracting quotes from original file: /home/claude/original.md
Extracting quotes from new file: /mnt/user-data/outputs/youtube-transcript.md

Comparing quote text only (ignoring timestamps)...
==================================================
‚úì SUCCESS: All quotes are identical!
No text was changed - only timestamps were converted to links.
Investigated alternative causes for persistent tab-opening issues.Great! The file is regenerated with raw HTML anchor tags using target="youtube". This should definitely work because it's standard HTML, and all links have the same target attribute value.
However, if the user is still experiencing issues with links opening in different tabs, there could be a few other reasons:

Browser behavior - some browsers might not respect the target attribute for external links
YouTube-specific behavior - YouTube might be doing something that forces new tabs
Pop-up blocker or browser extension interfering
The way Quarto renders tables might be affecting it

I should provide the updated file and also mention these possibilities.Perfect! View your updated markdown file
I've regenerated the file using raw HTML <a> tags with target="youtube" instead of Markdown syntax. This should definitely work because it's standard HTML.
Note: If links are still opening in separate tabs, it might be due to:

Browser popup blocker - Some browsers block automatic tab reuse as a security feature
YouTube behavior - YouTube might be forcing new tabs through JavaScript
Browser settings - Check if your browser has settings that override the target attribute for external links

To test if the target attribute is working, try clicking multiple timestamp links in quick succession. The "youtube" tab should reload with each click rather than opening new tabs each time.
If it's still not working, could you let me know:

What browser you're using?
Are you viewing the Quarto-rendered HTML output or something else?
Youtube transcriptDocument ¬∑ MD¬†DownloadRetryYRIs the text other than the links the same in this new file too. Could you write another script to check this type of file.Devised script to extract quotes from HTML-formatted links.The user wants me to verify that the text content (quotes) is still the same even though we're now using HTML links instead of Markdown links. They also want a script that can handle this new HTML format.
Let me create a script that can extract the quote text from both markdown-style links and HTML-style links.Good thinking! Let me verify and create a script that can handle both formats:Testing if the existing script still works with HTML linksbashbash /mnt/user-data/outputs/compare_quotes.sh /home/claude/original.md /mnt/user-data/outputs/youtube-transcript.mdOutputExtracting quotes from original file: /home/claude/original.md
Extracting quotes from new file: /mnt/user-data/outputs/youtube-transcript.md

Comparing quote text only (ignoring timestamps)...
==================================================
‚úì SUCCESS: All quotes are identical!
No text was changed - only timestamps were converted to links.
Validated existing script and engineered robust solution for multiple link formats.Great! The existing script still works because it extracts column 3 (the quote column) which hasn't changed. But let me create a more robust script that explicitly handles both markdown and HTML link formats in the timestamp column, just to make sure we're comparing apples to apples.Great! The existing script confirms the quotes are identical. But let me create a more comprehensive script that explicitly handles both Markdown and HTML link formats:Creating an enhanced comparison script that handles both Markdown and HTML linkscompare_quotes_enhanced.shNow let me test the enhanced script to show it working.Now let me test the enhanced script to show it working.Now let me test it:Testing the enhanced comparison scriptbashbash /mnt/user-data/outputs/compare_quotes_enhanced.sh /home/claude/original.md /mnt/user-data/outputs/youtube-transcript.mdOutputExtracting quotes from original file: /home/claude/original.md
Extracting quotes from new file: /mnt/user-data/outputs/youtube-transcript.md

Timestamp format comparison:
----------------------------
Original format (first 3 timestamps):
  0:00
  0:07
  0:13

New format (first 3 timestamps):
  <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=0s" target="youtube">0:00</a>
  <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=7s" target="youtube">0:07</a>
  <a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=13s" target="youtube">0:13</a>

Comparing quote text only (ignoring timestamp format)...
========================================================
‚úì SUCCESS: All quotes are identical!
The quote text has not changed - only timestamp formatting was modified.
Validated script effectiveness and confirmed selective formatting changes.Perfect! The enhanced script shows:

The original timestamp format (plain text)
The new timestamp format (HTML links with target attribute)
Confirms that all quote text is identical

This gives the user confidence that only the timestamp column changed.Perfect! ‚úì The enhanced script confirms that all quote text is identical - only the timestamp column format changed from plain text to HTML links.
View your enhanced comparison script
What the enhanced script does:

Shows the timestamp format in both files (so you can see the difference)
Extracts and compares only the quote text (column 3)
Confirms no text was changed

Output shows:

Original format: 0:00 (plain text)
New format: <a href="..." target="youtube">0:00</a> (HTML link)
Quote text: 100% identical ‚úì

You can use this script anytime you need to verify that content changes are limited to specific columns.Compare quotes enhancedSH¬†DownloadRetryYRIt's not working. I clicked two of the links and both opened up a new tab (i.e. total 3 tabs - original plus 2 new ones). I right clicked on the link and chose inspect (see screen shot). I did this in Chrome. I also did it in Brave - it didn't work either.Investigated why target attribute fails despite correct implementation.The user is showing me that the target="youtube" attribute is indeed present in the HTML (I can see it in the screenshot in the developer tools), but it's still opening new tabs each time instead of reusing the same tab.
Looking at the screenshot, I can see:
html<a href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=0s" target="youtube" data-original-href="https://www.youtube.com/watch?v=Q4rXmxQ1AUM&t=0s"...
The target attribute is there, but it's not working. This is likely because:

YouTube might be using JavaScript to force new tabs
The browser might be treating YouTube links specially
There might be some cross-origin or security policy preventing tab reuse

When you click a link with a named target (like target="youtube"), it should:

First click: Open a new window/tab with that name
Subsequent clicks: Navigate that same named window/tab to the new URL

However, this behavior can be overridden by:

YouTube's own JavaScript intercepting the navigation
Browser security policies for cross-origin targets
Popup blockers or tab management settings

The fact that it's not working in both Chrome and Brave suggests this is likely a YouTube-specific issue or a browser security feature preventing the reuse of tabs for external domains.
Unfortunately, there's not much we can do about this from the HTML side. The target attribute is correctly implemented, but YouTube or the browser is preventing the expected behavior.
I should explain this to the user and let them know that this is a limitation beyond our control.I can see from your screenshot that the target="youtube" attribute is correctly in the HTML, but unfortunately this appears to be a browser security limitation that we can't override.
The issue is that modern browsers (Chrome, Brave, Firefox, etc.) have security policies that prevent named targets from working reliably with external domains like YouTube. This is to prevent:

Cross-origin security issues
Malicious sites from controlling tabs you have open
Tracking across different domains

Why it's not working:

YouTube's behavior: YouTube may use JavaScript that forces links to open in new tabs
Browser security: Browsers restrict named targets for cross-origin navigation as a security feature
Cross-domain limitation: Named targets work best for same-origin navigation (e.g., pages on your own domain)

Unfortunately, there's no reliable way to force all YouTube links to open in the same new tab from HTML alone. The target attribute is correctly implemented, but the browser/YouTube is blocking the expected behavior.
Possible workarounds:

Accept that each click opens a new tab (users can manually close old ones)
Use a browser extension that manages YouTube tabs
Keep links opening in the same tab (remove target entirely) - but this navigates away from your document

I'm sorry this isn't working as expected. Would you like me to:

Remove the target attribute so links open in the current tab?
Keep target="_blank" so behavior is predictable (new tab each time)?
Leave it as is with target="youtube" (which should work but doesn't due to browser limitations)?

-->


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./000950-internetArchitecture-webFrameworks-v001.html" class="pagination-link" aria-label="<yrChapterNumber>9. </yrChapterNumber> Client side web frameworks">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title"><yrchapternumber>9. </yrchapternumber> Client side web frameworks</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./001007-tutorial-supabase-projectArchitecture-v001.html" class="pagination-link" aria-label="<yrChapterNumber>11. </yrChapterNumber> Project Architecture">
        <span class="nav-page-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title"><yrchapternumber>11. </yrchapternumber> Project Architecture</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<div style="text-align: center; margin-top: 2em; padding-top: 1em; border-top: 1px solid #ddd;">
  <p>¬© 2025 Y. Rosenthal. All rights reserved.</p>
</div>
<script>
const titles = document.querySelectorAll('.title');

titles.forEach(title => {
  if (title.textContent.trim().startsWith('Appendix')) {
    const chapterNumber = title.querySelector('yrChapterNumber');
    if (chapterNumber) {
      chapterNumber.classList.add('yrAppendixChapterNumber');
    }
  }
});
</script>




</body></html>