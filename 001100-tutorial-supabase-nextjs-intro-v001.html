<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>12&nbsp; 12.  Tutorial - step by step – AI Assisted Software Development</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./someFile.html" rel="next">
<link href="./001007-tutorial-supabase-projectArchitecture-v001.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-dcbfc57d77cecfb36a223989b6e6cd2b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
<script src="yrstuff-v001.js"></script>


<link rel="stylesheet" href="yrStyles-main-v001.css">
</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./001000-tutorial-supabase-nextjs-v001.html">Building with Next and Supabase</a></li><li class="breadcrumb-item"><a href="./001100-tutorial-supabase-nextjs-intro-v001.html"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title"><yrchapternumber>12. </yrchapternumber> Tutorial - step by step</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">AI Assisted Software Development</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About This Website</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Intro</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000020-introToAi-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title"><yrchapternumber>1. </yrchapternumber> Overview of AI today</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000030-introToAiasd-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title"><yrchapternumber>2. </yrchapternumber> Intro to Coding with an LLM</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000100-howToInstallCursor-v002.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title"><yrchapternumber>3. </yrchapternumber> How to install Cursor on your computer</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000210-introToBashAndCli-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title"><yrchapternumber>4. </yrchapternumber> Intro to Bash (and CLIs)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000240-v2-introToGit-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title"><yrchapternumber>5. </yrchapternumber> Intro to Git &amp; GitHub</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000230-v1-introToGit-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title"><yrchapternumber>6. </yrchapternumber> alternate chapter - Intro to Git &amp; GitHub (hands-on, Bash-first)</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Basic Internet Architecture</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000900-internetArchitecture-browsersAndWebservers-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title"><yrchapternumber>7. </yrchapternumber> Browsers (HTML,CSS,Javascript) and Web Servers</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000940-internetArchitecture-domainNamesEtc-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title"><yrchapternumber>8. </yrchapternumber> Domain Names, IP Addresses, ping, etc</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000950-internetArchitecture-webFrameworks-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title"><yrchapternumber>9. </yrchapternumber> Client side web frameworks</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Building with Next and Supabase</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./001000-tutorial-supabase-nextjs-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title"><yrchapternumber>10. </yrchapternumber> Tutorial - intro</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./001007-tutorial-supabase-projectArchitecture-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title"><yrchapternumber>11. </yrchapternumber> Project Architecture</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./001100-tutorial-supabase-nextjs-intro-v001.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title"><yrchapternumber>12. </yrchapternumber> Tutorial - step by step</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Practice Questions</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./someFile.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">This is a placeholder</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./someFile.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">This is a placeholder</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./someFile.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">This is a placeholder</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Ignore this - in progress work</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000010-topics-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title"><yrchapternumber>13. </yrchapternumber> TOPICS (ignore this section - it is just for me to develop the book)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000500-htmlCssJavascript-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title"><yrchapternumber>14. </yrchapternumber> Overview of HTML, CSS, JavaScript</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./099999-llmsForDataAnalytics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title"><yrchapternumber>15. </yrchapternumber> Using LLMs to Help With Data Analytics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./900010-codeMetrics-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title"><yrchapternumber>16. </yrchapternumber> Measures of well designed programs</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./someFile.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">This is a placeholder</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./someFile.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">This is a placeholder</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview"><span class="header-section-number">12.1</span> Overview</a>
  <ul class="collapse">
  <li><a href="#what-youll-build" id="toc-what-youll-build" class="nav-link" data-scroll-target="#what-youll-build"><span class="header-section-number">12.1.1</span> What You’ll Build</a></li>
  </ul></li>
  <li><a href="#project-architecture" id="toc-project-architecture" class="nav-link" data-scroll-target="#project-architecture"><span class="header-section-number">12.2</span> Project Architecture</a>
  <ul class="collapse">
  <li><a href="#tech-stack" id="toc-tech-stack" class="nav-link" data-scroll-target="#tech-stack"><span class="header-section-number">12.2.1</span> Tech Stack</a></li>
  <li><a href="#hosting-options" id="toc-hosting-options" class="nav-link" data-scroll-target="#hosting-options"><span class="header-section-number">12.2.2</span> Hosting Options</a></li>
  </ul></li>
  <li><a href="#setup-checklist" id="toc-setup-checklist" class="nav-link" data-scroll-target="#setup-checklist"><span class="header-section-number">12.3</span> Setup Checklist</a></li>
  <li><a href="#step-0-install-node-and-hence-npm" id="toc-step-0-install-node-and-hence-npm" class="nav-link" data-scroll-target="#step-0-install-node-and-hence-npm"><span class="header-section-number">12.4</span> Step 0: Install Node (and hence npm)</a></li>
  <li><a href="#step-1-clone-and-install-the-project" id="toc-step-1-clone-and-install-the-project" class="nav-link" data-scroll-target="#step-1-clone-and-install-the-project"><span class="header-section-number">12.5</span> Step 1: Clone and Install the Project</a>
  <ul class="collapse">
  <li><a href="#download-the-code" id="toc-download-the-code" class="nav-link" data-scroll-target="#download-the-code"><span class="header-section-number">12.5.1</span> Download the Code</a></li>
  <li><a href="#create-environment-files" id="toc-create-environment-files" class="nav-link" data-scroll-target="#create-environment-files"><span class="header-section-number">12.5.2</span> Create Environment Files</a></li>
  <li><a href="#optional-preview-the-frontend" id="toc-optional-preview-the-frontend" class="nav-link" data-scroll-target="#optional-preview-the-frontend"><span class="header-section-number">12.5.3</span> Optional: Preview the Frontend</a></li>
  </ul></li>
  <li><a href="#step-2-create-a-supabase-project" id="toc-step-2-create-a-supabase-project" class="nav-link" data-scroll-target="#step-2-create-a-supabase-project"><span class="header-section-number">12.6</span> Step 2: Create a Supabase Project</a>
  <ul class="collapse">
  <li><a href="#sign-up-for-supabase" id="toc-sign-up-for-supabase" class="nav-link" data-scroll-target="#sign-up-for-supabase"><span class="header-section-number">12.6.1</span> Sign Up for Supabase</a></li>
  <li><a href="#project-configuration" id="toc-project-configuration" class="nav-link" data-scroll-target="#project-configuration"><span class="header-section-number">12.6.2</span> Project Configuration</a></li>
  <li><a href="#get-your-api-keys" id="toc-get-your-api-keys" class="nav-link" data-scroll-target="#get-your-api-keys"><span class="header-section-number">12.6.3</span> Get Your API Keys</a></li>
  </ul></li>
  <li><a href="#step-3-set-up-google-oauth" id="toc-step-3-set-up-google-oauth" class="nav-link" data-scroll-target="#step-3-set-up-google-oauth"><span class="header-section-number">12.7</span> Step 3: Set Up Google OAuth</a>
  <ul class="collapse">
  <li><a href="#create-google-cloud-project" id="toc-create-google-cloud-project" class="nav-link" data-scroll-target="#create-google-cloud-project"><span class="header-section-number">12.7.1</span> Create Google Cloud Project</a></li>
  <li><a href="#configure-oauth-consent-screen" id="toc-configure-oauth-consent-screen" class="nav-link" data-scroll-target="#configure-oauth-consent-screen"><span class="header-section-number">12.7.2</span> Configure OAuth Consent Screen</a></li>
  <li><a href="#get-oauth-credentials" id="toc-get-oauth-credentials" class="nav-link" data-scroll-target="#get-oauth-credentials"><span class="header-section-number">12.7.3</span> Get OAuth Credentials</a></li>
  <li><a href="#configure-in-supabase" id="toc-configure-in-supabase" class="nav-link" data-scroll-target="#configure-in-supabase"><span class="header-section-number">12.7.4</span> Configure in Supabase</a></li>
  </ul></li>
  <li><a href="#step-4-set-up-openai-api" id="toc-step-4-set-up-openai-api" class="nav-link" data-scroll-target="#step-4-set-up-openai-api"><span class="header-section-number">12.8</span> Step 4: Set Up OpenAI API</a>
  <ul class="collapse">
  <li><a href="#create-openai-account" id="toc-create-openai-account" class="nav-link" data-scroll-target="#create-openai-account"><span class="header-section-number">12.8.1</span> Create OpenAI Account</a></li>
  <li><a href="#generate-api-key" id="toc-generate-api-key" class="nav-link" data-scroll-target="#generate-api-key"><span class="header-section-number">12.8.2</span> Generate API Key</a></li>
  <li><a href="#store-as-supabase-secret" id="toc-store-as-supabase-secret" class="nav-link" data-scroll-target="#store-as-supabase-secret"><span class="header-section-number">12.8.3</span> Store as Supabase Secret</a></li>
  </ul></li>
  <li><a href="#step-5-set-up-stripe" id="toc-step-5-set-up-stripe" class="nav-link" data-scroll-target="#step-5-set-up-stripe"><span class="header-section-number">12.9</span> Step 5: Set Up Stripe</a>
  <ul class="collapse">
  <li><a href="#create-stripe-account" id="toc-create-stripe-account" class="nav-link" data-scroll-target="#create-stripe-account"><span class="header-section-number">12.9.1</span> Create Stripe Account</a></li>
  <li><a href="#get-api-keys" id="toc-get-api-keys" class="nav-link" data-scroll-target="#get-api-keys"><span class="header-section-number">12.9.2</span> Get API Keys</a></li>
  <li><a href="#create-a-product" id="toc-create-a-product" class="nav-link" data-scroll-target="#create-a-product"><span class="header-section-number">12.9.3</span> Create a Product</a></li>
  <li><a href="#get-webhook-signing-secret" id="toc-get-webhook-signing-secret" class="nav-link" data-scroll-target="#get-webhook-signing-secret"><span class="header-section-number">12.9.4</span> Get Webhook Signing Secret</a></li>
  </ul></li>
  <li><a href="#step-6-set-up-supabase-database" id="toc-step-6-set-up-supabase-database" class="nav-link" data-scroll-target="#step-6-set-up-supabase-database"><span class="header-section-number">12.10</span> Step 6: Set Up Supabase Database</a>
  <ul class="collapse">
  <li><a href="#run-database-migrations" id="toc-run-database-migrations" class="nav-link" data-scroll-target="#run-database-migrations"><span class="header-section-number">12.10.1</span> Run Database Migrations</a></li>
  <li><a href="#database-structure" id="toc-database-structure" class="nav-link" data-scroll-target="#database-structure"><span class="header-section-number">12.10.2</span> Database Structure</a></li>
  <li><a href="#enable-row-level-security-rls" id="toc-enable-row-level-security-rls" class="nav-link" data-scroll-target="#enable-row-level-security-rls"><span class="header-section-number">12.10.3</span> Enable Row Level Security (RLS)</a></li>
  </ul></li>
  <li><a href="#step-7-set-up-storage" id="toc-step-7-set-up-storage" class="nav-link" data-scroll-target="#step-7-set-up-storage"><span class="header-section-number">12.11</span> Step 7: Set Up Storage</a>
  <ul class="collapse">
  <li><a href="#create-storage-bucket" id="toc-create-storage-bucket" class="nav-link" data-scroll-target="#create-storage-bucket"><span class="header-section-number">12.11.1</span> Create Storage Bucket</a></li>
  <li><a href="#configure-bucket-settings" id="toc-configure-bucket-settings" class="nav-link" data-scroll-target="#configure-bucket-settings"><span class="header-section-number">12.11.2</span> Configure Bucket Settings</a></li>
  <li><a href="#set-storage-policies" id="toc-set-storage-policies" class="nav-link" data-scroll-target="#set-storage-policies"><span class="header-section-number">12.11.3</span> Set Storage Policies</a></li>
  </ul></li>
  <li><a href="#step-8-deploy-edge-functions" id="toc-step-8-deploy-edge-functions" class="nav-link" data-scroll-target="#step-8-deploy-edge-functions"><span class="header-section-number">12.12</span> Step 8: Deploy Edge Functions</a>
  <ul class="collapse">
  <li><a href="#understanding-edge-functions" id="toc-understanding-edge-functions" class="nav-link" data-scroll-target="#understanding-edge-functions"><span class="header-section-number">12.12.1</span> Understanding Edge Functions</a></li>
  <li><a href="#the-three-functions" id="toc-the-three-functions" class="nav-link" data-scroll-target="#the-three-functions"><span class="header-section-number">12.12.2</span> The Three Functions</a></li>
  <li><a href="#deploy-the-functions" id="toc-deploy-the-functions" class="nav-link" data-scroll-target="#deploy-the-functions"><span class="header-section-number">12.12.3</span> Deploy the Functions</a></li>
  <li><a href="#verify-deployment" id="toc-verify-deployment" class="nav-link" data-scroll-target="#verify-deployment"><span class="header-section-number">12.12.4</span> Verify Deployment</a></li>
  <li><a href="#configure-stripe-webhook" id="toc-configure-stripe-webhook" class="nav-link" data-scroll-target="#configure-stripe-webhook"><span class="header-section-number">12.12.5</span> Configure Stripe Webhook</a></li>
  <li><a href="#update-stripe-webhook-url" id="toc-update-stripe-webhook-url" class="nav-link" data-scroll-target="#update-stripe-webhook-url"><span class="header-section-number">12.12.6</span> Update Stripe Webhook URL</a></li>
  </ul></li>
  <li><a href="#step-9-run-the-application" id="toc-step-9-run-the-application" class="nav-link" data-scroll-target="#step-9-run-the-application"><span class="header-section-number">12.13</span> Step 9: Run the Application</a>
  <ul class="collapse">
  <li><a href="#start-the-development-server" id="toc-start-the-development-server" class="nav-link" data-scroll-target="#start-the-development-server"><span class="header-section-number">12.13.1</span> Start the Development Server</a></li>
  <li><a href="#test-core-functionality" id="toc-test-core-functionality" class="nav-link" data-scroll-target="#test-core-functionality"><span class="header-section-number">12.13.2</span> Test Core Functionality</a></li>
  </ul></li>
  <li><a href="#deployment-to-production" id="toc-deployment-to-production" class="nav-link" data-scroll-target="#deployment-to-production"><span class="header-section-number">12.14</span> Deployment to Production</a>
  <ul class="collapse">
  <li><a href="#deploying-the-frontend" id="toc-deploying-the-frontend" class="nav-link" data-scroll-target="#deploying-the-frontend"><span class="header-section-number">12.14.1</span> Deploying the Frontend</a></li>
  <li><a href="#update-environment-variables" id="toc-update-environment-variables" class="nav-link" data-scroll-target="#update-environment-variables"><span class="header-section-number">12.14.2</span> Update Environment Variables</a></li>
  </ul></li>
  <li><a href="#project-structure" id="toc-project-structure" class="nav-link" data-scroll-target="#project-structure"><span class="header-section-number">12.15</span> Project Structure</a></li>
  <li><a href="#testing" id="toc-testing" class="nav-link" data-scroll-target="#testing"><span class="header-section-number">12.16</span> Testing</a>
  <ul class="collapse">
  <li><a href="#integration-tests" id="toc-integration-tests" class="nav-link" data-scroll-target="#integration-tests"><span class="header-section-number">12.16.1</span> Integration Tests</a></li>
  <li><a href="#set-up-test-environment" id="toc-set-up-test-environment" class="nav-link" data-scroll-target="#set-up-test-environment"><span class="header-section-number">12.16.2</span> Set Up Test Environment</a></li>
  <li><a href="#run-tests" id="toc-run-tests" class="nav-link" data-scroll-target="#run-tests"><span class="header-section-number">12.16.3</span> Run Tests</a></li>
  </ul></li>
  <li><a href="#troubleshooting" id="toc-troubleshooting" class="nav-link" data-scroll-target="#troubleshooting"><span class="header-section-number">12.17</span> Troubleshooting</a>
  <ul class="collapse">
  <li><a href="#common-issues" id="toc-common-issues" class="nav-link" data-scroll-target="#common-issues"><span class="header-section-number">12.17.1</span> Common Issues</a></li>
  </ul></li>
  <li><a href="#next-steps" id="toc-next-steps" class="nav-link" data-scroll-target="#next-steps"><span class="header-section-number">12.18</span> Next Steps</a>
  <ul class="collapse">
  <li><a href="#further-learning" id="toc-further-learning" class="nav-link" data-scroll-target="#further-learning"><span class="header-section-number">12.18.1</span> Further Learning</a></li>
  <li><a href="#extending-the-project" id="toc-extending-the-project" class="nav-link" data-scroll-target="#extending-the-project"><span class="header-section-number">12.18.2</span> Extending the Project</a></li>
  </ul></li>
  <li><a href="#additional-resources" id="toc-additional-resources" class="nav-link" data-scroll-target="#additional-resources"><span class="header-section-number">12.19</span> Additional Resources</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="header-section-number">12.20</span> Conclusion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./001000-tutorial-supabase-nextjs-v001.html">Building with Next and Supabase</a></li><li class="breadcrumb-item"><a href="./001100-tutorial-supabase-nextjs-intro-v001.html"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title"><yrchapternumber>12. </yrchapternumber> Tutorial - step by step</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title"><yrchapternumber>12. </yrchapternumber> Tutorial - step by step</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="overview" class="level2" data-number="12.1">
<h2 data-number="12.1" class="anchored" data-anchor-id="overview"><span class="header-section-number">12.1</span> Overview</h2>
<p>This tutorial will guide you through setting up a complete full-stack SaaS application using Next.js and Supabase. By the end, you’ll have a task management application with authentication, AI features, image uploads, and payment processing.</p>
<section id="what-youll-build" class="level3" data-number="12.1.1">
<h3 data-number="12.1.1" class="anchored" data-anchor-id="what-youll-build"><span class="header-section-number">12.1.1</span> What You’ll Build</h3>
<p>A task management application with the following features:</p>
<ul>
<li>User authentication (including Google OAuth)</li>
<li>Task creation and editing</li>
<li>Automatic AI-powered task labeling</li>
<li>Image attachments for tasks</li>
<li>User profiles with task statistics</li>
<li>Monthly subscription plans with Stripe payments</li>
</ul>
<p>The video assumes knowledge of things that you might not be familiar with. Don’t worry, the step by step walkthrough on this website will walk you through the harder parts and explain many concepts along the way that the video does not explain. We will describe what you will need to understand in order to work with an AI in the following domains.</p>
<ul>
<li>JavaScript/TypeScript</li>
<li>React and Next.js</li>
<li>PostgreSQL and Supabase</li>
<li>REST APIs and HTTP requests</li>
</ul>
</section>
</section>
<section id="project-architecture" class="level2" data-number="12.2">
<h2 data-number="12.2" class="anchored" data-anchor-id="project-architecture"><span class="header-section-number">12.2</span> Project Architecture</h2>
<section id="tech-stack" class="level3" data-number="12.2.1">
<h3 data-number="12.2.1" class="anchored" data-anchor-id="tech-stack"><span class="header-section-number">12.2.1</span> Tech Stack</h3>
<p><strong>Frontend:</strong></p>
<ul>
<li>Next.js (fully static app)</li>
<li>Client library for Supabase integration</li>
</ul>
<p><strong>Backend (Supabase):</strong></p>
<ul>
<li>PostgreSQL database</li>
<li>Storage system (similar to Amazon S3)</li>
<li>Edge functions (TypeScript in Deno environment)</li>
<li>Built-in authentication system</li>
</ul>
<p><strong>Third-Party Services:</strong></p>
<ul>
<li>Google Cloud (for OAuth)</li>
<li>OpenAI (for AI labeling)</li>
<li>Stripe (for payment processing)</li>
</ul>
</section>
<section id="hosting-options" class="level3" data-number="12.2.2">
<h3 data-number="12.2.2" class="anchored" data-anchor-id="hosting-options"><span class="header-section-number">12.2.2</span> Hosting Options</h3>
<p><strong>Supabase Cloud (Recommended):</strong></p>
<ul>
<li>Free tier available (perfect for this project)</li>
<li>Easy to set up</li>
<li>$25/month for the next tier with expanded resources</li>
</ul>
<p><strong>Self-Hosted:</strong></p>
<ul>
<li>Completely open source</li>
<li>Can deploy to AWS, GCP, or your own infrastructure</li>
<li>More complex to manage (not recommended for beginners)</li>
</ul>
</section>
</section>
<section id="setup-checklist" class="level2" data-number="12.3">
<h2 data-number="12.3" class="anchored" data-anchor-id="setup-checklist"><span class="header-section-number">12.3</span> Setup Checklist</h2>
<ul class="task-list">
<li><label><input type="checkbox">Clone the project from GitHub</label></li>
<li><label><input type="checkbox">Create Supabase project</label></li>
<li><label><input type="checkbox">Set up Google OAuth</label></li>
<li><label><input type="checkbox">Configure OpenAI API</label></li>
<li><label><input type="checkbox">Set up Stripe</label></li>
<li><label><input type="checkbox">Deploy edge functions</label></li>
<li><label><input type="checkbox">Test the application</label></li>
</ul>
</section>
<section id="step-0-install-node-and-hence-npm" class="level2" data-number="12.4">
<h2 data-number="12.4" class="anchored" data-anchor-id="step-0-install-node-and-hence-npm"><span class="header-section-number">12.4</span> Step 0: Install Node (and hence npm)</h2>
<p>You will need to use the <code>npm</code> (Node Package Manager) tool that comes with the Node.js software. Node.js is software that allows you to run JavaScript programs outside of a browser.</p>
<p>There are many Javascript “packages” that are available online. These packages are simply collections of pre-built Javascript code that offer Javascript functions and features for various scenarios. These are very similar in concept to the packages that are available for the “R” language.</p>
<p>To install the Node.js packages on your computer you use a tool named npm (stand for “node package manager”).</p>
<p>Try typing <code>npm -v</code> at the Terminal prompt. If npm is already installed you should see the version number. It npm is not installed you should install <code>nodejs</code> from here - <a href="https://nodejs.org/en/download" class="uri">https://nodejs.org/en/download</a>. (nodejs includes the npm tool).</p>
<p>After you’ve installed nodejs</p>
<ul>
<li>shut your original Terminal</li>
<li>open a new Terminal window and try running <code>npm -v</code>. You should see the version number for npm. If that worked great - otherwise try to figure out how to use npm with the help of your favorite AI (or knowledgeable human).</li>
</ul>
</section>
<section id="step-1-clone-and-install-the-project" class="level2" data-number="12.5">
<h2 data-number="12.5" class="anchored" data-anchor-id="step-1-clone-and-install-the-project"><span class="header-section-number">12.5</span> Step 1: Clone and Install the Project</h2>
<section id="download-the-code" class="level3" data-number="12.5.1">
<h3 data-number="12.5.1" class="anchored" data-anchor-id="download-the-code"><span class="header-section-number">12.5.1</span> Download the Code</h3>
<p>The GitHub link for this project is available in the original video description.</p>
<ol type="1">
<li><p>Clone the repository to your local machine</p>
<ul>
<li>Go to <a href="https://github.com/pixegami/task-app" class="uri">https://github.com/pixegami/task-app</a></li>
<li>Click the “fork” button to create your own copy of the repo.</li>
<li>Then go to your own github repo and copy YOUR copy’s URL.</li>
<li>Open your Terminal and type <code>git clone URL_FOR_YOUR_REPO</code> to create a new folder with your own copy of the repo.</li>
</ul></li>
<li><p>Open the project in your terminal</p></li>
<li><p>The file <code>package.json</code> contains a list of “node packages” (AKA modules) that need to be installed for this project. You need to run the following command to do so. This command will create a new folder named “node_modules” and download the code for each package (AKA module) into that folder. Run the following command now. <strong>Note:</strong> You may see some deprecation warnings, which are normal.</p></li>
</ol>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="create-environment-files" class="level3" data-number="12.5.2">
<h3 data-number="12.5.2" class="anchored" data-anchor-id="create-environment-files"><span class="header-section-number">12.5.2</span> Create Environment Files</h3>
<p>You need to create two local <code>.env</code> files for environment variables. These files will contain API keys and configuration that you’ll add throughout this tutorial. Note that the <strong>File names must be exact:</strong></p>
<ul>
<li><p><code>.env.local</code> - for the Next.js application. Run the following command to create that file:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> .env.example .env.local</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p><code>supabase/.env</code> - for Supabase functions</p></li>
</ul>
<p>Run the following code to create those files from the included .env.example file.</p>
<!-- ORIGINAL HIDDEN - my changes below
```bash
# Copy from the example file
cp example.env .env.local
cp example.env supabase/.env
```
-->
<div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Copy from the example file</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> .env.example .env.local</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> .env.example supabase/.env</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="optional-preview-the-frontend" class="level3" data-number="12.5.3">
<h3 data-number="12.5.3" class="anchored" data-anchor-id="optional-preview-the-frontend"><span class="header-section-number">12.5.3</span> Optional: Preview the Frontend</h3>
<p>If you want to see the frontend before connecting the backend:</p>
<ol type="1">
<li><p>Go to the GitHub repository commits tab</p></li>
<li><p>Scroll to the bottom and find the commit labeled “front end boilerplate”</p></li>
<li><p>Copy the commit hash</p></li>
<li><p>Check out that specific commit:</p>
<ul>
<li>type <code>git -v</code> to see your git version</li>
<li>run ONE of the following command depending on your git version
<ul>
<li>git 2.23 and later: <code>git switch --detach [commit-hash]</code></li>
<li>older versions of git: <code>git checkout [commit-hash]</code></li>
</ul></li>
</ul></li>
<li><p>Run the development server:</p></li>
</ol>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run dev</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This version has placeholder backend logic, allowing you to explore the UI without full functionality.</p>
<ol start="6" type="1">
<li><p>To get back to the latest version of the code run the following:</p>
<ul>
<li>run ONE of the following command depending on your git version
<ul>
<li>git 2.23 and later:
<ul>
<li><code>git switch -</code> or</li>
<li><code>git switch BRANCH_NAME</code> (where BRANCH_NAME is the name of your branch such as master or main)</li>
</ul></li>
<li>older versions of git:
<ul>
<li><code>git checkout -</code> or</li>
<li><code>git checkout BRANCH_NAME</code> (where BRANCH_NAME is the name of your branch such as master or main)</li>
</ul></li>
</ul></li>
</ul></li>
</ol>
</section>
</section>
<section id="step-2-create-a-supabase-project" class="level2" data-number="12.6">
<h2 data-number="12.6" class="anchored" data-anchor-id="step-2-create-a-supabase-project"><span class="header-section-number">12.6</span> Step 2: Create a Supabase Project</h2>
<section id="sign-up-for-supabase" class="level3" data-number="12.6.1">
<h3 data-number="12.6.1" class="anchored" data-anchor-id="sign-up-for-supabase"><span class="header-section-number">12.6.1</span> Sign Up for Supabase</h3>
<ol type="1">
<li>Go to the Supabase website</li>
<li>Sign up for a free account</li>
<li>Create a new project</li>
</ol>
</section>
<section id="project-configuration" class="level3" data-number="12.6.2">
<h3 data-number="12.6.2" class="anchored" data-anchor-id="project-configuration"><span class="header-section-number">12.6.2</span> Project Configuration</h3>
<p>When creating your project, you’ll need to:</p>
<ul>
<li>Choose a project name</li>
<li>Set a database password (save this securely)</li>
<li>Select a region (choose the closest to your users)</li>
</ul>
<p><strong>Important:</strong> Save your database password - you’ll need it later.</p>
</section>
<section id="get-your-api-keys" class="level3" data-number="12.6.3">
<h3 data-number="12.6.3" class="anchored" data-anchor-id="get-your-api-keys"><span class="header-section-number">12.6.3</span> Get Your API Keys</h3>
<p>Once your project is created:</p>
<ol type="1">
<li>Edit the .env.local file. It currently looks like this:</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># You will need a .env.local file for local dev server (localhost)</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># You will need a .env.test.local file for running the integration tests.</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the those files, and add the following variables.</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co"># The local files are ignored by default.</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># In .env.local and .env.test.local:</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="va">NEXT_PUBLIC_SUPABASE_URL</span><span class="op">=</span><span class="st">"https://XXXX.supabase.co"</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="va">NEXT_PUBLIC_SUPABASE_ANON_KEY</span><span class="op">=</span><span class="st">"XXXX"</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co"># In addition to that, you also need .env.test.local with these variables:</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="va">SUPABASE_SERVICE_KEY</span><span class="op">=</span><span class="st">"XXXX"</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="va">STRIPE_SECRET_KEY</span><span class="op">=</span><span class="st">"sk_test_XXX"</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="va">STRIPE_PRICE_ID</span><span class="op">=</span><span class="st">"price_XXX"</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="va">STRIPE_WEBHOOK_SECRET</span><span class="op">=</span><span class="st">"whsec_XXX"</span><span class="kw">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="2" type="1">
<li><p>Delete the bottom few lines and top few lines so that the file now looks like this:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In .env.local and .env.test.local:</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="va">NEXT_PUBLIC_SUPABASE_URL</span><span class="op">=</span><span class="st">"https://XXXX.supabase.co"</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="va">NEXT_PUBLIC_SUPABASE_ANON_KEY</span><span class="op">=</span><span class="st">"XXXX"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Go to Project Settings (Gear button at bottom left of screen) → Data API<br>
Copy the URL.<br>
Modify the following line in the .env.local file to reflect the URL that you copied.</p>
<pre><code>NEXT_PUBLIC_SUPABASE_URL="https://XXXX.supabase.co"</code></pre></li>
<li><p>Click on the <code>API Keys</code> section.<br>
Copy the <code>anon public</code> key. Modify the following line in the .env.local file to reflect the URL that you copied.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="va">NEXT_PUBLIC_SUPABASE_ANON_KEY</span><span class="op">=</span><span class="st">"XXXX"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Add these to your <code>.env.local</code> file:</p></li>
</ol>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="va">NEXT_PUBLIC_SUPABASE_URL</span><span class="op">=</span>your-project-url</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="va">NEXT_PUBLIC_SUPABASE_ANON_KEY</span><span class="op">=</span>your-anon-key</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="step-3-set-up-google-oauth" class="level2" data-number="12.7">
<h2 data-number="12.7" class="anchored" data-anchor-id="step-3-set-up-google-oauth"><span class="header-section-number">12.7</span> Step 3: Set Up Google OAuth</h2>
<section id="create-google-cloud-project" class="level3" data-number="12.7.1">
<h3 data-number="12.7.1" class="anchored" data-anchor-id="create-google-cloud-project"><span class="header-section-number">12.7.1</span> Create Google Cloud Project</h3>
<ol type="1">
<li>Go to Google Cloud Console</li>
<li>Create a new project</li>
<li>Navigate to APIs &amp; Services → Credentials</li>
<li>Create OAuth 2.0 credentials</li>
</ol>
</section>
<section id="configure-oauth-consent-screen" class="level3" data-number="12.7.2">
<h3 data-number="12.7.2" class="anchored" data-anchor-id="configure-oauth-consent-screen"><span class="header-section-number">12.7.2</span> Configure OAuth Consent Screen</h3>
<ol type="1">
<li>Set up the OAuth consent screen</li>
<li>Add your application details</li>
<li>Add authorized domains</li>
</ol>
</section>
<section id="get-oauth-credentials" class="level3" data-number="12.7.3">
<h3 data-number="12.7.3" class="anchored" data-anchor-id="get-oauth-credentials"><span class="header-section-number">12.7.3</span> Get OAuth Credentials</h3>
<ol type="1">
<li>Create OAuth 2.0 Client ID</li>
<li>Set application type to “Web application”</li>
<li>Add authorized redirect URIs:
<ul>
<li>Add your Supabase project callback URL</li>
<li>Format: <code>https://[your-project-ref].supabase.co/auth/v1/callback</code></li>
</ul></li>
<li>Copy your Client ID and Client Secret</li>
</ol>
</section>
<section id="configure-in-supabase" class="level3" data-number="12.7.4">
<h3 data-number="12.7.4" class="anchored" data-anchor-id="configure-in-supabase"><span class="header-section-number">12.7.4</span> Configure in Supabase</h3>
<ol type="1">
<li>Go to your Supabase dashboard</li>
<li>Navigate to Authentication → Providers</li>
<li>Enable Google provider</li>
<li>Enter your Client ID and Client Secret</li>
<li>Save the configuration</li>
</ol>
</section>
</section>
<section id="step-4-set-up-openai-api" class="level2" data-number="12.8">
<h2 data-number="12.8" class="anchored" data-anchor-id="step-4-set-up-openai-api"><span class="header-section-number">12.8</span> Step 4: Set Up OpenAI API</h2>
<section id="create-openai-account" class="level3" data-number="12.8.1">
<h3 data-number="12.8.1" class="anchored" data-anchor-id="create-openai-account"><span class="header-section-number">12.8.1</span> Create OpenAI Account</h3>
<ol type="1">
<li>Go to OpenAI Platform</li>
<li>Sign up or log in to your account</li>
<li>Navigate to API Keys section</li>
</ol>
</section>
<section id="generate-api-key" class="level3" data-number="12.8.2">
<h3 data-number="12.8.2" class="anchored" data-anchor-id="generate-api-key"><span class="header-section-number">12.8.2</span> Generate API Key</h3>
<ol type="1">
<li>Create a new API key</li>
<li>Copy the key immediately (you won’t be able to see it again)</li>
<li>Store it securely</li>
</ol>
</section>
<section id="store-as-supabase-secret" class="level3" data-number="12.8.3">
<h3 data-number="12.8.3" class="anchored" data-anchor-id="store-as-supabase-secret"><span class="header-section-number">12.8.3</span> Store as Supabase Secret</h3>
<p>The OpenAI API key needs to be stored as a Supabase secret for use in edge functions:</p>
<ol type="1">
<li>Install Supabase CLI if you haven’t already</li>
<li>Link your project:</li>
</ol>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">supabase</span> link <span class="at">--project-ref</span> <span class="pp">[</span><span class="ss">your</span><span class="pp">-</span><span class="ss">project</span><span class="pp">-</span><span class="ss">ref</span><span class="pp">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="3" type="1">
<li>Set the secret:</li>
</ol>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">supabase</span> secrets set OPENAI_API_KEY=your-openai-key</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="step-5-set-up-stripe" class="level2" data-number="12.9">
<h2 data-number="12.9" class="anchored" data-anchor-id="step-5-set-up-stripe"><span class="header-section-number">12.9</span> Step 5: Set Up Stripe</h2>
<section id="create-stripe-account" class="level3" data-number="12.9.1">
<h3 data-number="12.9.1" class="anchored" data-anchor-id="create-stripe-account"><span class="header-section-number">12.9.1</span> Create Stripe Account</h3>
<ol type="1">
<li>Go to Stripe’s website</li>
<li>Sign up for an account</li>
<li>Switch to Test Mode (top right toggle)</li>
</ol>
</section>
<section id="get-api-keys" class="level3" data-number="12.9.2">
<h3 data-number="12.9.2" class="anchored" data-anchor-id="get-api-keys"><span class="header-section-number">12.9.2</span> Get API Keys</h3>
<ol type="1">
<li>Navigate to Developers → API Keys</li>
<li>Copy both:
<ul>
<li>Publishable key (starts with <code>pk_test_</code>)</li>
<li>Secret key (starts with <code>sk_test_</code>)</li>
</ul></li>
<li>Add to your <code>.env.local</code>:</li>
</ol>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="va">NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY</span><span class="op">=</span>your-publishable-key</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="4" type="1">
<li>Store the secret key in Supabase:</li>
</ol>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">supabase</span> secrets set STRIPE_SECRET_KEY=your-secret-key</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="create-a-product" class="level3" data-number="12.9.3">
<h3 data-number="12.9.3" class="anchored" data-anchor-id="create-a-product"><span class="header-section-number">12.9.3</span> Create a Product</h3>
<ol type="1">
<li>Go to Stripe Dashboard → Products</li>
<li>Create a new product for your subscription</li>
<li>Set up pricing:
<ul>
<li>Monthly recurring payment</li>
<li>Set your price (e.g., $10/month)</li>
</ul></li>
<li>Copy the Price ID (starts with <code>price_</code>)</li>
</ol>
</section>
<section id="get-webhook-signing-secret" class="level3" data-number="12.9.4">
<h3 data-number="12.9.4" class="anchored" data-anchor-id="get-webhook-signing-secret"><span class="header-section-number">12.9.4</span> Get Webhook Signing Secret</h3>
<ol type="1">
<li>Go to Developers → Webhooks</li>
<li>Add an endpoint (you’ll update this URL later)</li>
<li>Select events to listen to:
<ul>
<li><code>checkout.session.completed</code></li>
<li><code>customer.subscription.updated</code></li>
<li><code>customer.subscription.deleted</code></li>
</ul></li>
<li>Copy the Webhook Signing Secret</li>
<li>Store it in Supabase:</li>
</ol>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">supabase</span> secrets set STRIPE_WEBHOOK_SECRET=your-webhook-secret</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="step-6-set-up-supabase-database" class="level2" data-number="12.10">
<h2 data-number="12.10" class="anchored" data-anchor-id="step-6-set-up-supabase-database"><span class="header-section-number">12.10</span> Step 6: Set Up Supabase Database</h2>
<section id="run-database-migrations" class="level3" data-number="12.10.1">
<h3 data-number="12.10.1" class="anchored" data-anchor-id="run-database-migrations"><span class="header-section-number">12.10.1</span> Run Database Migrations</h3>
<p>The project includes migration files that will set up your database schema.</p>
<ol type="1">
<li>Make sure you’re in the project root directory</li>
<li>Run the migrations:</li>
</ol>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">supabase</span> db push</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This will create all necessary tables and configurations.</p>
</section>
<section id="database-structure" class="level3" data-number="12.10.2">
<h3 data-number="12.10.2" class="anchored" data-anchor-id="database-structure"><span class="header-section-number">12.10.2</span> Database Structure</h3>
<p>The migrations create the following main tables:</p>
<ul>
<li><strong>users</strong> - Stores user account information</li>
<li><strong>tasks</strong> - Stores task data with fields for title, description, label, and image</li>
<li><strong>user_subscriptions</strong> - Tracks subscription status</li>
</ul>
</section>
<section id="enable-row-level-security-rls" class="level3" data-number="12.10.3">
<h3 data-number="12.10.3" class="anchored" data-anchor-id="enable-row-level-security-rls"><span class="header-section-number">12.10.3</span> Enable Row Level Security (RLS)</h3>
<p>The migrations automatically set up Row Level Security policies to ensure:</p>
<ul>
<li>Users can only see their own tasks</li>
<li>Users can only modify their own data</li>
<li>Proper authentication is enforced</li>
</ul>
</section>
</section>
<section id="step-7-set-up-storage" class="level2" data-number="12.11">
<h2 data-number="12.11" class="anchored" data-anchor-id="step-7-set-up-storage"><span class="header-section-number">12.11</span> Step 7: Set Up Storage</h2>
<section id="create-storage-bucket" class="level3" data-number="12.11.1">
<h3 data-number="12.11.1" class="anchored" data-anchor-id="create-storage-bucket"><span class="header-section-number">12.11.1</span> Create Storage Bucket</h3>
<ol type="1">
<li>Go to your Supabase dashboard</li>
<li>Navigate to Storage</li>
<li>Create a new bucket named “task-images”</li>
</ol>
</section>
<section id="configure-bucket-settings" class="level3" data-number="12.11.2">
<h3 data-number="12.11.2" class="anchored" data-anchor-id="configure-bucket-settings"><span class="header-section-number">12.11.2</span> Configure Bucket Settings</h3>
<p><strong>File size limit:</strong></p>
<ul>
<li>Set maximum file size to 1 MB</li>
</ul>
<p><strong>Allowed file types:</strong></p>
<ul>
<li>Configure to accept only images (JPEG, PNG, GIF, WebP)</li>
</ul>
<p><strong>Access settings:</strong></p>
<ul>
<li>For this tutorial, the bucket is set to public</li>
<li>Public means anyone with the URL can view the image</li>
<li>For production, consider making it private for better security</li>
</ul>
</section>
<section id="set-storage-policies" class="level3" data-number="12.11.3">
<h3 data-number="12.11.3" class="anchored" data-anchor-id="set-storage-policies"><span class="header-section-number">12.11.3</span> Set Storage Policies</h3>
<p>The storage policies should allow:</p>
<ul>
<li>Authenticated users to upload images</li>
<li>Anyone to read images (if public)</li>
<li>Users to delete their own images</li>
</ul>
</section>
</section>
<section id="step-8-deploy-edge-functions" class="level2" data-number="12.12">
<h2 data-number="12.12" class="anchored" data-anchor-id="step-8-deploy-edge-functions"><span class="header-section-number">12.12</span> Step 8: Deploy Edge Functions</h2>
<section id="understanding-edge-functions" class="level3" data-number="12.12.1">
<h3 data-number="12.12.1" class="anchored" data-anchor-id="understanding-edge-functions"><span class="header-section-number">12.12.1</span> Understanding Edge Functions</h3>
<p>Edge functions are custom serverless functions that run on demand in response to HTTP requests. They allow you to run backend code without managing servers.</p>
<p><strong>Location in project:</strong> <code>supabase/functions/</code></p>
</section>
<section id="the-three-functions" class="level3" data-number="12.12.2">
<h3 data-number="12.12.2" class="anchored" data-anchor-id="the-three-functions"><span class="header-section-number">12.12.2</span> The Three Functions</h3>
<p><strong>1. createTaskWithAI</strong></p>
<ul>
<li>Creates a new task in the database</li>
<li>Uses OpenAI to automatically assign a label based on the task title</li>
<li>Updates the task with the AI-generated label</li>
</ul>
<p><strong>2. createStripeSession</strong></p>
<ul>
<li>Generates Stripe checkout URLs</li>
<li>Returns either a checkout session (for new subscriptions) or customer portal (for existing customers)</li>
<li>Used when users click “Manage Subscription”</li>
</ul>
<p><strong>3. stripe-webhook</strong></p>
<ul>
<li>Receives event notifications from Stripe</li>
<li>Handles subscription status changes</li>
<li>Updates user premium status in the database</li>
</ul>
</section>
<section id="deploy-the-functions" class="level3" data-number="12.12.3">
<h3 data-number="12.12.3" class="anchored" data-anchor-id="deploy-the-functions"><span class="header-section-number">12.12.3</span> Deploy the Functions</h3>
<p>From your project root, deploy each function:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Deploy the AI task creation function</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="ex">supabase</span> functions deploy createTaskWithAI</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Deploy the Stripe session function</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="ex">supabase</span> functions deploy createStripeSession</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Deploy the webhook function</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="ex">supabase</span> functions deploy stripe-webhook</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="verify-deployment" class="level3" data-number="12.12.4">
<h3 data-number="12.12.4" class="anchored" data-anchor-id="verify-deployment"><span class="header-section-number">12.12.4</span> Verify Deployment</h3>
<ol type="1">
<li>Go to your Supabase dashboard</li>
<li>Click on “Edge Functions”</li>
<li>Confirm all three functions are listed</li>
<li>Click on each function to access metrics and logs for debugging</li>
</ol>
</section>
<section id="configure-stripe-webhook" class="level3" data-number="12.12.5">
<h3 data-number="12.12.5" class="anchored" data-anchor-id="configure-stripe-webhook"><span class="header-section-number">12.12.5</span> Configure Stripe Webhook</h3>
<p><strong>Important:</strong> The Stripe webhook function needs special configuration:</p>
<ol type="1">
<li>Click on the <code>stripe-webhook</code> function</li>
<li>Go to “Details”</li>
<li>Scroll to “Function Configuration”</li>
<li><strong>Disable</strong> “Enforce JWT verification”</li>
<li>Click “Save”</li>
</ol>
<p><strong>Why?</strong> This function is called by Stripe (not authenticated users), so JWT verification must be disabled.</p>
</section>
<section id="update-stripe-webhook-url" class="level3" data-number="12.12.6">
<h3 data-number="12.12.6" class="anchored" data-anchor-id="update-stripe-webhook-url"><span class="header-section-number">12.12.6</span> Update Stripe Webhook URL</h3>
<p>Now that your function is deployed, update Stripe with the actual endpoint:</p>
<ol type="1">
<li><p>Go to Stripe Dashboard → Developers → Webhooks</p></li>
<li><p>Click on your webhook endpoint</p></li>
<li><p>Update the URL to:</p>
<pre><code>https://[your-project-ref].supabase.co/functions/v1/stripe-webhook</code></pre></li>
</ol>
</section>
</section>
<section id="step-9-run-the-application" class="level2" data-number="12.13">
<h2 data-number="12.13" class="anchored" data-anchor-id="step-9-run-the-application"><span class="header-section-number">12.13</span> Step 9: Run the Application</h2>
<section id="start-the-development-server" class="level3" data-number="12.13.1">
<h3 data-number="12.13.1" class="anchored" data-anchor-id="start-the-development-server"><span class="header-section-number">12.13.1</span> Start the Development Server</h3>
<p>From your project root:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run dev</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The application should start and display a local URL (usually <code>http://localhost:3000</code>).</p>
</section>
<section id="test-core-functionality" class="level3" data-number="12.13.2">
<h3 data-number="12.13.2" class="anchored" data-anchor-id="test-core-functionality"><span class="header-section-number">12.13.2</span> Test Core Functionality</h3>
<p><strong>1. Authentication</strong></p>
<ul>
<li>Click to log in with Google</li>
<li>Verify successful authentication</li>
<li>Check that you’re redirected to the dashboard</li>
</ul>
<p><strong>2. Task Management</strong></p>
<ul>
<li>Create a new task with a title and description</li>
<li>Confirm that an appropriate label is automatically assigned by AI</li>
<li>Verify the task appears in your dashboard</li>
</ul>
<p><strong>3. Image Uploads</strong></p>
<ul>
<li>Click to edit a task</li>
<li>Upload an image attachment</li>
<li>Verify the image is displayed correctly</li>
</ul>
<p><strong>4. User Profile</strong></p>
<ul>
<li>Navigate to your profile page</li>
<li>Confirm your task count is tracked correctly</li>
</ul>
<p><strong>5. Subscription Management</strong></p>
<ul>
<li>Click “Manage Subscription”</li>
<li>Verify you’re taken to a Stripe checkout page</li>
<li>Test the checkout flow (use Stripe test card: 4242 4242 4242 4242)</li>
</ul>
<p><strong>6. Sign Out</strong></p>
<ul>
<li>Test the sign out functionality</li>
<li>Confirm you’re redirected to the login page</li>
</ul>
</section>
</section>
<section id="deployment-to-production" class="level2" data-number="12.14">
<h2 data-number="12.14" class="anchored" data-anchor-id="deployment-to-production"><span class="header-section-number">12.14</span> Deployment to Production</h2>
<section id="deploying-the-frontend" class="level3" data-number="12.14.1">
<h3 data-number="12.14.1" class="anchored" data-anchor-id="deploying-the-frontend"><span class="header-section-number">12.14.1</span> Deploying the Frontend</h3>
<p><strong>Recommended: Vercel</strong></p>
<p>This is a static Next.js website, making it easy to deploy:</p>
<ol type="1">
<li>Push your code to GitHub</li>
<li>Import the project in Vercel</li>
<li>Add your environment variables</li>
<li>Deploy</li>
</ol>
<p><strong>Alternative Options:</strong></p>
<ul>
<li>Netlify</li>
<li>AWS Amplify</li>
<li>Any static hosting service</li>
</ul>
</section>
<section id="update-environment-variables" class="level3" data-number="12.14.2">
<h3 data-number="12.14.2" class="anchored" data-anchor-id="update-environment-variables"><span class="header-section-number">12.14.2</span> Update Environment Variables</h3>
<p>For production, you’ll need to:</p>
<ul>
<li>Update Supabase project URL and keys</li>
<li>Switch Stripe from test mode to live mode</li>
<li>Update OAuth redirect URIs</li>
<li>Configure production domains</li>
</ul>
</section>
</section>
<section id="project-structure" class="level2" data-number="12.15">
<h2 data-number="12.15" class="anchored" data-anchor-id="project-structure"><span class="header-section-number">12.15</span> Project Structure</h2>
<p>Understanding where to make changes:</p>
<pre><code>├── app/                    # Next.js pages and routes
├── components/            # React UI components
├── hooks/                 # Client logic and Supabase integration
├── supabase/
│   ├── functions/        # Edge functions (backend logic)
│   └── migrations/       # Database schema and configurations
└── tests/
    └── integration/      # Integration test suite</code></pre>
<p><strong>To extend functionality:</strong></p>
<ul>
<li><strong>UI changes:</strong> Edit files in <code>app/</code> and <code>components/</code></li>
<li><strong>Client logic:</strong> Modify hooks in <code>hooks/</code></li>
<li><strong>Backend logic:</strong> Update functions in <code>supabase/functions/</code></li>
<li><strong>Database changes:</strong> Create new migrations in <code>supabase/migrations/</code></li>
</ul>
</section>
<section id="testing" class="level2" data-number="12.16">
<h2 data-number="12.16" class="anchored" data-anchor-id="testing"><span class="header-section-number">12.16</span> Testing</h2>
<section id="integration-tests" class="level3" data-number="12.16.1">
<h3 data-number="12.16.1" class="anchored" data-anchor-id="integration-tests"><span class="header-section-number">12.16.1</span> Integration Tests</h3>
<p>The project includes a comprehensive integration test suite that connects to your real Supabase project.</p>
</section>
<section id="set-up-test-environment" class="level3" data-number="12.16.2">
<h3 data-number="12.16.2" class="anchored" data-anchor-id="set-up-test-environment"><span class="header-section-number">12.16.2</span> Set Up Test Environment</h3>
<ol type="1">
<li>Create a test environment file:</li>
</ol>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> example.env tests/.env.test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="2" type="1">
<li>Update with your API keys and credentials</li>
</ol>
</section>
<section id="run-tests" class="level3" data-number="12.16.3">
<h3 data-number="12.16.3" class="anchored" data-anchor-id="run-tests"><span class="header-section-number">12.16.3</span> Run Tests</h3>
<p><strong>Run all tests:</strong></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Run a specific test file:</strong></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> test <span class="at">--</span> tests/integration/specific-test.spec.ts</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Important:</strong> Tests may fail on the first run due to cold starts. If this happens, simply run them again.</p>
</section>
</section>
<section id="troubleshooting" class="level2" data-number="12.17">
<h2 data-number="12.17" class="anchored" data-anchor-id="troubleshooting"><span class="header-section-number">12.17</span> Troubleshooting</h2>
<section id="common-issues" class="level3" data-number="12.17.1">
<h3 data-number="12.17.1" class="anchored" data-anchor-id="common-issues"><span class="header-section-number">12.17.1</span> Common Issues</h3>
<p><strong>Environment variables not loading:</strong></p>
<ul>
<li>Ensure file names are exactly <code>.env.local</code> and <code>supabase/.env</code></li>
<li>Restart the development server after changes</li>
<li>Check for typos in variable names</li>
</ul>
<p><strong>Authentication errors:</strong></p>
<ul>
<li>Verify Google OAuth redirect URIs match exactly</li>
<li>Check that the Supabase callback URL is correct</li>
<li>Ensure OAuth credentials are properly configured</li>
</ul>
<p><strong>Edge functions failing:</strong></p>
<ul>
<li>Check Supabase secrets are set correctly</li>
<li>Review function logs in the Supabase dashboard</li>
<li>Verify all dependencies are installed</li>
</ul>
<p><strong>Stripe webhook not working:</strong></p>
<ul>
<li>Confirm JWT verification is disabled for the webhook function</li>
<li>Check that the webhook URL is correct</li>
<li>Verify webhook signing secret matches</li>
</ul>
<p><strong>Database errors:</strong></p>
<ul>
<li>Ensure migrations ran successfully</li>
<li>Check Row Level Security policies</li>
<li>Verify user authentication is working</li>
</ul>
</section>
</section>
<section id="next-steps" class="level2" data-number="12.18">
<h2 data-number="12.18" class="anchored" data-anchor-id="next-steps"><span class="header-section-number">12.18</span> Next Steps</h2>
<section id="further-learning" class="level3" data-number="12.18.1">
<h3 data-number="12.18.1" class="anchored" data-anchor-id="further-learning"><span class="header-section-number">12.18.1</span> Further Learning</h3>
<p>For more detailed tutorials on specific features, check the <code>tutorials/</code> folder in the project repository, which includes in-depth documentation on:</p>
<ul>
<li>Authentication implementation</li>
<li>Database design and RLS policies</li>
<li>Edge functions in detail</li>
<li>Storage configuration</li>
<li>Stripe integration patterns</li>
</ul>
</section>
<section id="extending-the-project" class="level3" data-number="12.18.2">
<h3 data-number="12.18.2" class="anchored" data-anchor-id="extending-the-project"><span class="header-section-number">12.18.2</span> Extending the Project</h3>
<p>Consider adding:</p>
<ul>
<li>Email notifications</li>
<li>Task categories and filters</li>
<li>Team collaboration features</li>
<li>Advanced reporting and analytics</li>
<li>Mobile application</li>
<li>Additional payment plans</li>
</ul>
</section>
</section>
<section id="additional-resources" class="level2" data-number="12.19">
<h2 data-number="12.19" class="anchored" data-anchor-id="additional-resources"><span class="header-section-number">12.19</span> Additional Resources</h2>
<ul>
<li>Supabase Documentation: https://supabase.com/docs</li>
<li>Next.js Documentation: https://nextjs.org/docs</li>
<li>Stripe Documentation: https://stripe.com/docs</li>
<li>OpenAI API Documentation: https://platform.openai.com/docs</li>
</ul>
</section>
<section id="conclusion" class="level2" data-number="12.20">
<h2 data-number="12.20" class="anchored" data-anchor-id="conclusion"><span class="header-section-number">12.20</span> Conclusion</h2>
<p>You now have a fully functional SaaS application with authentication, database management, file storage, AI integration, and payment processing. This foundation can be extended and customized for virtually any SaaS product idea.</p>
<p>If you encounter any issues or have questions, refer to the project’s GitHub repository or leave a comment on the original tutorial video.</p>
<p>Happy building!</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./001007-tutorial-supabase-projectArchitecture-v001.html" class="pagination-link" aria-label="<yrChapterNumber>11. </yrChapterNumber> Project Architecture">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title"><yrchapternumber>11. </yrchapternumber> Project Architecture</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./someFile.html" class="pagination-link" aria-label="This is a placeholder">
        <span class="nav-page-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">This is a placeholder</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<div style="text-align: center; margin-top: 2em; padding-top: 1em; border-top: 1px solid #ddd;">
  <p>© 2025 Y. Rosenthal. All rights reserved.</p>
</div>
<script>
const titles = document.querySelectorAll('.title');

titles.forEach(title => {
  if (title.textContent.trim().startsWith('Appendix')) {
    const chapterNumber = title.querySelector('yrChapterNumber');
    if (chapterNumber) {
      chapterNumber.classList.add('yrAppendixChapterNumber');
    }
  }
});
</script>




</body></html>