<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>19&nbsp; 19.  rest of the steps … – AI Assisted Software Development</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./someFile.html" rel="next">
<link href="./001160-tutorial-googleOauth-v001.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-dcbfc57d77cecfb36a223989b6e6cd2b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
<script src="yrstuff-v001.js"></script>


<link rel="stylesheet" href="yrStyles-main-v001.css">
</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./001000-tutorial-supabase-nextjs-v001.html">Building with Next and Supabase</a></li><li class="breadcrumb-item"><a href="./009999-tutorial-restOfTheSteps-v001.html"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title"><yrchapternumber>19. </yrchapternumber> rest of the steps ...</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">AI Assisted Software Development</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About This Website</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Intro</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000020-introToAi-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title"><yrchapternumber>1. </yrchapternumber> Overview of AI today</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000030-introToAiasd-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title"><yrchapternumber>2. </yrchapternumber> Intro to Coding with an LLM</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000100-howToInstallCursor-v002.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title"><yrchapternumber>3. </yrchapternumber> How to install Cursor on your computer</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Intro to the command line (Bash)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000210-introToBashAndCli-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title"><yrchapternumber>4. </yrchapternumber> Intro to Bash (and CLIs)</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Intro to git and github</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000240-v2-introToGit-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title"><yrchapternumber>5. </yrchapternumber> Intro to Git &amp; GitHub</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000230-v1-introToGit-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title"><yrchapternumber>6. </yrchapternumber> alternate chapter - Intro to Git &amp; GitHub (hands-on, Bash-first)</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Basic Internet Architecture</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000900-internetArchitecture-browsersAndWebservers-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title"><yrchapternumber>7. </yrchapternumber> Browsers (HTML,CSS,Javascript) and Web Servers</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000940-internetArchitecture-domainNamesEtc-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title"><yrchapternumber>8. </yrchapternumber> Domain Names, IP Addresses, ping, etc</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000950-internetArchitecture-webFrameworks-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title"><yrchapternumber>9. </yrchapternumber> Client side web frameworks</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Building with Next and Supabase</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./001000-tutorial-supabase-nextjs-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title"><yrchapternumber>10. </yrchapternumber> Tutorial - intro</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./001007-tutorial-supabase-projectArchitecture-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title"><yrchapternumber>11. </yrchapternumber> Project Architecture</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./001100-tutorial-installNodeNpm-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title"><yrchapternumber>12. </yrchapternumber> Step 0: Install Node.js and npm</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./001110-tutorial-cloneRepo-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title"><yrchapternumber>13. </yrchapternumber> Step 1: Fork the repo and clone it</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./001120-tutorial-installThePackages-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title"><yrchapternumber>14. </yrchapternumber> Step 2: Installing the Node.js packages with npm</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./001130-tutorial-envFiles-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title"><yrchapternumber>15. </yrchapternumber> Create env files</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./001140-tutorial-previewFrontEnd-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title"><yrchapternumber>16. </yrchapternumber> Step 4 - Optional: Preview the Frontend</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./001150-tutorial-createSupabaseProject-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title"><yrchapternumber>17. </yrchapternumber> Step 5: Create a Supabase Project</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./001160-tutorial-googleOauth-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title"><yrchapternumber>18. </yrchapternumber> Step 6: setup authentication (Google OAuth)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./009999-tutorial-restOfTheSteps-v001.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title"><yrchapternumber>19. </yrchapternumber> rest of the steps ...</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Practice Questions</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./someFile.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">This is a placeholder</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./someFile.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">This is a placeholder</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./someFile.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">This is a placeholder</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Ignore this - in progress work</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000010-topics-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title"><yrchapternumber>16. </yrchapternumber> TOPICS (ignore this section - it is just for me to develop the book)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000500-htmlCssJavascript-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title"><yrchapternumber>17. </yrchapternumber> Overview of HTML, CSS, JavaScript</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./099999-llmsForDataAnalytics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title"><yrchapternumber>18. </yrchapternumber> Using LLMs to Help With Data Analytics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./900010-codeMetrics-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title"><yrchapternumber>19. </yrchapternumber> Measures of well designed programs</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./990010-references-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title"><yrchapternumber>A. </yrchapternumber> references</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./someFile.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">This is a placeholder</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#step-6-set-up-openai-api" id="toc-step-6-set-up-openai-api" class="nav-link active" data-scroll-target="#step-6-set-up-openai-api"><span class="header-section-number">19.1</span> Step 6: Set Up OpenAI API</a>
  <ul class="collapse">
  <li><a href="#create-openai-account" id="toc-create-openai-account" class="nav-link" data-scroll-target="#create-openai-account"><span class="header-section-number">19.1.1</span> Create OpenAI Account</a></li>
  <li><a href="#generate-api-key" id="toc-generate-api-key" class="nav-link" data-scroll-target="#generate-api-key"><span class="header-section-number">19.1.2</span> Generate API Key</a></li>
  <li><a href="#store-as-supabase-secret" id="toc-store-as-supabase-secret" class="nav-link" data-scroll-target="#store-as-supabase-secret"><span class="header-section-number">19.1.3</span> Store as Supabase Secret</a></li>
  </ul></li>
  <li><a href="#step-7-set-up-stripe" id="toc-step-7-set-up-stripe" class="nav-link" data-scroll-target="#step-7-set-up-stripe"><span class="header-section-number">19.2</span> Step 7: Set Up Stripe</a>
  <ul class="collapse">
  <li><a href="#create-stripe-account" id="toc-create-stripe-account" class="nav-link" data-scroll-target="#create-stripe-account"><span class="header-section-number">19.2.1</span> Create Stripe Account</a></li>
  <li><a href="#get-api-keys" id="toc-get-api-keys" class="nav-link" data-scroll-target="#get-api-keys"><span class="header-section-number">19.2.2</span> Get API Keys</a></li>
  <li><a href="#create-a-product" id="toc-create-a-product" class="nav-link" data-scroll-target="#create-a-product"><span class="header-section-number">19.2.3</span> Create a Product</a></li>
  <li><a href="#get-webhook-signing-secret" id="toc-get-webhook-signing-secret" class="nav-link" data-scroll-target="#get-webhook-signing-secret"><span class="header-section-number">19.2.4</span> Get Webhook Signing Secret</a></li>
  </ul></li>
  <li><a href="#step-8-set-up-supabase-database" id="toc-step-8-set-up-supabase-database" class="nav-link" data-scroll-target="#step-8-set-up-supabase-database"><span class="header-section-number">19.3</span> Step 8: Set Up Supabase Database</a>
  <ul class="collapse">
  <li><a href="#run-database-migrations" id="toc-run-database-migrations" class="nav-link" data-scroll-target="#run-database-migrations"><span class="header-section-number">19.3.1</span> Run Database Migrations</a></li>
  <li><a href="#database-structure" id="toc-database-structure" class="nav-link" data-scroll-target="#database-structure"><span class="header-section-number">19.3.2</span> Database Structure</a></li>
  <li><a href="#enable-row-level-security-rls" id="toc-enable-row-level-security-rls" class="nav-link" data-scroll-target="#enable-row-level-security-rls"><span class="header-section-number">19.3.3</span> Enable Row Level Security (RLS)</a></li>
  </ul></li>
  <li><a href="#step-9-set-up-storage" id="toc-step-9-set-up-storage" class="nav-link" data-scroll-target="#step-9-set-up-storage"><span class="header-section-number">19.4</span> Step 9: Set Up Storage</a>
  <ul class="collapse">
  <li><a href="#create-storage-bucket" id="toc-create-storage-bucket" class="nav-link" data-scroll-target="#create-storage-bucket"><span class="header-section-number">19.4.1</span> Create Storage Bucket</a></li>
  <li><a href="#configure-bucket-settings" id="toc-configure-bucket-settings" class="nav-link" data-scroll-target="#configure-bucket-settings"><span class="header-section-number">19.4.2</span> Configure Bucket Settings</a></li>
  <li><a href="#set-storage-policies" id="toc-set-storage-policies" class="nav-link" data-scroll-target="#set-storage-policies"><span class="header-section-number">19.4.3</span> Set Storage Policies</a></li>
  </ul></li>
  <li><a href="#step-10-deploy-edge-functions" id="toc-step-10-deploy-edge-functions" class="nav-link" data-scroll-target="#step-10-deploy-edge-functions"><span class="header-section-number">19.5</span> Step 10: Deploy Edge Functions</a>
  <ul class="collapse">
  <li><a href="#the-three-functions" id="toc-the-three-functions" class="nav-link" data-scroll-target="#the-three-functions"><span class="header-section-number">19.5.1</span> The Three Functions</a></li>
  <li><a href="#deploy-the-functions" id="toc-deploy-the-functions" class="nav-link" data-scroll-target="#deploy-the-functions"><span class="header-section-number">19.5.2</span> Deploy the Functions</a></li>
  <li><a href="#verify-deployment" id="toc-verify-deployment" class="nav-link" data-scroll-target="#verify-deployment"><span class="header-section-number">19.5.3</span> Verify Deployment</a></li>
  <li><a href="#configure-stripe-webhook" id="toc-configure-stripe-webhook" class="nav-link" data-scroll-target="#configure-stripe-webhook"><span class="header-section-number">19.5.4</span> Configure Stripe Webhook</a></li>
  <li><a href="#update-stripe-webhook-url" id="toc-update-stripe-webhook-url" class="nav-link" data-scroll-target="#update-stripe-webhook-url"><span class="header-section-number">19.5.5</span> Update Stripe Webhook URL</a></li>
  </ul></li>
  <li><a href="#step-11-run-the-application" id="toc-step-11-run-the-application" class="nav-link" data-scroll-target="#step-11-run-the-application"><span class="header-section-number">19.6</span> Step 11: Run the Application</a>
  <ul class="collapse">
  <li><a href="#start-the-development-server" id="toc-start-the-development-server" class="nav-link" data-scroll-target="#start-the-development-server"><span class="header-section-number">19.6.1</span> Start the Development Server</a></li>
  <li><a href="#test-core-functionality" id="toc-test-core-functionality" class="nav-link" data-scroll-target="#test-core-functionality"><span class="header-section-number">19.6.2</span> Test Core Functionality</a></li>
  </ul></li>
  <li><a href="#deployment-to-production" id="toc-deployment-to-production" class="nav-link" data-scroll-target="#deployment-to-production"><span class="header-section-number">19.7</span> Deployment to Production</a>
  <ul class="collapse">
  <li><a href="#deploying-the-frontend" id="toc-deploying-the-frontend" class="nav-link" data-scroll-target="#deploying-the-frontend"><span class="header-section-number">19.7.1</span> Deploying the Frontend</a></li>
  <li><a href="#update-environment-variables-for-production" id="toc-update-environment-variables-for-production" class="nav-link" data-scroll-target="#update-environment-variables-for-production"><span class="header-section-number">19.7.2</span> Update Environment Variables for Production</a></li>
  </ul></li>
  <li><a href="#project-structure" id="toc-project-structure" class="nav-link" data-scroll-target="#project-structure"><span class="header-section-number">19.8</span> Project Structure</a></li>
  <li><a href="#testing" id="toc-testing" class="nav-link" data-scroll-target="#testing"><span class="header-section-number">19.9</span> Testing</a>
  <ul class="collapse">
  <li><a href="#integration-tests" id="toc-integration-tests" class="nav-link" data-scroll-target="#integration-tests"><span class="header-section-number">19.9.1</span> Integration Tests</a></li>
  <li><a href="#set-up-test-environment" id="toc-set-up-test-environment" class="nav-link" data-scroll-target="#set-up-test-environment"><span class="header-section-number">19.9.2</span> Set Up Test Environment</a></li>
  <li><a href="#run-tests" id="toc-run-tests" class="nav-link" data-scroll-target="#run-tests"><span class="header-section-number">19.9.3</span> Run Tests</a></li>
  </ul></li>
  <li><a href="#troubleshooting" id="toc-troubleshooting" class="nav-link" data-scroll-target="#troubleshooting"><span class="header-section-number">19.10</span> Troubleshooting</a>
  <ul class="collapse">
  <li><a href="#environment-variables-not-loading" id="toc-environment-variables-not-loading" class="nav-link" data-scroll-target="#environment-variables-not-loading"><span class="header-section-number">19.10.1</span> Environment Variables Not Loading</a></li>
  <li><a href="#authentication-errors" id="toc-authentication-errors" class="nav-link" data-scroll-target="#authentication-errors"><span class="header-section-number">19.10.2</span> Authentication Errors</a></li>
  <li><a href="#edge-functions-failing" id="toc-edge-functions-failing" class="nav-link" data-scroll-target="#edge-functions-failing"><span class="header-section-number">19.10.3</span> Edge Functions Failing</a></li>
  <li><a href="#stripe-webhook-not-working" id="toc-stripe-webhook-not-working" class="nav-link" data-scroll-target="#stripe-webhook-not-working"><span class="header-section-number">19.10.4</span> Stripe Webhook Not Working</a></li>
  <li><a href="#database-errors" id="toc-database-errors" class="nav-link" data-scroll-target="#database-errors"><span class="header-section-number">19.10.5</span> Database Errors</a></li>
  </ul></li>
  <li><a href="#next-steps" id="toc-next-steps" class="nav-link" data-scroll-target="#next-steps"><span class="header-section-number">19.11</span> Next Steps</a>
  <ul class="collapse">
  <li><a href="#further-learning" id="toc-further-learning" class="nav-link" data-scroll-target="#further-learning"><span class="header-section-number">19.11.1</span> Further Learning</a></li>
  <li><a href="#extending-the-project" id="toc-extending-the-project" class="nav-link" data-scroll-target="#extending-the-project"><span class="header-section-number">19.11.2</span> Extending the Project</a></li>
  </ul></li>
  <li><a href="#additional-resources" id="toc-additional-resources" class="nav-link" data-scroll-target="#additional-resources"><span class="header-section-number">19.12</span> Additional Resources</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="header-section-number">19.13</span> Conclusion</a></li>
  <li><a href="#rest-of-the-steps" id="toc-rest-of-the-steps" class="nav-link" data-scroll-target="#rest-of-the-steps"><span class="header-section-number">20</span> <yrchapternumber>19. </yrchapternumber> rest of the steps …</a>
  <ul class="collapse">
  <li><a href="#step-6-set-up-openai-api-1" id="toc-step-6-set-up-openai-api-1" class="nav-link" data-scroll-target="#step-6-set-up-openai-api-1"><span class="header-section-number">20.1</span> Step 6: Set Up OpenAI API</a>
  <ul class="collapse">
  <li><a href="#create-openai-account-1" id="toc-create-openai-account-1" class="nav-link" data-scroll-target="#create-openai-account-1"><span class="header-section-number">20.1.1</span> Create OpenAI Account</a></li>
  <li><a href="#generate-api-key-1" id="toc-generate-api-key-1" class="nav-link" data-scroll-target="#generate-api-key-1"><span class="header-section-number">20.1.2</span> Generate API Key</a></li>
  <li><a href="#store-as-supabase-secret-1" id="toc-store-as-supabase-secret-1" class="nav-link" data-scroll-target="#store-as-supabase-secret-1"><span class="header-section-number">20.1.3</span> Store as Supabase Secret</a></li>
  </ul></li>
  <li><a href="#step-7-set-up-stripe-1" id="toc-step-7-set-up-stripe-1" class="nav-link" data-scroll-target="#step-7-set-up-stripe-1"><span class="header-section-number">20.2</span> Step 7: Set Up Stripe</a>
  <ul class="collapse">
  <li><a href="#create-stripe-account-1" id="toc-create-stripe-account-1" class="nav-link" data-scroll-target="#create-stripe-account-1"><span class="header-section-number">20.2.1</span> Create Stripe Account</a></li>
  <li><a href="#get-api-keys-1" id="toc-get-api-keys-1" class="nav-link" data-scroll-target="#get-api-keys-1"><span class="header-section-number">20.2.2</span> Get API Keys</a></li>
  <li><a href="#create-a-product-1" id="toc-create-a-product-1" class="nav-link" data-scroll-target="#create-a-product-1"><span class="header-section-number">20.2.3</span> Create a Product</a></li>
  <li><a href="#get-webhook-signing-secret-1" id="toc-get-webhook-signing-secret-1" class="nav-link" data-scroll-target="#get-webhook-signing-secret-1"><span class="header-section-number">20.2.4</span> Get Webhook Signing Secret</a></li>
  </ul></li>
  <li><a href="#step-8-set-up-supabase-database-1" id="toc-step-8-set-up-supabase-database-1" class="nav-link" data-scroll-target="#step-8-set-up-supabase-database-1"><span class="header-section-number">20.3</span> Step 8: Set Up Supabase Database</a>
  <ul class="collapse">
  <li><a href="#run-database-migrations-1" id="toc-run-database-migrations-1" class="nav-link" data-scroll-target="#run-database-migrations-1"><span class="header-section-number">20.3.1</span> Run Database Migrations</a></li>
  <li><a href="#database-structure-1" id="toc-database-structure-1" class="nav-link" data-scroll-target="#database-structure-1"><span class="header-section-number">20.3.2</span> Database Structure</a></li>
  <li><a href="#enable-row-level-security-rls-1" id="toc-enable-row-level-security-rls-1" class="nav-link" data-scroll-target="#enable-row-level-security-rls-1"><span class="header-section-number">20.3.3</span> Enable Row Level Security (RLS)</a></li>
  </ul></li>
  <li><a href="#step-9-set-up-storage-1" id="toc-step-9-set-up-storage-1" class="nav-link" data-scroll-target="#step-9-set-up-storage-1"><span class="header-section-number">20.4</span> Step 9: Set Up Storage</a>
  <ul class="collapse">
  <li><a href="#create-storage-bucket-1" id="toc-create-storage-bucket-1" class="nav-link" data-scroll-target="#create-storage-bucket-1"><span class="header-section-number">20.4.1</span> Create Storage Bucket</a></li>
  <li><a href="#configure-bucket-settings-1" id="toc-configure-bucket-settings-1" class="nav-link" data-scroll-target="#configure-bucket-settings-1"><span class="header-section-number">20.4.2</span> Configure Bucket Settings</a></li>
  <li><a href="#set-storage-policies-1" id="toc-set-storage-policies-1" class="nav-link" data-scroll-target="#set-storage-policies-1"><span class="header-section-number">20.4.3</span> Set Storage Policies</a></li>
  </ul></li>
  <li><a href="#step-10-deploy-edge-functions-1" id="toc-step-10-deploy-edge-functions-1" class="nav-link" data-scroll-target="#step-10-deploy-edge-functions-1"><span class="header-section-number">20.5</span> Step 10: Deploy Edge Functions</a>
  <ul class="collapse">
  <li><a href="#understanding-edge-functions" id="toc-understanding-edge-functions" class="nav-link" data-scroll-target="#understanding-edge-functions"><span class="header-section-number">20.5.1</span> Understanding Edge Functions</a></li>
  <li><a href="#the-three-functions-1" id="toc-the-three-functions-1" class="nav-link" data-scroll-target="#the-three-functions-1"><span class="header-section-number">20.5.2</span> The Three Functions</a></li>
  <li><a href="#deploy-the-functions-1" id="toc-deploy-the-functions-1" class="nav-link" data-scroll-target="#deploy-the-functions-1"><span class="header-section-number">20.5.3</span> Deploy the Functions</a></li>
  <li><a href="#verify-deployment-1" id="toc-verify-deployment-1" class="nav-link" data-scroll-target="#verify-deployment-1"><span class="header-section-number">20.5.4</span> Verify Deployment</a></li>
  <li><a href="#configure-stripe-webhook-1" id="toc-configure-stripe-webhook-1" class="nav-link" data-scroll-target="#configure-stripe-webhook-1"><span class="header-section-number">20.5.5</span> Configure Stripe Webhook</a></li>
  <li><a href="#update-stripe-webhook-url-1" id="toc-update-stripe-webhook-url-1" class="nav-link" data-scroll-target="#update-stripe-webhook-url-1"><span class="header-section-number">20.5.6</span> Update Stripe Webhook URL</a></li>
  </ul></li>
  <li><a href="#step-11-run-the-application-1" id="toc-step-11-run-the-application-1" class="nav-link" data-scroll-target="#step-11-run-the-application-1"><span class="header-section-number">20.6</span> Step 11: Run the Application</a>
  <ul class="collapse">
  <li><a href="#start-the-development-server-1" id="toc-start-the-development-server-1" class="nav-link" data-scroll-target="#start-the-development-server-1"><span class="header-section-number">20.6.1</span> Start the Development Server</a></li>
  <li><a href="#test-core-functionality-1" id="toc-test-core-functionality-1" class="nav-link" data-scroll-target="#test-core-functionality-1"><span class="header-section-number">20.6.2</span> Test Core Functionality</a></li>
  </ul></li>
  <li><a href="#deployment-to-production-1" id="toc-deployment-to-production-1" class="nav-link" data-scroll-target="#deployment-to-production-1"><span class="header-section-number">20.7</span> Deployment to Production</a>
  <ul class="collapse">
  <li><a href="#deploying-the-frontend-1" id="toc-deploying-the-frontend-1" class="nav-link" data-scroll-target="#deploying-the-frontend-1"><span class="header-section-number">20.7.1</span> Deploying the Frontend</a></li>
  <li><a href="#update-environment-variables" id="toc-update-environment-variables" class="nav-link" data-scroll-target="#update-environment-variables"><span class="header-section-number">20.7.2</span> Update Environment Variables</a></li>
  </ul></li>
  <li><a href="#project-structure-1" id="toc-project-structure-1" class="nav-link" data-scroll-target="#project-structure-1"><span class="header-section-number">20.8</span> Project Structure</a></li>
  <li><a href="#testing-1" id="toc-testing-1" class="nav-link" data-scroll-target="#testing-1"><span class="header-section-number">20.9</span> Testing</a>
  <ul class="collapse">
  <li><a href="#integration-tests-1" id="toc-integration-tests-1" class="nav-link" data-scroll-target="#integration-tests-1"><span class="header-section-number">20.9.1</span> Integration Tests</a></li>
  <li><a href="#set-up-test-environment-1" id="toc-set-up-test-environment-1" class="nav-link" data-scroll-target="#set-up-test-environment-1"><span class="header-section-number">20.9.2</span> Set Up Test Environment</a></li>
  <li><a href="#run-tests-1" id="toc-run-tests-1" class="nav-link" data-scroll-target="#run-tests-1"><span class="header-section-number">20.9.3</span> Run Tests</a></li>
  </ul></li>
  <li><a href="#troubleshooting-1" id="toc-troubleshooting-1" class="nav-link" data-scroll-target="#troubleshooting-1"><span class="header-section-number">20.10</span> Troubleshooting</a>
  <ul class="collapse">
  <li><a href="#common-issues" id="toc-common-issues" class="nav-link" data-scroll-target="#common-issues"><span class="header-section-number">20.10.1</span> Common Issues</a></li>
  </ul></li>
  <li><a href="#next-steps-1" id="toc-next-steps-1" class="nav-link" data-scroll-target="#next-steps-1"><span class="header-section-number">20.11</span> Next Steps</a>
  <ul class="collapse">
  <li><a href="#further-learning-1" id="toc-further-learning-1" class="nav-link" data-scroll-target="#further-learning-1"><span class="header-section-number">20.11.1</span> Further Learning</a></li>
  <li><a href="#extending-the-project-1" id="toc-extending-the-project-1" class="nav-link" data-scroll-target="#extending-the-project-1"><span class="header-section-number">20.11.2</span> Extending the Project</a></li>
  </ul></li>
  <li><a href="#additional-resources-1" id="toc-additional-resources-1" class="nav-link" data-scroll-target="#additional-resources-1"><span class="header-section-number">20.12</span> Additional Resources</a></li>
  <li><a href="#conclusion-1" id="toc-conclusion-1" class="nav-link" data-scroll-target="#conclusion-1"><span class="header-section-number">20.13</span> Conclusion</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./001000-tutorial-supabase-nextjs-v001.html">Building with Next and Supabase</a></li><li class="breadcrumb-item"><a href="./009999-tutorial-restOfTheSteps-v001.html"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title"><yrchapternumber>19. </yrchapternumber> rest of the steps ...</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title"><yrchapternumber>19. </yrchapternumber> rest of the steps …</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>This chapter walks you through connecting OpenAI, Stripe, and Supabase, then running and deploying your SaaS app end-to-end.</p>
<hr>
<section id="step-6-set-up-openai-api" class="level2" data-number="19.1">
<h2 data-number="19.1" class="anchored" data-anchor-id="step-6-set-up-openai-api"><span class="header-section-number">19.1</span> Step 6: Set Up OpenAI API</h2>
<p>You’ll use OpenAI from a Supabase Edge Function, so the key must live in Supabase secrets (not in your frontend).</p>
<section id="create-openai-account" class="level3" data-number="19.1.1">
<h3 data-number="19.1.1" class="anchored" data-anchor-id="create-openai-account"><span class="header-section-number">19.1.1</span> Create OpenAI Account</h3>
<ol type="1">
<li>Go to the OpenAI Platform: <a href="https://platform.openai.com/" class="uri">https://platform.openai.com/</a></li>
<li>Sign up or log in to your account.</li>
<li>Open the <strong>Dashboard → API Keys</strong> (or <strong>Settings → API Keys</strong>) section.</li>
</ol>
</section>
<section id="generate-api-key" class="level3" data-number="19.1.2">
<h3 data-number="19.1.2" class="anchored" data-anchor-id="generate-api-key"><span class="header-section-number">19.1.2</span> Generate API Key</h3>
<ol type="1">
<li>Click <strong>Create new secret key</strong>.</li>
<li>Give it a recognizable name (e.g., <code>edge-functions-prod</code>).</li>
<li>Copy the key immediately — you won’t be able to see it again.</li>
<li>Store it securely in a password manager or secrets manager.</li>
<li><strong>Never</strong> commit this key to Git or expose it in client-side code.</li>
</ol>
</section>
<section id="store-as-supabase-secret" class="level3" data-number="19.1.3">
<h3 data-number="19.1.3" class="anchored" data-anchor-id="store-as-supabase-secret"><span class="header-section-number">19.1.3</span> Store as Supabase Secret</h3>
<p>You’ll configure your Edge Functions to read <code>OPENAI_API_KEY</code> from the Supabase environment.</p>
<ol type="1">
<li><p>Install Supabase CLI (if you haven’t already):</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install <span class="at">-g</span> supabase</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Link your local project to your Supabase project:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">supabase</span> link <span class="at">--project-ref</span> <span class="pp">[</span><span class="ss">your</span><span class="pp">-</span><span class="ss">project</span><span class="pp">-</span><span class="ss">ref</span><span class="pp">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can find <code>[your-project-ref]</code> in the URL of your Supabase project dashboard.</p></li>
<li><p>Set the secret in Supabase:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">supabase</span> secrets set OPENAI_API_KEY=your-openai-key</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Verify in the Supabase dashboard (<strong>Project Settings → API → Secrets</strong>) that <code>OPENAI_API_KEY</code> is present.</p></li>
</ol>
<hr>
</section>
</section>
<section id="step-7-set-up-stripe" class="level2" data-number="19.2">
<h2 data-number="19.2" class="anchored" data-anchor-id="step-7-set-up-stripe"><span class="header-section-number">19.2</span> Step 7: Set Up Stripe</h2>
<p>Stripe will handle subscriptions and billing. You’ll run in Test Mode while developing.</p>
<section id="create-stripe-account" class="level3" data-number="19.2.1">
<h3 data-number="19.2.1" class="anchored" data-anchor-id="create-stripe-account"><span class="header-section-number">19.2.1</span> Create Stripe Account</h3>
<ol type="1">
<li>Go to <a href="https://stripe.com" class="uri">https://stripe.com</a>.</li>
<li>Sign up for a new account or log in.</li>
<li>In the dashboard, toggle <strong>View test data</strong> or <strong>Test Mode</strong> on (usually top-right).</li>
<li>Confirm the dashboard now shows “Test data” so you don’t charge real cards.</li>
</ol>
</section>
<section id="get-api-keys" class="level3" data-number="19.2.2">
<h3 data-number="19.2.2" class="anchored" data-anchor-id="get-api-keys"><span class="header-section-number">19.2.2</span> Get API Keys</h3>
<ol type="1">
<li><p>In the Stripe Dashboard, go to <strong>Developers → API keys</strong>.</p></li>
<li><p>Under <strong>Standard keys</strong>, copy:</p>
<ul>
<li><strong>Publishable key</strong> (starts with <code>pk_test_</code>)</li>
<li><strong>Secret key</strong> (starts with <code>sk_test_</code>)</li>
</ul></li>
<li><p>Add the publishable key to your Next.js environment:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># .env.local</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="va">NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY</span><span class="op">=</span>your-publishable-key</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Store the secret key in Supabase (for Edge Functions):</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">supabase</span> secrets set STRIPE_SECRET_KEY=your-secret-key</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>If you have a separate dev/prod project, repeat this setup per environment.</p></li>
</ol>
</section>
<section id="create-a-product" class="level3" data-number="19.2.3">
<h3 data-number="19.2.3" class="anchored" data-anchor-id="create-a-product"><span class="header-section-number">19.2.3</span> Create a Product</h3>
<ol type="1">
<li><p>In Stripe dashboard, go to <strong>Products</strong>.</p></li>
<li><p>Click <strong>+ Add product</strong>.</p></li>
<li><p>Fill in:</p>
<ul>
<li><strong>Name</strong> (e.g., “Pro Plan”)</li>
<li>Optional description and image.</li>
</ul></li>
<li><p>Under <strong>Pricing</strong>, create a price:</p>
<ul>
<li><strong>Recurring</strong></li>
<li>Billing period: <strong>Monthly</strong></li>
<li>Amount: e.g., <code>$10</code> (or your own).</li>
</ul></li>
<li><p>Save the product and its price.</p></li>
<li><p>Copy the <strong>Price ID</strong> (e.g., <code>price_12345...</code>).</p></li>
<li><p>Add the Price ID to your app’s config (e.g., environment variable or constants file), for example:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="va">NEXT_PUBLIC_STRIPE_PRICE_ID</span><span class="op">=</span>your-price-id</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
<p><em>(Adjust to match how your code expects the price ID.)</em></p>
</section>
<section id="get-webhook-signing-secret" class="level3" data-number="19.2.4">
<h3 data-number="19.2.4" class="anchored" data-anchor-id="get-webhook-signing-secret"><span class="header-section-number">19.2.4</span> Get Webhook Signing Secret</h3>
<p>You’ll use a webhook to let Stripe notify your app about subscription changes.</p>
<ol type="1">
<li><p>Go to <strong>Developers → Webhooks</strong> in Stripe.</p></li>
<li><p>Click <strong>+ Add endpoint</strong>.</p></li>
<li><p>For now, you can use a temporary URL (you’ll update it later), such as:</p>
<ul>
<li>a local tunneling URL from <code>stripe listen</code> or <code>ngrok</code>, <strong>or</strong></li>
<li>leave it blank until your Supabase function URL is known.</li>
</ul></li>
<li><p>Under <strong>Select events to send</strong>, add:</p>
<ul>
<li><code>checkout.session.completed</code></li>
<li><code>customer.subscription.updated</code></li>
<li><code>customer.subscription.deleted</code></li>
</ul></li>
<li><p>Save the endpoint.</p></li>
<li><p>Stripe will show a <strong>Signing secret</strong> (e.g., <code>whsec_...</code>). Copy it.</p></li>
<li><p>Store it as a Supabase secret:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">supabase</span> secrets set STRIPE_WEBHOOK_SECRET=your-webhook-secret</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
<hr>
</section>
</section>
<section id="step-8-set-up-supabase-database" class="level2" data-number="19.3">
<h2 data-number="19.3" class="anchored" data-anchor-id="step-8-set-up-supabase-database"><span class="header-section-number">19.3</span> Step 8: Set Up Supabase Database</h2>
<p>Your project ships with migrations that define the database schema and policies.</p>
<section id="run-database-migrations" class="level3" data-number="19.3.1">
<h3 data-number="19.3.1" class="anchored" data-anchor-id="run-database-migrations"><span class="header-section-number">19.3.1</span> Run Database Migrations</h3>
<ol type="1">
<li><p>Ensure you’re in the project root (where <code>supabase/config.toml</code> lives).</p></li>
<li><p>Run:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">supabase</span> db push</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Wait for the migration to complete without errors.</p></li>
<li><p>In the Supabase dashboard, open <strong>Table Editor</strong> to confirm the tables exist.</p></li>
</ol>
</section>
<section id="database-structure" class="level3" data-number="19.3.2">
<h3 data-number="19.3.2" class="anchored" data-anchor-id="database-structure"><span class="header-section-number">19.3.2</span> Database Structure</h3>
<p>The migrations typically create tables such as:</p>
<ul>
<li><p><strong><code>users</code></strong><br>
Stores user account data linked to Supabase auth (e.g., <code>id</code>, <code>email</code>, metadata).</p></li>
<li><p><strong><code>tasks</code></strong><br>
Represents tasks created by users:</p>
<ul>
<li><code>id</code>, <code>user_id</code></li>
<li><code>title</code>, <code>description</code></li>
<li><code>label</code> (AI-generated or user-set)</li>
<li><code>image_url</code> (path to Supabase Storage file)</li>
<li>timestamps for creation and updates</li>
</ul></li>
<li><p><strong><code>user_subscriptions</code></strong><br>
Tracks subscription status:</p>
<ul>
<li><code>user_id</code></li>
<li>Stripe <code>customer_id</code></li>
<li><code>subscription_id</code></li>
<li><code>status</code> (e.g., <code>active</code>, <code>canceled</code>)</li>
<li>current period dates</li>
</ul></li>
</ul>
<p>Adjust field names to match your actual migrations.</p>
</section>
<section id="enable-row-level-security-rls" class="level3" data-number="19.3.3">
<h3 data-number="19.3.3" class="anchored" data-anchor-id="enable-row-level-security-rls"><span class="header-section-number">19.3.3</span> Enable Row Level Security (RLS)</h3>
<p>The migrations also turn on RLS and define policies, so that:</p>
<ul>
<li>Users can only read/update rows where <code>user_id</code> = their auth user id.</li>
<li>Anonymous users cannot access private data.</li>
<li>System operations (e.g., via service role) can bypass restrictions where needed.</li>
</ul>
<p>You can verify policies under <strong>Database → Policies</strong> in the Supabase dashboard.</p>
<hr>
</section>
</section>
<section id="step-9-set-up-storage" class="level2" data-number="19.4">
<h2 data-number="19.4" class="anchored" data-anchor-id="step-9-set-up-storage"><span class="header-section-number">19.4</span> Step 9: Set Up Storage</h2>
<p>You’ll store task images in Supabase Storage.</p>
<section id="create-storage-bucket" class="level3" data-number="19.4.1">
<h3 data-number="19.4.1" class="anchored" data-anchor-id="create-storage-bucket"><span class="header-section-number">19.4.1</span> Create Storage Bucket</h3>
<ol type="1">
<li>In Supabase dashboard, go to <strong>Storage → Buckets</strong>.</li>
<li>Click <strong>New bucket</strong>.</li>
<li>Name it <code>task-images</code> (or whatever your code expects).</li>
<li>For this tutorial, set the bucket to <strong>Public</strong>.</li>
<li>Create the bucket.</li>
</ol>
</section>
<section id="configure-bucket-settings" class="level3" data-number="19.4.2">
<h3 data-number="19.4.2" class="anchored" data-anchor-id="configure-bucket-settings"><span class="header-section-number">19.4.2</span> Configure Bucket Settings</h3>
<p><strong>File size limit:</strong></p>
<ul>
<li>Decide on an appropriate max file size (e.g., 1 MB).</li>
<li>Enforce this in your upload UI and/or server-side logic.</li>
</ul>
<p><strong>Allowed file types:</strong></p>
<ul>
<li>Restrict to images:
<ul>
<li><code>image/jpeg</code></li>
<li><code>image/png</code></li>
<li><code>image/gif</code></li>
<li><code>image/webp</code></li>
</ul></li>
</ul>
<p><strong>Access settings:</strong></p>
<ul>
<li>Public bucket:
<ul>
<li>Anyone with the URL can view the image (simpler for tutorials).</li>
</ul></li>
<li>For production:
<ul>
<li>Consider a private bucket + signed URLs for more control.</li>
</ul></li>
</ul>
</section>
<section id="set-storage-policies" class="level3" data-number="19.4.3">
<h3 data-number="19.4.3" class="anchored" data-anchor-id="set-storage-policies"><span class="header-section-number">19.4.3</span> Set Storage Policies</h3>
<p>In the <strong>Policies</strong> section for your <code>task-images</code> bucket, ensure:</p>
<ul>
<li>Authenticated users can upload files (e.g., policy: if <code>auth.role() = 'authenticated'</code>).</li>
<li>Anyone can read files (for public tutorials).</li>
<li>Users can delete only their own images (e.g., match <code>user_id</code> in metadata/path).</li>
</ul>
<p>You can either: - Use the provided migration policies, or - Create them via the Supabase dashboard policy builder.</p>
<hr>
</section>
</section>
<section id="step-10-deploy-edge-functions" class="level2" data-number="19.5">
<h2 data-number="19.5" class="anchored" data-anchor-id="step-10-deploy-edge-functions"><span class="header-section-number">19.5</span> Step 10: Deploy Edge Functions</h2>
<p>Edge Functions are serverless handlers for AI, billing, and webhooks.</p>
<p><strong>Location in project:</strong> <code>supabase/functions/</code></p>
<section id="the-three-functions" class="level3" data-number="19.5.1">
<h3 data-number="19.5.1" class="anchored" data-anchor-id="the-three-functions"><span class="header-section-number">19.5.1</span> The Three Functions</h3>
<section id="createtaskwithai" class="level4">
<h4 class="anchored" data-anchor-id="createtaskwithai">1. <code>createTaskWithAI</code></h4>
<p>Used to:</p>
<ul>
<li>Accept task input (e.g., title, description).</li>
<li>Call OpenAI using <code>OPENAI_API_KEY</code>.</li>
<li>Generate or refine a label.</li>
<li>Insert/update the task row in the <code>tasks</code> table.</li>
</ul>
<p>This function typically: - Validates the user (via JWT). - Checks subscription status if needed (e.g., premium-only features).</p>
</section>
<section id="createstripesession" class="level4">
<h4 class="anchored" data-anchor-id="createstripesession">2. <code>createStripeSession</code></h4>
<p>Used to:</p>
<ul>
<li>Create Stripe Checkout sessions for new subscriptions.</li>
<li>Return a customer portal link if the user already has a subscription.</li>
<li>Redirect users to Stripe when they click “Manage Subscription”.</li>
</ul>
<p>It uses <code>STRIPE_SECRET_KEY</code> and price IDs to build sessions.</p>
</section>
<section id="stripe-webhook" class="level4">
<h4 class="anchored" data-anchor-id="stripe-webhook">3. <code>stripe-webhook</code></h4>
<p>Used to:</p>
<ul>
<li>Receive event notifications from Stripe.</li>
<li>Verify the webhook signature using <code>STRIPE_WEBHOOK_SECRET</code>.</li>
<li>Sync subscription status (e.g., set <code>user_subscriptions.status = 'active'</code>).</li>
<li>Handle cancellations, renewals, and trial endings.</li>
</ul>
<p>This function is called directly by Stripe, so it doesn’t use user JWTs.</p>
</section>
</section>
<section id="deploy-the-functions" class="level3" data-number="19.5.2">
<h3 data-number="19.5.2" class="anchored" data-anchor-id="deploy-the-functions"><span class="header-section-number">19.5.2</span> Deploy the Functions</h3>
<p>From your project root, deploy each function with the Supabase CLI:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Deploy the AI task creation function</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="ex">supabase</span> functions deploy createTaskWithAI</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Deploy the Stripe session function</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="ex">supabase</span> functions deploy createStripeSession</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Deploy the webhook function</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="ex">supabase</span> functions deploy stripe-webhook</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>After deploying, the CLI will output function URLs like:</p>
<pre class="text"><code>https://[your-project-ref].supabase.co/functions/v1/createTaskWithAI</code></pre>
<p>Keep these handy for testing or local development.</p>
</section>
<section id="verify-deployment" class="level3" data-number="19.5.3">
<h3 data-number="19.5.3" class="anchored" data-anchor-id="verify-deployment"><span class="header-section-number">19.5.3</span> Verify Deployment</h3>
<ol type="1">
<li>In Supabase dashboard, open <strong>Edge Functions</strong>.</li>
<li>Confirm you see:
<ul>
<li><code>createTaskWithAI</code></li>
<li><code>createStripeSession</code></li>
<li><code>stripe-webhook</code></li>
</ul></li>
<li>Click each function:
<ul>
<li>Check the <strong>Logs</strong> tab for any runtime errors.</li>
<li>Trigger test requests (e.g., via <code>curl</code> or a REST client) if needed.</li>
</ul></li>
</ol>
</section>
<section id="configure-stripe-webhook" class="level3" data-number="19.5.4">
<h3 data-number="19.5.4" class="anchored" data-anchor-id="configure-stripe-webhook"><span class="header-section-number">19.5.4</span> Configure Stripe Webhook</h3>
<p><code>stripe-webhook</code> must accept unauthenticated calls from Stripe.</p>
<ol type="1">
<li>In Supabase dashboard, click the <code>stripe-webhook</code> function.</li>
<li>Go to the <strong>Details</strong> tab.</li>
<li>Find <strong>Function configuration</strong> (or <strong>Settings</strong>).</li>
<li>Disable <strong>Enforce JWT verification</strong> for this function.</li>
<li>Save the changes.</li>
</ol>
<p><strong>Why?</strong> Stripe does not send JWTs; the function instead authenticates via <code>STRIPE_WEBHOOK_SECRET</code>.</p>
</section>
<section id="update-stripe-webhook-url" class="level3" data-number="19.5.5">
<h3 data-number="19.5.5" class="anchored" data-anchor-id="update-stripe-webhook-url"><span class="header-section-number">19.5.5</span> Update Stripe Webhook URL</h3>
<p>Now point Stripe to your deployed function.</p>
<ol type="1">
<li><p>In Stripe Dashboard, go to <strong>Developers → Webhooks</strong>.</p></li>
<li><p>Click your webhook endpoint.</p></li>
<li><p>Update the <strong>Endpoint URL</strong> to:</p>
<pre class="text"><code>https://[your-project-ref].supabase.co/functions/v1/stripe-webhook</code></pre></li>
<li><p>Save the endpoint.</p></li>
<li><p>Use the <strong>Send test event</strong> button in Stripe to verify that your function:</p>
<ul>
<li>Receives the event.</li>
<li>Validates the signature.</li>
<li>Updates your database correctly.</li>
</ul></li>
</ol>
<hr>
</section>
</section>
<section id="step-11-run-the-application" class="level2" data-number="19.6">
<h2 data-number="19.6" class="anchored" data-anchor-id="step-11-run-the-application"><span class="header-section-number">19.6</span> Step 11: Run the Application</h2>
<p>Now that the backend is configured, you can run the Next.js app locally.</p>
<section id="start-the-development-server" class="level3" data-number="19.6.1">
<h3 data-number="19.6.1" class="anchored" data-anchor-id="start-the-development-server"><span class="header-section-number">19.6.1</span> Start the Development Server</h3>
<p>From your project root:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run dev</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The app usually runs at <code>http://localhost:3000</code>.</p>
<p>If you’re using <code>pnpm</code> or <code>yarn</code>, adjust accordingly.</p>
</section>
<section id="test-core-functionality" class="level3" data-number="19.6.2">
<h3 data-number="19.6.2" class="anchored" data-anchor-id="test-core-functionality"><span class="header-section-number">19.6.2</span> Test Core Functionality</h3>
<p>Walk through the main user flow to confirm everything is wired up correctly.</p>
<p><strong>1. Authentication</strong></p>
<ul>
<li>Click “Sign in with Google” (or your configured provider).</li>
<li>Complete the OAuth flow.</li>
<li>Ensure you’re redirected to the dashboard.</li>
<li>In Supabase <strong>Auth → Users</strong>, verify your user was created.</li>
</ul>
<p><strong>2. Task Management</strong></p>
<ul>
<li>From the dashboard, create a new task (title + description).</li>
<li>Confirm:
<ul>
<li>The task appears in your list.</li>
<li>The AI-generated label is visible (or applied shortly after creation).</li>
</ul></li>
<li>Check the <code>tasks</code> table in Supabase to see the new row.</li>
</ul>
<p><strong>3. Image Uploads</strong></p>
<ul>
<li>Edit a task and upload an image.</li>
<li>Confirm:
<ul>
<li>The file appears in the <code>task-images</code> bucket.</li>
<li>The image is displayed in the app (using the public URL).</li>
</ul></li>
<li>Try uploading an invalid file type or large file to see error handling.</li>
</ul>
<p><strong>4. User Profile</strong></p>
<ul>
<li>Navigate to your profile page.</li>
<li>Check:
<ul>
<li>Basic account information is correct.</li>
<li>The task count or other stats update as you add/remove tasks.</li>
</ul></li>
</ul>
<p><strong>5. Subscription Management</strong></p>
<ul>
<li>Click “Manage Subscription” or equivalent button.</li>
<li>Confirm:
<ul>
<li>You’re redirected to a Stripe-hosted checkout page.</li>
<li>The price and product name are correct.</li>
</ul></li>
<li>Use a Stripe test card (e.g., <code>4242 4242 4242 4242</code>) with:
<ul>
<li>Any future expiry date.</li>
<li>Any 3-digit CVC.</li>
<li>Any billing info.</li>
</ul></li>
<li>Complete checkout and return to the app.</li>
<li>Verify:
<ul>
<li>Your <code>user_subscriptions</code> row is updated to <code>active</code>.</li>
<li>Premium-only features (if any) unlock.</li>
</ul></li>
</ul>
<p><strong>6. Sign Out</strong></p>
<ul>
<li>Click “Sign out” or “Log out.”</li>
<li>Confirm:
<ul>
<li>You’re redirected back to the login page.</li>
<li>Protected routes are no longer accessible without signing in again.</li>
</ul></li>
</ul>
<hr>
</section>
</section>
<section id="deployment-to-production" class="level2" data-number="19.7">
<h2 data-number="19.7" class="anchored" data-anchor-id="deployment-to-production"><span class="header-section-number">19.7</span> Deployment to Production</h2>
<p>Once everything works locally, you can deploy the frontend.</p>
<section id="deploying-the-frontend" class="level3" data-number="19.7.1">
<h3 data-number="19.7.1" class="anchored" data-anchor-id="deploying-the-frontend"><span class="header-section-number">19.7.1</span> Deploying the Frontend</h3>
<p><strong>Recommended: Vercel</strong></p>
<p>Vercel is tightly integrated with Next.js and offers smooth deployments.</p>
<ol type="1">
<li>Push your code to a Git repository (e.g., GitHub).</li>
<li>In Vercel, click <strong>New Project → Import</strong> from your repo.</li>
<li>During setup:
<ul>
<li>Select the correct framework: <strong>Next.js</strong>.</li>
<li>Add all required environment variables:
<ul>
<li><code>NEXT_PUBLIC_SUPABASE_URL</code></li>
<li><code>NEXT_PUBLIC_SUPABASE_ANON_KEY</code></li>
<li><code>NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY</code></li>
<li>any other <code>NEXT_PUBLIC_...</code> or server-side variables.</li>
</ul></li>
</ul></li>
<li>Deploy the app.</li>
</ol>
<p>After deployment:</p>
<ul>
<li>Visit the production URL to confirm it loads.</li>
<li>Test login, task creation, and subscription flows in production.</li>
</ul>
<p><strong>Alternative Options</strong></p>
<p>If you prefer other providers:</p>
<ul>
<li><strong>Netlify</strong> – good Next.js support (with appropriate adapters).</li>
<li><strong>AWS Amplify</strong>, <strong>Render</strong>, or any provider that supports Node/Next.js.</li>
</ul>
<p>Configuration will be similar: point to your repo and set env vars.</p>
</section>
<section id="update-environment-variables-for-production" class="level3" data-number="19.7.2">
<h3 data-number="19.7.2" class="anchored" data-anchor-id="update-environment-variables-for-production"><span class="header-section-number">19.7.2</span> Update Environment Variables for Production</h3>
<p>For the production instance, make sure to:</p>
<ul>
<li>Use your <strong>production Supabase project URL and anon/service keys</strong>.</li>
<li>Switch Stripe from <strong>test mode</strong> to <strong>live mode</strong> when ready:
<ul>
<li>Replace <code>pk_test_...</code> and <code>sk_test_...</code> with <code>pk_live_...</code> / <code>sk_live_...</code>.</li>
<li>Update webhook endpoints/secrets accordingly.</li>
</ul></li>
<li>Update OAuth redirect URIs:
<ul>
<li>Add your production domain (e.g., <code>https://yourapp.com</code>) in Google OAuth and Supabase Auth settings.</li>
</ul></li>
<li>Configure CORS and allowed redirect URLs in Supabase to include the production domain.</li>
</ul>
<hr>
</section>
</section>
<section id="project-structure" class="level2" data-number="19.8">
<h2 data-number="19.8" class="anchored" data-anchor-id="project-structure"><span class="header-section-number">19.8</span> Project Structure</h2>
<p>Here’s a quick overview of the main folders and what you typically edit:</p>
<pre class="text"><code>├── app/                     # Next.js app routes and pages
├── components/              # Reusable React UI components
├── hooks/                   # Client logic and Supabase integration
├── supabase/
│   ├── functions/           # Edge functions (backend logic)
│   └── migrations/          # Database schema and configurations
└── tests/
    └── integration/         # Integration test suite</code></pre>
<p><strong>To extend functionality:</strong></p>
<ul>
<li><p><strong>UI changes:</strong><br>
Update layout, pages, and routing in <code>app/</code> and shared UI in <code>components/</code>.</p></li>
<li><p><strong>Client logic:</strong><br>
Modify data fetching, hooks, and client-side behavior in <code>hooks/</code>.</p></li>
<li><p><strong>Backend logic:</strong><br>
Add or update Edge Functions in <code>supabase/functions/</code> for new APIs or integrations.</p></li>
<li><p><strong>Database changes:</strong><br>
Create new migration files in <code>supabase/migrations/</code> to add tables, columns, or policies.</p></li>
</ul>
<hr>
</section>
<section id="testing" class="level2" data-number="19.9">
<h2 data-number="19.9" class="anchored" data-anchor-id="testing"><span class="header-section-number">19.9</span> Testing</h2>
<p>Automated tests help ensure everything works after changes.</p>
<section id="integration-tests" class="level3" data-number="19.9.1">
<h3 data-number="19.9.1" class="anchored" data-anchor-id="integration-tests"><span class="header-section-number">19.9.1</span> Integration Tests</h3>
<p>The project includes integration tests that talk to your real Supabase project (usually in a separate test environment).</p>
</section>
<section id="set-up-test-environment" class="level3" data-number="19.9.2">
<h3 data-number="19.9.2" class="anchored" data-anchor-id="set-up-test-environment"><span class="header-section-number">19.9.2</span> Set Up Test Environment</h3>
<ol type="1">
<li><p>Copy the example environment file:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> example.env tests/.env.test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Fill in the file with:</p>
<ul>
<li>Supabase test project URL and keys.</li>
<li>Test Stripe keys (if required).</li>
<li>Any other secrets needed for tests.</li>
</ul></li>
<li><p>Keep the test env separate from production credentials.</p></li>
</ol>
</section>
<section id="run-tests" class="level3" data-number="19.9.3">
<h3 data-number="19.9.3" class="anchored" data-anchor-id="run-tests"><span class="header-section-number">19.9.3</span> Run Tests</h3>
<p><strong>Run all tests:</strong></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Run a specific test file:</strong></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> test <span class="at">--</span> tests/integration/specific-test.spec.ts</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If you see failures due to cold starts or timeouts:</p>
<ul>
<li>Run the tests again.</li>
<li>Check that your Edge Functions are deployed and reachable from the test environment.</li>
</ul>
<hr>
</section>
</section>
<section id="troubleshooting" class="level2" data-number="19.10">
<h2 data-number="19.10" class="anchored" data-anchor-id="troubleshooting"><span class="header-section-number">19.10</span> Troubleshooting</h2>
<p>A few quick checks for common problems.</p>
<section id="environment-variables-not-loading" class="level3" data-number="19.10.1">
<h3 data-number="19.10.1" class="anchored" data-anchor-id="environment-variables-not-loading"><span class="header-section-number">19.10.1</span> Environment Variables Not Loading</h3>
<ul>
<li>Verify the filenames:
<ul>
<li>Local Next.js: <code>.env.local</code></li>
<li>Supabase: <code>supabase/.env</code> (if applicable) and <strong>Supabase secrets</strong>.</li>
</ul></li>
<li>Restart the dev server after any env changes.</li>
<li>Confirm the variables are defined in:
<ul>
<li>The Next.js runtime (<code>console.log(process.env.NEXT_PUBLIC_... )</code>).</li>
<li>Supabase dashboard (for secrets).</li>
</ul></li>
</ul>
</section>
<section id="authentication-errors" class="level3" data-number="19.10.2">
<h3 data-number="19.10.2" class="anchored" data-anchor-id="authentication-errors"><span class="header-section-number">19.10.2</span> Authentication Errors</h3>
<ul>
<li>Ensure your OAuth redirect URIs match <strong>exactly</strong> in:
<ul>
<li>Google Cloud Console (OAuth credentials).</li>
<li>Supabase Auth settings.</li>
</ul></li>
<li>Make sure the Supabase <strong>Site URL</strong> matches your local and production URLs.</li>
<li>Inspect the browser network tab for auth-related errors.</li>
</ul>
</section>
<section id="edge-functions-failing" class="level3" data-number="19.10.3">
<h3 data-number="19.10.3" class="anchored" data-anchor-id="edge-functions-failing"><span class="header-section-number">19.10.3</span> Edge Functions Failing</h3>
<ul>
<li>Check that all required secrets are set (<code>OPENAI_API_KEY</code>, <code>STRIPE_SECRET_KEY</code>, <code>STRIPE_WEBHOOK_SECRET</code>).</li>
<li>In Supabase:
<ul>
<li>Open <strong>Edge Functions → Logs</strong> to see runtime errors.</li>
</ul></li>
<li>Make sure code imports are correct and dependencies are installed.</li>
</ul>
</section>
<section id="stripe-webhook-not-working" class="level3" data-number="19.10.4">
<h3 data-number="19.10.4" class="anchored" data-anchor-id="stripe-webhook-not-working"><span class="header-section-number">19.10.4</span> Stripe Webhook Not Working</h3>
<ul>
<li>Confirm <strong>JWT verification is disabled</strong> for <code>stripe-webhook</code>.</li>
<li>Double-check the webhook URL in Stripe:
<ul>
<li>It must match the function URL exactly (including <code>https</code>).</li>
</ul></li>
<li>Ensure the <strong>Signing secret</strong> in Supabase matches the current secret shown in Stripe.</li>
<li>Use Stripe’s <strong>Send test event</strong> to debug.</li>
</ul>
</section>
<section id="database-errors" class="level3" data-number="19.10.5">
<h3 data-number="19.10.5" class="anchored" data-anchor-id="database-errors"><span class="header-section-number">19.10.5</span> Database Errors</h3>
<ul>
<li>Ensure <code>supabase db push</code> ran successfully without errors.</li>
<li>Check that RLS policies allow the operation you’re trying.</li>
<li>Confirm that the user is authenticated when performing actions that require auth.</li>
<li>Inspect Supabase logs or use the SQL editor to run queries manually.</li>
</ul>
<hr>
</section>
</section>
<section id="next-steps" class="level2" data-number="19.11">
<h2 data-number="19.11" class="anchored" data-anchor-id="next-steps"><span class="header-section-number">19.11</span> Next Steps</h2>
<p>Once the core app is working, you can continue extending it.</p>
<section id="further-learning" class="level3" data-number="19.11.1">
<h3 data-number="19.11.1" class="anchored" data-anchor-id="further-learning"><span class="header-section-number">19.11.1</span> Further Learning</h3>
<p>Your project’s <code>tutorials/</code> folder (if provided) may contain:</p>
<ul>
<li>Detailed auth guides.</li>
<li>Database and RLS walkthroughs.</li>
<li>Edge Function examples.</li>
<li>Storage and Stripe integration deep dives.</li>
</ul>
<p>You can also refer to official docs:</p>
<ul>
<li>Supabase: <a href="https://supabase.com/docs" class="uri">https://supabase.com/docs</a></li>
<li>Next.js: <a href="https://nextjs.org/docs" class="uri">https://nextjs.org/docs</a></li>
<li>Stripe: <a href="https://stripe.com/docs" class="uri">https://stripe.com/docs</a></li>
<li>OpenAI: <a href="https://platform.openai.com/docs" class="uri">https://platform.openai.com/docs</a></li>
</ul>
</section>
<section id="extending-the-project" class="level3" data-number="19.11.2">
<h3 data-number="19.11.2" class="anchored" data-anchor-id="extending-the-project"><span class="header-section-number">19.11.2</span> Extending the Project</h3>
<p>Ideas to grow your SaaS:</p>
<ul>
<li>Email notifications for due tasks or subscription events.</li>
<li>Task categories, labels, and advanced filters.</li>
<li>Team workspaces and shared task boards.</li>
<li>Analytics dashboards (charts of productivity, usage, revenue).</li>
<li>Mobile app (React Native or Expo).</li>
<li>Additional subscription tiers (free, pro, enterprise).</li>
</ul>
<hr>
</section>
</section>
<section id="additional-resources" class="level2" data-number="19.12">
<h2 data-number="19.12" class="anchored" data-anchor-id="additional-resources"><span class="header-section-number">19.12</span> Additional Resources</h2>
<ul>
<li><strong>Supabase Documentation:</strong> <a href="https://supabase.com/docs" class="uri">https://supabase.com/docs</a><br>
</li>
<li><strong>Next.js Documentation:</strong> <a href="https://nextjs.org/docs" class="uri">https://nextjs.org/docs</a><br>
</li>
<li><strong>Stripe Documentation:</strong> <a href="https://stripe.com/docs" class="uri">https://stripe.com/docs</a><br>
</li>
<li><strong>OpenAI API Documentation:</strong> <a href="https://platform.openai.com/docs" class="uri">https://platform.openai.com/docs</a></li>
</ul>
<hr>
</section>
<section id="conclusion" class="level2" data-number="19.13">
<h2 data-number="19.13" class="anchored" data-anchor-id="conclusion"><span class="header-section-number">19.13</span> Conclusion</h2>
<p>At this point, you have a full-stack SaaS application with:</p>
<ul>
<li>Authentication and user management</li>
<li>A Postgres database with RLS</li>
<li>File storage for images</li>
<li>AI-powered task labeling</li>
<li>Subscription billing with Stripe</li>
<li>Edge Functions for serverless backend logic</li>
</ul>
<p>From here, you can refine the UX, add features, and harden security and observability to take the app into production.</p>
<p>Happy building!</p>
<hr>
<hr>
<hr>
<p>YR-NOTE - OLD CONTENT</p>
<hr>
<hr>
<hr>
</section>
<section id="rest-of-the-steps" class="level1" data-number="20">
<h1 data-number="20"><span class="header-section-number">20</span> <yrchapternumber>19. </yrchapternumber> rest of the steps …</h1>
<section id="step-6-set-up-openai-api-1" class="level2" data-number="20.1">
<h2 data-number="20.1" class="anchored" data-anchor-id="step-6-set-up-openai-api-1"><span class="header-section-number">20.1</span> Step 6: Set Up OpenAI API</h2>
<section id="create-openai-account-1" class="level3" data-number="20.1.1">
<h3 data-number="20.1.1" class="anchored" data-anchor-id="create-openai-account-1"><span class="header-section-number">20.1.1</span> Create OpenAI Account</h3>
<ol type="1">
<li>Go to OpenAI Platform</li>
<li>Sign up or log in to your account</li>
<li>Navigate to API Keys section</li>
</ol>
</section>
<section id="generate-api-key-1" class="level3" data-number="20.1.2">
<h3 data-number="20.1.2" class="anchored" data-anchor-id="generate-api-key-1"><span class="header-section-number">20.1.2</span> Generate API Key</h3>
<ol type="1">
<li>Create a new API key</li>
<li>Copy the key immediately (you won’t be able to see it again)</li>
<li>Store it securely</li>
</ol>
</section>
<section id="store-as-supabase-secret-1" class="level3" data-number="20.1.3">
<h3 data-number="20.1.3" class="anchored" data-anchor-id="store-as-supabase-secret-1"><span class="header-section-number">20.1.3</span> Store as Supabase Secret</h3>
<p>The OpenAI API key needs to be stored as a Supabase secret for use in edge functions:</p>
<ol type="1">
<li>Install Supabase CLI if you haven’t already</li>
<li>Link your project:</li>
</ol>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">supabase</span> link <span class="at">--project-ref</span> <span class="pp">[</span><span class="ss">your</span><span class="pp">-</span><span class="ss">project</span><span class="pp">-</span><span class="ss">ref</span><span class="pp">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="3" type="1">
<li>Set the secret:</li>
</ol>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">supabase</span> secrets set OPENAI_API_KEY=your-openai-key</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="step-7-set-up-stripe-1" class="level2" data-number="20.2">
<h2 data-number="20.2" class="anchored" data-anchor-id="step-7-set-up-stripe-1"><span class="header-section-number">20.2</span> Step 7: Set Up Stripe</h2>
<section id="create-stripe-account-1" class="level3" data-number="20.2.1">
<h3 data-number="20.2.1" class="anchored" data-anchor-id="create-stripe-account-1"><span class="header-section-number">20.2.1</span> Create Stripe Account</h3>
<ol type="1">
<li>Go to Stripe’s website</li>
<li>Sign up for an account</li>
<li>Switch to Test Mode (top right toggle)</li>
</ol>
</section>
<section id="get-api-keys-1" class="level3" data-number="20.2.2">
<h3 data-number="20.2.2" class="anchored" data-anchor-id="get-api-keys-1"><span class="header-section-number">20.2.2</span> Get API Keys</h3>
<ol type="1">
<li>Navigate to Developers → API Keys</li>
<li>Copy both:
<ul>
<li>Publishable key (starts with <code>pk_test_</code>)</li>
<li>Secret key (starts with <code>sk_test_</code>)</li>
</ul></li>
<li>Add to your <code>.env.local</code>:</li>
</ol>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="va">NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY</span><span class="op">=</span>your-publishable-key</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="4" type="1">
<li>Store the secret key in Supabase:</li>
</ol>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">supabase</span> secrets set STRIPE_SECRET_KEY=your-secret-key</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="create-a-product-1" class="level3" data-number="20.2.3">
<h3 data-number="20.2.3" class="anchored" data-anchor-id="create-a-product-1"><span class="header-section-number">20.2.3</span> Create a Product</h3>
<ol type="1">
<li>Go to Stripe Dashboard → Products</li>
<li>Create a new product for your subscription</li>
<li>Set up pricing:
<ul>
<li>Monthly recurring payment</li>
<li>Set your price (e.g., $10/month)</li>
</ul></li>
<li>Copy the Price ID (starts with <code>price_</code>)</li>
</ol>
</section>
<section id="get-webhook-signing-secret-1" class="level3" data-number="20.2.4">
<h3 data-number="20.2.4" class="anchored" data-anchor-id="get-webhook-signing-secret-1"><span class="header-section-number">20.2.4</span> Get Webhook Signing Secret</h3>
<ol type="1">
<li>Go to Developers → Webhooks</li>
<li>Add an endpoint (you’ll update this URL later)</li>
<li>Select events to listen to:
<ul>
<li><code>checkout.session.completed</code></li>
<li><code>customer.subscription.updated</code></li>
<li><code>customer.subscription.deleted</code></li>
</ul></li>
<li>Copy the Webhook Signing Secret</li>
<li>Store it in Supabase:</li>
</ol>
<div class="sourceCode" id="cb21"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">supabase</span> secrets set STRIPE_WEBHOOK_SECRET=your-webhook-secret</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="step-8-set-up-supabase-database-1" class="level2" data-number="20.3">
<h2 data-number="20.3" class="anchored" data-anchor-id="step-8-set-up-supabase-database-1"><span class="header-section-number">20.3</span> Step 8: Set Up Supabase Database</h2>
<section id="run-database-migrations-1" class="level3" data-number="20.3.1">
<h3 data-number="20.3.1" class="anchored" data-anchor-id="run-database-migrations-1"><span class="header-section-number">20.3.1</span> Run Database Migrations</h3>
<p>The project includes migration files that will set up your database schema.</p>
<ol type="1">
<li>Make sure you’re in the project root directory</li>
<li>Run the migrations:</li>
</ol>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">supabase</span> db push</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This will create all necessary tables and configurations.</p>
</section>
<section id="database-structure-1" class="level3" data-number="20.3.2">
<h3 data-number="20.3.2" class="anchored" data-anchor-id="database-structure-1"><span class="header-section-number">20.3.2</span> Database Structure</h3>
<p>The migrations create the following main tables:</p>
<ul>
<li><strong>users</strong> - Stores user account information</li>
<li><strong>tasks</strong> - Stores task data with fields for title, description, label, and image</li>
<li><strong>user_subscriptions</strong> - Tracks subscription status</li>
</ul>
</section>
<section id="enable-row-level-security-rls-1" class="level3" data-number="20.3.3">
<h3 data-number="20.3.3" class="anchored" data-anchor-id="enable-row-level-security-rls-1"><span class="header-section-number">20.3.3</span> Enable Row Level Security (RLS)</h3>
<p>The migrations automatically set up Row Level Security policies to ensure:</p>
<ul>
<li>Users can only see their own tasks</li>
<li>Users can only modify their own data</li>
<li>Proper authentication is enforced</li>
</ul>
</section>
</section>
<section id="step-9-set-up-storage-1" class="level2" data-number="20.4">
<h2 data-number="20.4" class="anchored" data-anchor-id="step-9-set-up-storage-1"><span class="header-section-number">20.4</span> Step 9: Set Up Storage</h2>
<section id="create-storage-bucket-1" class="level3" data-number="20.4.1">
<h3 data-number="20.4.1" class="anchored" data-anchor-id="create-storage-bucket-1"><span class="header-section-number">20.4.1</span> Create Storage Bucket</h3>
<ol type="1">
<li>Go to your Supabase dashboard</li>
<li>Navigate to Storage</li>
<li>Create a new bucket named “task-images”</li>
</ol>
</section>
<section id="configure-bucket-settings-1" class="level3" data-number="20.4.2">
<h3 data-number="20.4.2" class="anchored" data-anchor-id="configure-bucket-settings-1"><span class="header-section-number">20.4.2</span> Configure Bucket Settings</h3>
<p><strong>File size limit:</strong></p>
<ul>
<li>Set maximum file size to 1 MB</li>
</ul>
<p><strong>Allowed file types:</strong></p>
<ul>
<li>Configure to accept only images (JPEG, PNG, GIF, WebP)</li>
</ul>
<p><strong>Access settings:</strong></p>
<ul>
<li>For this tutorial, the bucket is set to public</li>
<li>Public means anyone with the URL can view the image</li>
<li>For production, consider making it private for better security</li>
</ul>
</section>
<section id="set-storage-policies-1" class="level3" data-number="20.4.3">
<h3 data-number="20.4.3" class="anchored" data-anchor-id="set-storage-policies-1"><span class="header-section-number">20.4.3</span> Set Storage Policies</h3>
<p>The storage policies should allow:</p>
<ul>
<li>Authenticated users to upload images</li>
<li>Anyone to read images (if public)</li>
<li>Users to delete their own images</li>
</ul>
</section>
</section>
<section id="step-10-deploy-edge-functions-1" class="level2" data-number="20.5">
<h2 data-number="20.5" class="anchored" data-anchor-id="step-10-deploy-edge-functions-1"><span class="header-section-number">20.5</span> Step 10: Deploy Edge Functions</h2>
<section id="understanding-edge-functions" class="level3" data-number="20.5.1">
<h3 data-number="20.5.1" class="anchored" data-anchor-id="understanding-edge-functions"><span class="header-section-number">20.5.1</span> Understanding Edge Functions</h3>
<p>Edge functions are custom serverless functions that run on demand in response to HTTP requests. They allow you to run backend code without managing servers.</p>
<p><strong>Location in project:</strong> <code>supabase/functions/</code></p>
</section>
<section id="the-three-functions-1" class="level3" data-number="20.5.2">
<h3 data-number="20.5.2" class="anchored" data-anchor-id="the-three-functions-1"><span class="header-section-number">20.5.2</span> The Three Functions</h3>
<p><strong>1. createTaskWithAI</strong></p>
<ul>
<li>Creates a new task in the database</li>
<li>Uses OpenAI to automatically assign a label based on the task title</li>
<li>Updates the task with the AI-generated label</li>
</ul>
<p><strong>2. createStripeSession</strong></p>
<ul>
<li>Generates Stripe checkout URLs</li>
<li>Returns either a checkout session (for new subscriptions) or customer portal (for existing customers)</li>
<li>Used when users click “Manage Subscription”</li>
</ul>
<p><strong>3. stripe-webhook</strong></p>
<ul>
<li>Receives event notifications from Stripe</li>
<li>Handles subscription status changes</li>
<li>Updates user premium status in the database</li>
</ul>
</section>
<section id="deploy-the-functions-1" class="level3" data-number="20.5.3">
<h3 data-number="20.5.3" class="anchored" data-anchor-id="deploy-the-functions-1"><span class="header-section-number">20.5.3</span> Deploy the Functions</h3>
<p>From your project root, deploy each function:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Deploy the AI task creation function</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="ex">supabase</span> functions deploy createTaskWithAI</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Deploy the Stripe session function</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="ex">supabase</span> functions deploy createStripeSession</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Deploy the webhook function</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="ex">supabase</span> functions deploy stripe-webhook</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="verify-deployment-1" class="level3" data-number="20.5.4">
<h3 data-number="20.5.4" class="anchored" data-anchor-id="verify-deployment-1"><span class="header-section-number">20.5.4</span> Verify Deployment</h3>
<ol type="1">
<li>Go to your Supabase dashboard</li>
<li>Click on “Edge Functions”</li>
<li>Confirm all three functions are listed</li>
<li>Click on each function to access metrics and logs for debugging</li>
</ol>
</section>
<section id="configure-stripe-webhook-1" class="level3" data-number="20.5.5">
<h3 data-number="20.5.5" class="anchored" data-anchor-id="configure-stripe-webhook-1"><span class="header-section-number">20.5.5</span> Configure Stripe Webhook</h3>
<p><strong>Important:</strong> The Stripe webhook function needs special configuration:</p>
<ol type="1">
<li>Click on the <code>stripe-webhook</code> function</li>
<li>Go to “Details”</li>
<li>Scroll to “Function Configuration”</li>
<li><strong>Disable</strong> “Enforce JWT verification”</li>
<li>Click “Save”</li>
</ol>
<p><strong>Why?</strong> This function is called by Stripe (not authenticated users), so JWT verification must be disabled.</p>
</section>
<section id="update-stripe-webhook-url-1" class="level3" data-number="20.5.6">
<h3 data-number="20.5.6" class="anchored" data-anchor-id="update-stripe-webhook-url-1"><span class="header-section-number">20.5.6</span> Update Stripe Webhook URL</h3>
<p>Now that your function is deployed, update Stripe with the actual endpoint:</p>
<ol type="1">
<li><p>Go to Stripe Dashboard → Developers → Webhooks</p></li>
<li><p>Click on your webhook endpoint</p></li>
<li><p>Update the URL to:</p>
<pre><code>https://[your-project-ref].supabase.co/functions/v1/stripe-webhook</code></pre></li>
</ol>
</section>
</section>
<section id="step-11-run-the-application-1" class="level2" data-number="20.6">
<h2 data-number="20.6" class="anchored" data-anchor-id="step-11-run-the-application-1"><span class="header-section-number">20.6</span> Step 11: Run the Application</h2>
<section id="start-the-development-server-1" class="level3" data-number="20.6.1">
<h3 data-number="20.6.1" class="anchored" data-anchor-id="start-the-development-server-1"><span class="header-section-number">20.6.1</span> Start the Development Server</h3>
<p>From your project root:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run dev</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The application should start and display a local URL (usually <code>http://localhost:3000</code>).</p>
</section>
<section id="test-core-functionality-1" class="level3" data-number="20.6.2">
<h3 data-number="20.6.2" class="anchored" data-anchor-id="test-core-functionality-1"><span class="header-section-number">20.6.2</span> Test Core Functionality</h3>
<p><strong>1. Authentication</strong></p>
<ul>
<li>Click to log in with Google</li>
<li>Verify successful authentication</li>
<li>Check that you’re redirected to the dashboard</li>
</ul>
<p><strong>2. Task Management</strong></p>
<ul>
<li>Create a new task with a title and description</li>
<li>Confirm that an appropriate label is automatically assigned by AI</li>
<li>Verify the task appears in your dashboard</li>
</ul>
<p><strong>3. Image Uploads</strong></p>
<ul>
<li>Click to edit a task</li>
<li>Upload an image attachment</li>
<li>Verify the image is displayed correctly</li>
</ul>
<p><strong>4. User Profile</strong></p>
<ul>
<li>Navigate to your profile page</li>
<li>Confirm your task count is tracked correctly</li>
</ul>
<p><strong>5. Subscription Management</strong></p>
<ul>
<li>Click “Manage Subscription”</li>
<li>Verify you’re taken to a Stripe checkout page</li>
<li>Test the checkout flow (use Stripe test card: 4242 4242 4242 4242)</li>
</ul>
<p><strong>6. Sign Out</strong></p>
<ul>
<li>Test the sign out functionality</li>
<li>Confirm you’re redirected to the login page</li>
</ul>
</section>
</section>
<section id="deployment-to-production-1" class="level2" data-number="20.7">
<h2 data-number="20.7" class="anchored" data-anchor-id="deployment-to-production-1"><span class="header-section-number">20.7</span> Deployment to Production</h2>
<section id="deploying-the-frontend-1" class="level3" data-number="20.7.1">
<h3 data-number="20.7.1" class="anchored" data-anchor-id="deploying-the-frontend-1"><span class="header-section-number">20.7.1</span> Deploying the Frontend</h3>
<p><strong>Recommended: Vercel</strong></p>
<p>This is a static Next.js website, making it easy to deploy:</p>
<ol type="1">
<li>Push your code to GitHub</li>
<li>Import the project in Vercel</li>
<li>Add your environment variables</li>
<li>Deploy</li>
</ol>
<p><strong>Alternative Options:</strong></p>
<ul>
<li>Netlify</li>
<li>AWS Amplify</li>
<li>Any static hosting service</li>
</ul>
</section>
<section id="update-environment-variables" class="level3" data-number="20.7.2">
<h3 data-number="20.7.2" class="anchored" data-anchor-id="update-environment-variables"><span class="header-section-number">20.7.2</span> Update Environment Variables</h3>
<p>For production, you’ll need to:</p>
<ul>
<li>Update Supabase project URL and keys</li>
<li>Switch Stripe from test mode to live mode</li>
<li>Update OAuth redirect URIs</li>
<li>Configure production domains</li>
</ul>
</section>
</section>
<section id="project-structure-1" class="level2" data-number="20.8">
<h2 data-number="20.8" class="anchored" data-anchor-id="project-structure-1"><span class="header-section-number">20.8</span> Project Structure</h2>
<p>Understanding where to make changes:</p>
<pre><code>├── app/                    # Next.js pages and routes
├── components/            # React UI components
├── hooks/                 # Client logic and Supabase integration
├── supabase/
│   ├── functions/        # Edge functions (backend logic)
│   └── migrations/       # Database schema and configurations
└── tests/
    └── integration/      # Integration test suite</code></pre>
<p><strong>To extend functionality:</strong></p>
<ul>
<li><strong>UI changes:</strong> Edit files in <code>app/</code> and <code>components/</code></li>
<li><strong>Client logic:</strong> Modify hooks in <code>hooks/</code></li>
<li><strong>Backend logic:</strong> Update functions in <code>supabase/functions/</code></li>
<li><strong>Database changes:</strong> Create new migrations in <code>supabase/migrations/</code></li>
</ul>
</section>
<section id="testing-1" class="level2" data-number="20.9">
<h2 data-number="20.9" class="anchored" data-anchor-id="testing-1"><span class="header-section-number">20.9</span> Testing</h2>
<section id="integration-tests-1" class="level3" data-number="20.9.1">
<h3 data-number="20.9.1" class="anchored" data-anchor-id="integration-tests-1"><span class="header-section-number">20.9.1</span> Integration Tests</h3>
<p>The project includes a comprehensive integration test suite that connects to your real Supabase project.</p>
</section>
<section id="set-up-test-environment-1" class="level3" data-number="20.9.2">
<h3 data-number="20.9.2" class="anchored" data-anchor-id="set-up-test-environment-1"><span class="header-section-number">20.9.2</span> Set Up Test Environment</h3>
<ol type="1">
<li>Create a test environment file:</li>
</ol>
<div class="sourceCode" id="cb27"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> example.env tests/.env.test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="2" type="1">
<li>Update with your API keys and credentials</li>
</ol>
</section>
<section id="run-tests-1" class="level3" data-number="20.9.3">
<h3 data-number="20.9.3" class="anchored" data-anchor-id="run-tests-1"><span class="header-section-number">20.9.3</span> Run Tests</h3>
<p><strong>Run all tests:</strong></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Run a specific test file:</strong></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> test <span class="at">--</span> tests/integration/specific-test.spec.ts</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Important:</strong> Tests may fail on the first run due to cold starts. If this happens, simply run them again.</p>
</section>
</section>
<section id="troubleshooting-1" class="level2" data-number="20.10">
<h2 data-number="20.10" class="anchored" data-anchor-id="troubleshooting-1"><span class="header-section-number">20.10</span> Troubleshooting</h2>
<section id="common-issues" class="level3" data-number="20.10.1">
<h3 data-number="20.10.1" class="anchored" data-anchor-id="common-issues"><span class="header-section-number">20.10.1</span> Common Issues</h3>
<p><strong>Environment variables not loading:</strong></p>
<ul>
<li>Ensure file names are exactly <code>.env.local</code> and <code>supabase/.env</code></li>
<li>Restart the development server after changes</li>
<li>Check for typos in variable names</li>
</ul>
<p><strong>Authentication errors:</strong></p>
<ul>
<li>Verify Google OAuth redirect URIs match exactly</li>
<li>Check that the Supabase callback URL is correct</li>
<li>Ensure OAuth credentials are properly configured</li>
</ul>
<p><strong>Edge functions failing:</strong></p>
<ul>
<li>Check Supabase secrets are set correctly</li>
<li>Review function logs in the Supabase dashboard</li>
<li>Verify all dependencies are installed</li>
</ul>
<p><strong>Stripe webhook not working:</strong></p>
<ul>
<li>Confirm JWT verification is disabled for the webhook function</li>
<li>Check that the webhook URL is correct</li>
<li>Verify webhook signing secret matches</li>
</ul>
<p><strong>Database errors:</strong></p>
<ul>
<li>Ensure migrations ran successfully</li>
<li>Check Row Level Security policies</li>
<li>Verify user authentication is working</li>
</ul>
</section>
</section>
<section id="next-steps-1" class="level2" data-number="20.11">
<h2 data-number="20.11" class="anchored" data-anchor-id="next-steps-1"><span class="header-section-number">20.11</span> Next Steps</h2>
<section id="further-learning-1" class="level3" data-number="20.11.1">
<h3 data-number="20.11.1" class="anchored" data-anchor-id="further-learning-1"><span class="header-section-number">20.11.1</span> Further Learning</h3>
<p>For more detailed tutorials on specific features, check the <code>tutorials/</code> folder in the project repository, which includes in-depth documentation on:</p>
<ul>
<li>Authentication implementation</li>
<li>Database design and RLS policies</li>
<li>Edge functions in detail</li>
<li>Storage configuration</li>
<li>Stripe integration patterns</li>
</ul>
</section>
<section id="extending-the-project-1" class="level3" data-number="20.11.2">
<h3 data-number="20.11.2" class="anchored" data-anchor-id="extending-the-project-1"><span class="header-section-number">20.11.2</span> Extending the Project</h3>
<p>Consider adding:</p>
<ul>
<li>Email notifications</li>
<li>Task categories and filters</li>
<li>Team collaboration features</li>
<li>Advanced reporting and analytics</li>
<li>Mobile application</li>
<li>Additional payment plans</li>
</ul>
</section>
</section>
<section id="additional-resources-1" class="level2" data-number="20.12">
<h2 data-number="20.12" class="anchored" data-anchor-id="additional-resources-1"><span class="header-section-number">20.12</span> Additional Resources</h2>
<ul>
<li>Supabase Documentation: https://supabase.com/docs</li>
<li>Next.js Documentation: https://nextjs.org/docs</li>
<li>Stripe Documentation: https://stripe.com/docs</li>
<li>OpenAI API Documentation: https://platform.openai.com/docs</li>
</ul>
</section>
<section id="conclusion-1" class="level2" data-number="20.13">
<h2 data-number="20.13" class="anchored" data-anchor-id="conclusion-1"><span class="header-section-number">20.13</span> Conclusion</h2>
<p>You now have a fully functional SaaS application with authentication, database management, file storage, AI integration, and payment processing. This foundation can be extended and customized for virtually any SaaS product idea.</p>
<p>If you encounter any issues or have questions, refer to the project’s GitHub repository or leave a comment on the original tutorial video.</p>
<p>Happy building!</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./001160-tutorial-googleOauth-v001.html" class="pagination-link" aria-label="<yrChapterNumber>18. </yrChapterNumber> Step 6: setup authentication (Google OAuth)">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title"><yrchapternumber>18. </yrchapternumber> Step 6: setup authentication (Google OAuth)</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./someFile.html" class="pagination-link" aria-label="This is a placeholder">
        <span class="nav-page-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">This is a placeholder</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<div style="text-align: center; margin-top: 2em; padding-top: 1em; border-top: 1px solid #ddd;">
  <p>© 2025 Y. Rosenthal. All rights reserved.</p>
</div>
<script>
const titles = document.querySelectorAll('.title');

titles.forEach(title => {
  if (title.textContent.trim().startsWith('Appendix')) {
    const chapterNumber = title.querySelector('yrChapterNumber');
    if (chapterNumber) {
      chapterNumber.classList.add('yrAppendixChapterNumber');
    }
  }
});
</script>




</body></html>